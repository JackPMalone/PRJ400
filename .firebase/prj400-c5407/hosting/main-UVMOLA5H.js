import{a as N,b as de,c as Iy,d as D,e as px,f as Jd,g as gx,h as mx,i as yx,j as Dy,k as vx,l as ul,m as Ey,n as eh,o as _x,p as wx,q as xy,r as $e,s as As,t as lr,u as th,v as dl,w as bx,x as Ix,y as bi,z as Lt}from"./chunk-PS5EZTFI.js";var Dx=null;var Cy=1,Ex=Symbol("SIGNAL");function Wt(t){let e=Dx;return Dx=t,e}var xx={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ZL(t){if(!(Ay(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Cy)){if(!t.producerMustRecompute(t)&&!Ty(t)){t.dirty=!1,t.lastCleanEpoch=Cy;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Cy}}function Cx(t){return t&&(t.nextProducerIndex=0),Wt(t)}function Tx(t,e){if(Wt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ay(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Sy(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ty(t){nh(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ZL(n),r!==n.version))return!0}return!1}function Sx(t){if(nh(t),Ay(t))for(let e=0;e<t.producerNode.length;e++)Sy(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Sy(t,e){if(XL(t),nh(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Sy(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];nh(i),i.producerIndexOfThis[r]=e}}function Ay(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function nh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function XL(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function JL(){throw new Error}var e2=JL;function Ax(t){e2=t}function W(t){return typeof t=="function"}function Ho(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rh=Ho(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ms(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(s){e=s instanceof rh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Mx(s)}catch(o){e=e??[],o instanceof rh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new rh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Mx(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ms(n,e)}remove(e){let{_finalizers:n}=this;n&&Ms(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var My=nt.EMPTY;function ih(t){return t instanceof nt||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function Mx(t){W(t)?t():t.unsubscribe()}var qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zo={setTimeout(t,e,...n){let{delegate:r}=zo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=zo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function sh(t){zo.setTimeout(()=>{let{onUnhandledError:e}=qn;if(e)e(t);else throw t})}function hl(){}var Rx=Ry("C",void 0,void 0);function Px(t){return Ry("E",void 0,t)}function Nx(t){return Ry("N",t,void 0)}function Ry(t,e,n){return{kind:t,value:e,error:n}}var Rs=null;function qo(t){if(qn.useDeprecatedSynchronousErrorHandling){let e=!Rs;if(e&&(Rs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Rs;if(Rs=null,n)throw r}}else t()}function kx(t){qn.useDeprecatedSynchronousErrorHandling&&Rs&&(Rs.errorThrown=!0,Rs.error=t)}var Ps=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ih(e)&&e.add(this)):this.destination=r2}static create(e,n,r){return new Hr(e,n,r)}next(e){this.isStopped?Ny(Nx(e),this):this._next(e)}error(e){this.isStopped?Ny(Px(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ny(Rx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},t2=Function.prototype.bind;function Py(t,e){return t2.call(t,e)}var ky=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){oh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){oh(r)}else oh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){oh(n)}}},Hr=class extends Ps{constructor(e,n,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&qn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Py(e.next,s),error:e.error&&Py(e.error,s),complete:e.complete&&Py(e.complete,s)}):i=e}this.destination=new ky(i)}};function oh(t){qn.useDeprecatedSynchronousErrorHandling?kx(t):sh(t)}function n2(t){throw t}function Ny(t,e){let{onStoppedNotification:n}=qn;n&&zo.setTimeout(()=>n(t,e))}var r2={closed:!0,next:hl,error:n2,complete:hl};var Go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kt(t){return t}function Oy(...t){return Fy(t)}function Fy(t){return t.length===0?Kt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=s2(n)?n:new Hr(n,r,i);return qo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ox(r),new r((i,s)=>{let o=new Hr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Go](){return this}pipe(...n){return Fy(n)(this)}toPromise(n){return n=Ox(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Ox(t){var e;return(e=t??qn.Promise)!==null&&e!==void 0?e:Promise}function i2(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function s2(t){return t&&t instanceof Ps||i2(t)&&ih(t)}function Vy(t){return W(t?.lift)}function te(t){return e=>{if(Vy(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ne(t,e,n,r,i){return new Ly(t,e,n,r,i)}var Ly=class extends Ps{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wo(){return te((t,e)=>{let n=null;t._refCount++;let r=ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ko=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Vy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return Wo()(this)}};var Fx=Ho(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var vt=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ah(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Fx}next(n){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?My:(this.currentObservers=null,s.push(n),new nt(()=>{this.currentObservers=null,Ms(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new ah(e,n),t})(),ah=class extends vt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:My}};var St=class extends vt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fl={now(){return(fl.delegate||Date).now()},delegate:void 0};var ch=class extends vt{constructor(e=1/0,n=1/0,r=fl){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var lh=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var pl={setInterval(t,e,...n){let{delegate:r}=pl;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=pl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Qo=class extends lh{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return pl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&pl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ms(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Yo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Yo.now=fl.now;var Zo=class extends Yo{constructor(e,n=Yo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var gl=new Zo(Qo);var uh=class extends Qo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var dh=class extends Zo{};var jy=new dh(uh);var rn=new se(t=>t.complete());function Vx(t){return t&&W(t.schedule)}function By(t){return t[t.length-1]}function hh(t){return W(By(t))?t.pop():void 0}function ur(t){return Vx(By(t))?t.pop():void 0}function Lx(t,e){return typeof By(t)=="number"?t.pop():e}var fh=t=>t&&typeof t.length=="number"&&typeof t!="function";function ph(t){return W(t?.then)}function gh(t){return W(t[Go])}function mh(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function yh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function o2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vh=o2();function _h(t){return W(t?.[vh])}function wh(t){return gx(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Jd(n.read());if(i)return yield Jd(void 0);yield yield Jd(r)}}finally{n.releaseLock()}})}function bh(t){return W(t?.getReader)}function Oe(t){if(t instanceof se)return t;if(t!=null){if(gh(t))return a2(t);if(fh(t))return c2(t);if(ph(t))return l2(t);if(mh(t))return jx(t);if(_h(t))return u2(t);if(bh(t))return d2(t)}throw yh(t)}function a2(t){return new se(e=>{let n=t[Go]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function c2(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function l2(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,sh)})}function u2(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function jx(t){return new se(e=>{h2(t,e).catch(n=>e.error(n))})}function d2(t){return jx(wh(t))}function h2(t,e){var n,r,i,s;return px(this,void 0,void 0,function*(){try{for(n=mx(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function sn(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Tn(t,e=0){return te((n,r)=>{n.subscribe(ne(r,i=>sn(r,t,()=>r.next(i),e),()=>sn(r,t,()=>r.complete(),e),i=>sn(r,t,()=>r.error(i),e)))})}function Gn(t,e=0){return te((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Bx(t,e){return Oe(t).pipe(Gn(e),Tn(e))}function Ux(t,e){return Oe(t).pipe(Gn(e),Tn(e))}function $x(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Hx(t,e){return new se(n=>{let r;return sn(n,e,()=>{r=t[vh](),sn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function Ih(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{sn(n,e,()=>{let r=t[Symbol.asyncIterator]();sn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zx(t,e){return Ih(wh(t),e)}function qx(t,e){if(t!=null){if(gh(t))return Bx(t,e);if(fh(t))return $x(t,e);if(ph(t))return Ux(t,e);if(mh(t))return Ih(t,e);if(_h(t))return Hx(t,e);if(bh(t))return zx(t,e)}throw yh(t)}function ye(t,e){return e?qx(t,e):Oe(t)}function H(...t){let e=ur(t);return ye(t,e)}function Xo(t,e){let n=W(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function Uy(t){return!!t&&(t instanceof se||W(t.lift)&&W(t.subscribe))}var zr=Ho(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function z(t,e){return te((n,r)=>{let i=0;n.subscribe(ne(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:f2}=Array;function p2(t,e){return f2(e)?t(...e):t(e)}function Dh(t){return z(e=>p2(t,e))}var{isArray:g2}=Array,{getPrototypeOf:m2,prototype:y2,keys:v2}=Object;function Eh(t){if(t.length===1){let e=t[0];if(g2(e))return{args:e,keys:null};if(_2(e)){let n=v2(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function _2(t){return t&&typeof t=="object"&&m2(t)===y2}function xh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ml(...t){let e=ur(t),n=hh(t),{args:r,keys:i}=Eh(t);if(r.length===0)return ye([],e);let s=new se(w2(r,e,i?o=>xh(i,o):Kt));return n?s.pipe(Dh(n)):s}function w2(t,e,n=Kt){return r=>{Gx(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Gx(e,()=>{let l=ye(t[c],e),u=!1;l.subscribe(ne(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Gx(t,e,n){t?sn(n,t,e):e()}function Wx(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;Oe(n(g,u++)).subscribe(ne(e,y=>{i?.(y),s?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let y=c.shift();o?sn(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return t.subscribe(ne(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ct(t,e,n=1/0){return W(e)?ct((r,i)=>z((s,o)=>e(r,s,i,o))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),te((r,i)=>Wx(r,i,t,n)))}function Ii(t=1/0){return ct(Kt,t)}function Kx(){return Ii(1)}function Jo(...t){return Kx()(ye(t,ur(t)))}function Ch(t){return new se(e=>{Oe(t()).subscribe(e)})}function $y(...t){let e=hh(t),{args:n,keys:r}=Eh(t),i=new se(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Oe(n[u]).subscribe(ne(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?xh(r,a):a),s.complete())}))}});return e?i.pipe(Dh(e)):i}function Hy(...t){let e=ur(t),n=Lx(t,1/0),r=t;return r.length?r.length===1?Oe(r[0]):Ii(n)(ye(r,e)):rn}function At(t,e){return te((n,r)=>{let i=0;n.subscribe(ne(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Di(t){return te((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ne(n,void 0,void 0,o=>{s=Oe(t(o,Di(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Qx(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ne(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ns(t,e){return W(e)?ct(t,e,1):ct(t,1)}function Ei(t){return te((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qr(t){return t<=0?()=>rn:te((e,n)=>{let r=0;e.subscribe(ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function zy(t){return z(()=>t)}function qy(t,e=Kt){return t=t??b2,te((n,r)=>{let i,s=!0;n.subscribe(ne(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function b2(t,e){return t===e}function Th(t=I2){return te((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function I2(){return new zr}function yl(t){return te((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Sn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((i,s)=>t(i,s,r)):Kt,qr(1),n?Ei(e):Th(()=>new zr))}function ea(t){return t<=0?()=>rn:te((e,n)=>{let r=[];e.subscribe(ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Gy(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((i,s)=>t(i,s,r)):Kt,ea(1),n?Ei(e):Th(()=>new zr))}function vl(){return te((t,e)=>{let n,r=!1;t.subscribe(ne(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function ks(t,e){return te(Qx(t,e,arguments.length>=2,!0))}function Yx(t={}){let{connector:e=()=>new vt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return te((g,m)=>{l++,!d&&!u&&h();let y=c=c??e();m.add(()=>{l--,l===0&&!d&&!u&&(a=Wy(p,i))}),y.subscribe(m),!o&&l>0&&(o=new Hr({next:v=>y.next(v),error:v=>{d=!0,h(),a=Wy(f,n,v),y.error(v)},complete:()=>{u=!0,h(),a=Wy(f,r),y.complete()}}),Oe(g).subscribe(o))})(s)}}function Wy(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Hr({next:()=>{r.unsubscribe(),t()}});return Oe(e(...n)).subscribe(r)}function Sh(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Yx({connector:()=>new ch(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Os(...t){let e=ur(t);return te((n,r)=>{(e?Jo(t,n,e):Jo(t,n)).subscribe(r)})}function Ge(t,e){return te((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ne(r,c=>{i?.unsubscribe();let l=0,u=s++;Oe(t(c,u)).subscribe(i=ne(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ah(t,e){return W(e)?Ge(()=>t,e):Ge(()=>t)}function Ky(t){return te((e,n)=>{Oe(t).subscribe(ne(n,()=>n.complete(),hl)),!n.closed&&e.subscribe(n)})}function lt(t,e,n){let r=W(t)||e||n?{next:t,error:e,complete:n}:t;return r?te((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ne(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Kt}var D2="https://g.co/ng/security#xss",U=class extends Error{constructor(e,n){super(Qv(e,n)),this.code=e}};function Qv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("Could not find renamed property on target object.")}function E2(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function on(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(on).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Zx(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var x2=Ce({__forward_ref__:Ce});function ma(t){return t.__forward_ref__=ma,t.toString=function(){return on(this())},t}function Qt(t){return NC(t)?t():t}function NC(t){return typeof t=="function"&&t.hasOwnProperty(x2)&&t.__forward_ref__===ma}function kC(t){return t&&!!t.\u0275providers}var C2=Ce({\u0275cmp:Ce}),T2=Ce({\u0275dir:Ce}),S2=Ce({\u0275pipe:Ce}),A2=Ce({\u0275mod:Ce}),jh=Ce({\u0275fac:Ce}),_l=Ce({__NG_ELEMENT_ID__:Ce}),Xx=Ce({__NG_ENV_ID__:Ce});function OC(t){return typeof t=="string"?t:t==null?"":String(t)}function M2(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():OC(t)}function R2(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new U(-200,t)}function Yv(t,e){throw new U(-201,!1)}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ke(t){return{providers:t.providers||[],imports:t.imports||[]}}function af(t){return Jx(t,VC)||Jx(t,LC)}function FC(t){return af(t)!==null}function Jx(t,e){return t.hasOwnProperty(e)?t[e]:null}function P2(t){let e=t&&(t[VC]||t[LC]);return e||null}function eC(t){return t&&(t.hasOwnProperty(tC)||t.hasOwnProperty(N2))?t[tC]:null}var VC=Ce({\u0275prov:Ce}),tC=Ce({\u0275inj:Ce}),LC=Ce({ngInjectableDef:Ce}),N2=Ce({ngInjectorDef:Ce}),re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{}),uv;function jC(){return uv}function An(t){let e=uv;return uv=t,e}function BC(t,e,n){let r=af(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&re.Optional)return null;if(e!==void 0)return e;Yv(t,"Injector")}var Mt=globalThis;var V=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var k2={},bl=k2,dv="__NG_DI_FLAG__",Bh="ngTempTokenPath",O2="ngTokenPath",F2=/\n/gm,V2="\u0275",nC="__source",sa;function L2(){return sa}function xi(t){let e=sa;return sa=t,e}function j2(t,e=re.Default){if(sa===void 0)throw new U(-203,!1);return sa===null?BC(t,void 0,e):sa.get(t,e&re.Optional?null:void 0,e)}function M(t,e=re.Default){return(jC()||j2)(Qt(t),e)}function O(t,e=re.Default){return M(t,cf(e))}function cf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hv(t){let e=[];for(let n=0;n<t.length;n++){let r=Qt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,s=re.Default;for(let o=0;o<r.length;o++){let a=r[o],c=B2(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(M(i,s))}else e.push(M(r))}return e}function UC(t,e){return t[dv]=e,t.prototype[dv]=e,t}function B2(t){return t[dv]}function U2(t,e,n,r){let i=t[Bh];throw e[nC]&&i.unshift(e[nC]),t.message=$2(`
`+t.message,i,n,r),t[O2]=i,t[Bh]=null,t}function $2(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==V2?t.slice(2):t;let i=on(e);if(Array.isArray(e))i=e.map(on).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):on(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(F2,`
  `)}`}function Pl(t){return{toString:t}.toString()}var $C=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}($C||{}),fr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(fr||{}),aa={},Mn=[],_n=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(_n||{});function HC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function fv(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];z2(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function H2(t){return t===3||t===4||t===6}function z2(t){return t.charCodeAt(0)===64}function Il(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rC(t,n,i,null,e[++r]):rC(t,n,i,null,null))}}return t}function rC(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var zC="ng-template";function q2(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&HC(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function qC(t){return t.type===4&&t.value!==zC}function G2(t,e,n){let r=t.type===4&&!n?zC:t.value;return e===r}function W2(t,e,n){let r=4,i=t.attrs||[],s=Y2(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Wn(r)&&!Wn(c))return!1;if(o&&Wn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!G2(t,c,n)||c===""&&e.length===1){if(Wn(r))return!1;o=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!q2(t.attrs,l,n)){if(Wn(r))return!1;o=!0}continue}let u=r&8?"class":c,d=K2(u,i,qC(t),n);if(d===-1){if(Wn(r))return!1;o=!0;continue}if(l!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&HC(f,l,0)!==-1||r&2&&l!==h){if(Wn(r))return!1;o=!0}}}}return Wn(r)||o}function Wn(t){return(t&1)===0}function K2(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Z2(e,t)}function Q2(t,e,n=!1){for(let r=0;r<e.length;r++)if(W2(t,e[r],n))return!0;return!1}function Y2(t){for(let e=0;e<t.length;e++){let n=t[e];if(H2(n))return e}return t.length}function Z2(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function iC(t,e){return t?":not("+e.trim()+")":e}function X2(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Wn(o)&&(e+=iC(s,i),i=""),r=o,s=s||!Wn(r);n++}return i!==""&&(e+=iC(s,i)),e}function J2(t){return t.map(X2).join(",")}function ej(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Wn(i))break;i=s}r++}return{attrs:e,classes:n}}function bt(t){return Pl(()=>{let e=ZC(t),n=de(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===$C.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fr.Emulated,styles:t.styles||Mn,_:null,schemas:t.schemas||null,tView:null,id:""});XC(n);let r=t.dependencies;return n.directiveDefs=oC(r,!1),n.pipeDefs=oC(r,!0),n.id=rj(n),n})}function tj(t){return Ti(t)||WC(t)}function nj(t){return t!==null}function Qe(t){return Pl(()=>({type:t.type,bootstrap:t.bootstrap||Mn,declarations:t.declarations||Mn,imports:t.imports||Mn,exports:t.exports||Mn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sC(t,e){if(t==null)return aa;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=_n.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==_n.None?[r,a]:r,e[s]=o):n[s]=r}return n}function bn(t){return Pl(()=>{let e=ZC(t);return XC(e),e})}function GC(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ti(t){return t[C2]||null}function WC(t){return t[T2]||null}function KC(t){return t[S2]||null}function QC(t){let e=Ti(t)||WC(t)||KC(t);return e!==null?e.standalone:!1}function YC(t,e){let n=t[A2]||null;if(!n&&e===!0)throw new Error(`Type ${on(t)} does not have '\u0275mod' property.`);return n}function ZC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||aa,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Mn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sC(t.inputs,e),outputs:sC(t.outputs),debugInfo:null}}function XC(t){t.features?.forEach(e=>e(t))}function oC(t,e){if(!t)return null;let n=e?KC:tj;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(nj)}function rj(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Kr=0,oe=1,G=2,jt=3,Kn=4,Qn=5,Uh=6,Dl=7,Rn=8,ca=9,Si=10,Bt=11,El=12,aC=13,ya=14,pr=15,lf=16,ta=17,xl=18,uf=19,JC=20,Ci=21,Qy=22,js=23,gr=25,eT=1;var Bs=7,$h=8,Hh=9,vn=10,Zv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Zv||{});function Vs(t){return Array.isArray(t)&&typeof t[eT]=="object"}function Qr(t){return Array.isArray(t)&&t[eT]===!0}function tT(t){return(t.flags&4)!==0}function df(t){return t.componentOffset>-1}function Xv(t){return(t.flags&1)===1}function Ai(t){return!!t.template}function ij(t){return(t[G]&512)!==0}function la(t,e){let n=t.hasOwnProperty(jh);return n?t[jh]:null}var pv=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function nT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ri(){return rT}function rT(t){return t.type.prototype.ngOnChanges&&(t.setInput=oj),sj}Ri.ngInherit=!0;function sj(){let t=sT(this),e=t?.current;if(e){let n=t.previous;if(n===aa)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function oj(t,e,n,r,i){let s=this.declaredInputs[r],o=sT(t)||aj(t,{previous:aa,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new pv(l&&l.currentValue,n,c===aa),nT(t,e,i,n)}var iT="__ngSimpleChanges__";function sT(t){return t[iT]||null}function aj(t,e){return t[iT]=e}var cC=null;var dr=function(t,e,n){cC?.(t,e,n)},oT="svg",cj="math",lj=!1;function uj(){return lj}function mr(t){for(;Array.isArray(t);)t=t[Kr];return t}function aT(t,e){return mr(e[t])}function Yn(t,e){return mr(e[t.index])}function Jv(t,e){return t.data[e]}function Pi(t,e){let n=e[t];return Vs(n)?n:n[Kr]}function e_(t){return(t[G]&128)===128}function dj(t){return Qr(t[jt])}function zh(t,e){return e==null?null:t[e]}function cT(t){t[ta]=0}function hj(t){t[G]&1024||(t[G]|=1024,e_(t)&&Cl(t))}function fj(t,e){for(;t>0;)e=e[ya],t--;return e}function t_(t){return!!(t[G]&9216||t[js]?.dirty)}function gv(t){t_(t)?Cl(t):t[G]&64&&(uj()?(t[G]|=1024,Cl(t)):t[Si].changeDetectionScheduler?.notify())}function Cl(t){t[Si].changeDetectionScheduler?.notify();let e=Tl(t);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!e_(e)));)e=Tl(e)}function lT(t,e){if((t[G]&256)===256)throw new U(911,!1);t[Ci]===null&&(t[Ci]=[]),t[Ci].push(e)}function pj(t,e){if(t[Ci]===null)return;let n=t[Ci].indexOf(e);n!==-1&&t[Ci].splice(n,1)}function Tl(t){let e=t[jt];return Qr(e)?e[jt]:e}var ie={lFrame:vT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gj(){return ie.lFrame.elementDepthCount}function mj(){ie.lFrame.elementDepthCount++}function yj(){ie.lFrame.elementDepthCount--}function uT(){return ie.bindingsEnabled}function vj(){return ie.skipHydrationRootTNode!==null}function _j(t){return ie.skipHydrationRootTNode===t}function wj(){ie.skipHydrationRootTNode=null}function We(){return ie.lFrame.lView}function vr(){return ie.lFrame.tView}function dT(t){return ie.lFrame.contextLView=t,t[Rn]}function hT(t){return ie.lFrame.contextLView=null,t}function Zn(){let t=fT();for(;t!==null&&t.type===64;)t=t.parent;return t}function fT(){return ie.lFrame.currentTNode}function bj(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Nl(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function pT(){return ie.lFrame.isParent}function Ij(){ie.lFrame.isParent=!1}function Dj(){let t=ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ej(t){return ie.lFrame.bindingIndex=t}function n_(){return ie.lFrame.bindingIndex++}function xj(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Cj(){return ie.lFrame.inI18n}function Tj(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,mv(e)}function Sj(){return ie.lFrame.currentDirectiveIndex}function mv(t){ie.lFrame.currentDirectiveIndex=t}function Aj(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function gT(t){ie.lFrame.currentQueryIndex=t}function Mj(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[Qn]:null}function mT(t,e,n){if(n&re.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&re.Host);)if(i=Mj(s),i===null||(s=s[ya],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ie.lFrame=yT();return r.currentTNode=e,r.lView=t,!0}function r_(t){let e=yT(),n=t[oe];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yT(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?vT(t):e}function vT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function _T(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wT=_T;function i_(){let t=_T();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rj(t){return(ie.lFrame.contextLView=fj(t,ie.lFrame.contextLView))[Rn]}function va(){return ie.lFrame.selectedIndex}function Us(t){ie.lFrame.selectedIndex=t}function Pj(){let t=ie.lFrame;return Jv(t.tView,t.selectedIndex)}function bT(){ie.lFrame.currentNamespace=oT}function Nj(){return ie.lFrame.currentNamespace}var IT=!0;function s_(){return IT}function o_(t){IT=t}function kj(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=rT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function a_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function kh(t,e,n){DT(t,e,3,n)}function Oh(t,e,n,r){(t[G]&3)===n&&DT(t,e,n,r)}function Yy(t,e){let n=t[G];(n&3)===e&&(n&=16383,n+=1,t[G]=n)}function DT(t,e,n,r){let i=r!==void 0?t[ta]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[ta]+=65536),(a<s||s==-1)&&(Oj(t,n,e,c),t[ta]=(t[ta]&4294901760)+c+2),c++}function lC(t,e){dr(4,t,e);let n=Wt(null);try{e.call(t)}finally{Wt(n),dr(5,t,e)}}function Oj(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[G]>>14<t[ta]>>16&&(t[G]&3)===e&&(t[G]+=16384,lC(a,s)):lC(a,s)}var oa=-1,$s=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Fj(t){return t instanceof $s}function Vj(t){return(t.flags&8)!==0}function Lj(t){return(t.flags&16)!==0}function ET(t){return t!==oa}function qh(t){return t&32767}function jj(t){return t>>16}function Gh(t,e){let n=jj(t),r=e;for(;n>0;)r=r[ya],n--;return r}var yv=!0;function uC(t){let e=yv;return yv=t,e}var Bj=256,xT=Bj-1,CT=5,Uj=0,hr={};function $j(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(_l)&&(r=n[_l]),r==null&&(r=n[_l]=Uj++);let i=r&xT,s=1<<i;e.data[t+(i>>CT)]|=s}function Wh(t,e){let n=TT(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,Zy(r.data,t),Zy(e,null),Zy(r.blueprint,null));let i=c_(t,e),s=t.injectorIndex;if(ET(i)){let o=qh(i),a=Gh(i,e),c=a[oe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Zy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function TT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function c_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=PT(i),r===null)return oa;if(n++,i=i[ya],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return oa}function vv(t,e,n){$j(t,e,n)}function ST(t,e,n){if(n&re.Optional||t!==void 0)return t;Yv(e,"NodeInjector")}function AT(t,e,n,r){if(n&re.Optional&&r===void 0&&(r=null),!(n&(re.Self|re.Host))){let i=t[ca],s=An(void 0);try{return i?i.get(e,r,n&re.Optional):BC(e,r,n&re.Optional)}finally{An(s)}}return ST(r,e,n)}function MT(t,e,n,r=re.Default,i){if(t!==null){if(e[G]&2048&&!(r&re.Self)){let o=Wj(t,e,n,r,hr);if(o!==hr)return o}let s=RT(t,e,n,r,hr);if(s!==hr)return s}return AT(e,n,r,i)}function RT(t,e,n,r,i){let s=qj(n);if(typeof s=="function"){if(!mT(e,t,r))return r&re.Host?ST(i,n,r):AT(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&re.Optional))Yv(n);else return o}finally{wT()}}else if(typeof s=="number"){let o=null,a=TT(t,e),c=oa,l=r&re.Host?e[pr][Qn]:null;for((a===-1||r&re.SkipSelf)&&(c=a===-1?c_(t,e):e[a+8],c===oa||!hC(r,!1)?a=-1:(o=e[oe],a=qh(c),e=Gh(c,e)));a!==-1;){let u=e[oe];if(dC(s,a,u.data)){let d=Hj(a,e,n,o,r,l);if(d!==hr)return d}c=e[a+8],c!==oa&&hC(r,e[oe].data[a+8]===l)&&dC(s,a,e)?(o=u,a=qh(c),e=Gh(c,e)):a=-1}}return i}function Hj(t,e,n,r,i,s){let o=e[oe],a=o.data[t+8],c=r==null?df(a)&&yv:r!=o&&(a.type&3)!==0,l=i&re.Host&&s===a,u=zj(a,o,n,c,l);return u!==null?ua(e,o,u,a):hr}function zj(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&Ai(f)&&f.type===n)return c}return null}function ua(t,e,n,r){let i=t[n],s=e.data;if(Fj(i)){let o=i;o.resolving&&R2(M2(s[n]));let a=uC(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?An(o.injectImpl):null,u=mT(t,r,re.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kj(n,s[n],e)}finally{l!==null&&An(l),uC(a),o.resolving=!1,wT()}}return i}function qj(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(_l)?t[_l]:void 0;return typeof e=="number"?e>=0?e&xT:Gj:e}function dC(t,e,n){let r=1<<t;return!!(n[e+(t>>CT)]&r)}function hC(t,e){return!(t&re.Self)&&!(t&re.Host&&e)}var Ls=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return MT(this._tNode,this._lView,e,cf(r),n)}};function Gj(){return new Ls(Zn(),We())}function kl(t){return Pl(()=>{let e=t.prototype.constructor,n=e[jh]||_v(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[jh]||_v(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function _v(t){return NC(t)?()=>{let e=_v(Qt(t));return e&&e()}:la(t)}function Wj(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[G]&2048&&!(o[G]&512);){let a=RT(s,o,n,r|re.Self,hr);if(a!==hr)return a;let c=s.parent;if(!c){let l=o[JC];if(l){let u=l.get(n,hr,r);if(u!==hr)return u}c=PT(o),o=o[ya]}s=c}return i}function PT(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[Qn]:null}var Mh="__parameters__";function Kj(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function NT(t,e,n){return Pl(()=>{let r=Kj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Mh)?c[Mh]:Object.defineProperty(c,Mh,{value:[]})[Mh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Qj(t){let e=Mt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Yj(t){return typeof t=="function"}function l_(t,e){t.forEach(n=>Array.isArray(n)?l_(n,e):e(n))}function kT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Zj(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Xj(t,e,n){let r=Ol(t,e);return r>=0?t[r|1]=n:(r=~r,Zj(t,r,e,n)),r}function Xy(t,e){let n=Ol(t,e);if(n>=0)return t[n|1]}function Ol(t,e){return Jj(t,e,1)}function Jj(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Fl=UC(NT("Optional"),8);var OT=UC(NT("SkipSelf"),4);function eB(t){let e=[],n=new Map;function r(i){let s=n.get(i);if(!s){let o=t(i);n.set(i,s=o.then(iB))}return s}return Qh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>sB(s));e.push(c)}),nB(),Promise.all(e).then(()=>{})}var Qh=new Map,tB=new Set;function nB(){let t=Qh;return Qh=new Map,t}function rB(){return Qh.size===0}function iB(t){return typeof t=="string"?t:t.text()}function sB(t){tB.delete(t)}var da=new V(""),FT=new V("",-1),VT=new V(""),Yh=class{get(e,n=bl){if(n===bl){let r=new Error(`NullInjectorError: No provider for ${on(e)}!`);throw r.name="NullInjectorError",r}return n}};function oB(...t){return{\u0275providers:LT(!0,t),\u0275fromNgModule:!0}}function LT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return l_(e,o=>{let a=o;wv(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jT(i,s),n}function jT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];u_(i,s=>{e(s,r)})}}function wv(t,e,n,r){if(t=Qt(t),!t)return!1;let i=null,s=eC(t),o=!s&&Ti(t);if(!s&&!o){let c=t.ngModule;if(s=eC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)wv(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{l_(s.imports,u=>{wv(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&jT(l,e)}if(!a){let l=la(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mn},i),e({provide:VT,useValue:i,multi:!0},i),e({provide:da,useValue:()=>M(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;u_(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function u_(t,e){for(let n of t)kC(n)&&(n=n.\u0275providers),Array.isArray(n)?u_(n,e):e(n)}var aB=Ce({provide:String,useValue:Ce});function BT(t){return t!==null&&typeof t=="object"&&aB in t}function cB(t){return!!(t&&t.useExisting)}function lB(t){return!!(t&&t.useFactory)}function ha(t){return typeof t=="function"}function uB(t){return!!t.useClass}var hf=new V(""),Fh={},dB={},Jy;function d_(){return Jy===void 0&&(Jy=new Yh),Jy}var wn=class{},Sl=class extends wn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Iv(e,o=>this.processProvider(o)),this.records.set(FT,na(void 0,this)),i.has("environment")&&this.records.set(wn,na(void 0,this));let s=this.records.get(hf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(VT,Mn,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=xi(this),r=An(void 0),i;try{return e()}finally{xi(n),An(r)}}get(e,n=bl,r=re.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xx))return e[Xx](this);r=cf(r);let i,s=xi(this),o=An(void 0);try{if(!(r&re.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=mB(e)&&af(e);l&&this.injectableDefInScope(l)?c=na(bv(e),Fh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&re.Self?d_():this.parent;return n=r&re.Optional&&n===bl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Bh]=a[Bh]||[]).unshift(on(e)),s)throw a;return U2(a,e,"R3InjectorError",this.source)}else throw a}finally{An(o),xi(s)}}resolveInjectorInitializers(){let e=xi(this),n=An(void 0),r;try{let i=this.get(da,Mn,re.Self);for(let s of i)s()}finally{xi(e),An(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(on(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=Qt(e);let n=ha(e)?e:Qt(e&&e.provide),r=fB(e);if(!ha(e)&&e.multi===!0){let i=this.records.get(n);i||(i=na(void 0,Fh,!0),i.factory=()=>hv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Fh&&(n.value=dB,n.value=n.factory()),typeof n.value=="object"&&n.value&&gB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Qt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function bv(t){let e=af(t),n=e!==null?e.factory:la(t);if(n!==null)return n;if(t instanceof V)throw new U(204,!1);if(t instanceof Function)return hB(t);throw new U(204,!1)}function hB(t){if(t.length>0)throw new U(204,!1);let n=P2(t);return n!==null?()=>n.factory(t):()=>new t}function fB(t){if(BT(t))return na(void 0,t.useValue);{let e=UT(t);return na(e,Fh)}}function UT(t,e,n){let r;if(ha(t)){let i=Qt(t);return la(i)||bv(i)}else if(BT(t))r=()=>Qt(t.useValue);else if(lB(t))r=()=>t.useFactory(...hv(t.deps||[]));else if(cB(t))r=()=>M(Qt(t.useExisting));else{let i=Qt(t&&(t.useClass||t.provide));if(pB(t))r=()=>new i(...hv(t.deps));else return la(i)||bv(i)}return r}function na(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function pB(t){return!!t.deps}function gB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function mB(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function Iv(t,e){for(let n of t)Array.isArray(n)?Iv(n,e):n&&kC(n)?Iv(n.\u0275providers,e):e(n)}function Ni(t,e){t instanceof Sl&&t.assertNotDestroyed();let n,r=xi(t),i=An(void 0);try{return e()}finally{xi(r),An(i)}}function yB(t){if(!jC()&&!L2())throw new U(-203,!1)}function fC(t,e=null,n=null,r){let i=$T(t,e,n,r);return i.resolveInjectorInitializers(),i}function $T(t,e=null,n=null,r,i=new Set){let s=[n||Mn,oB(t)];return r=r||(typeof t=="object"?void 0:on(t)),new Sl(s,e||d_(),r||null,i)}var Xn=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return fC({name:""},i,r,"");{let s=r.name??"";return fC({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=bl,e.NULL=new Yh,e.\u0275prov=j({token:e,providedIn:"any",factory:()=>M(FT)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Dv;function HT(t){Dv=t}function vB(){if(Dv!==void 0)return Dv;if(typeof document<"u")return document;throw new U(210,!1)}var ff=new V("",{providedIn:"root",factory:()=>_B}),_B="ng",h_=new V(""),an=new V("",{providedIn:"platform",factory:()=>"unknown"});var f_=new V("",{providedIn:"root",factory:()=>vB().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function zT(t){return t instanceof Function?t():t}function wB(t){return(t??O(Xn)).get(an)==="browser"}function qT(t){return(t.flags&128)===128}var Gr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Gr||{});var GT=new Map,bB=0;function IB(){return bB++}function DB(t){GT.set(t[uf],t)}function EB(t){GT.delete(t[uf])}var pC="__ngContext__";function Hs(t,e){Vs(e)?(t[pC]=e[uf],DB(e)):t[pC]=e}var xB;function p_(t,e){return xB(t,e)}function ra(t,e,n,r,i){if(r!=null){let s,o=!1;Qr(r)?s=r:Vs(r)&&(o=!0,r=r[Kr]);let a=mr(r);t===0&&n!==null?i==null?YT(e,n,a):Xh(e,n,a,i||null,!0):t===1&&n!==null?Xh(e,n,a,i||null,!0):t===2?$B(e,a,o):t===3&&e.destroyNode(a),s!=null&&zB(e,t,s,n,i)}}function CB(t,e){return t.createText(e)}function TB(t,e,n){t.setValue(e,n)}function WT(t,e,n){return t.createElement(e,n)}function SB(t,e){KT(t,e),e[Kr]=null,e[Qn]=null}function AB(t,e,n,r,i,s){r[Kr]=i,r[Qn]=e,pf(t,r,n,1,i,s)}function KT(t,e){pf(t,e,e[Bt],2,null,null)}function MB(t){let e=t[El];if(!e)return ev(t[oe],t);for(;e;){let n=null;if(Vs(e))n=e[El];else{let r=e[vn];r&&(n=r)}if(!n){for(;e&&!e[Kn]&&e!==t;)Vs(e)&&ev(e[oe],e),e=e[jt];e===null&&(e=t),Vs(e)&&ev(e[oe],e),n=e&&e[Kn]}e=n}}function RB(t,e,n,r){let i=vn+r,s=n.length;r>0&&(n[i-1][Kn]=e),r<s-vn?(e[Kn]=n[i],kT(n,vn+r,e)):(n.push(e),e[Kn]=null),e[jt]=n;let o=e[lf];o!==null&&n!==o&&PB(o,e);let a=e[xl];a!==null&&a.insertView(t),gv(e),e[G]|=128}function PB(t,e){let n=t[Hh],i=e[jt][jt][pr];e[pr]!==i&&(t[G]|=Zv.HasTransplantedViews),n===null?t[Hh]=[e]:n.push(e)}function QT(t,e){let n=t[Hh],r=n.indexOf(e);n.splice(r,1)}function Zh(t,e){if(t.length<=vn)return;let n=vn+e,r=t[n];if(r){let i=r[lf];i!==null&&i!==t&&QT(i,r),e>0&&(t[n-1][Kn]=r[Kn]);let s=Kh(t,vn+e);SB(r[oe],r);let o=s[xl];o!==null&&o.detachView(s[oe]),r[jt]=null,r[Kn]=null,r[G]&=-129}return r}function g_(t,e){if(!(e[G]&256)){let n=e[Bt];n.destroyNode&&pf(t,e,n,3,null,null),MB(e)}}function ev(t,e){if(!(e[G]&256)){e[G]&=-129,e[G]|=256,e[js]&&Sx(e[js]),kB(t,e),NB(t,e),e[oe].type===1&&e[Bt].destroy();let n=e[lf];if(n!==null&&Qr(e[jt])){n!==e[jt]&&QT(n,e);let r=e[xl];r!==null&&r.detachView(t)}EB(e)}}function NB(t,e){let n=t.cleanup,r=e[Dl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Dl]=null);let i=e[Ci];if(i!==null){e[Ci]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function kB(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof $s)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];dr(4,a,c);try{c.call(a)}finally{dr(5,a,c)}}else{dr(4,i,s);try{s.call(i)}finally{dr(5,i,s)}}}}}function OB(t,e,n){return FB(t,e.parent,n)}function FB(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Kr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===fr.None||s===fr.Emulated)return null}return Yn(r,n)}}function Xh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function YT(t,e,n){t.appendChild(e,n)}function gC(t,e,n,r,i){r!==null?Xh(t,e,n,r,i):YT(t,e,n)}function VB(t,e,n,r){t.removeChild(e,n,r)}function m_(t,e){return t.parentNode(e)}function LB(t,e){return t.nextSibling(e)}function jB(t,e,n){return UB(t,e,n)}function BB(t,e,n){return t.type&40?Yn(t,n):null}var UB=BB,mC;function y_(t,e,n,r){let i=OB(t,r,e),s=e[Bt],o=r.parent||e[Qn],a=jB(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)gC(s,i,n[c],a,!1);else gC(s,i,n,a,!1);mC!==void 0&&mC(s,r,e,n,i)}function Vh(t,e){if(e!==null){let n=e.type;if(n&3)return Yn(e,t);if(n&4)return Ev(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Vh(t,r);{let i=t[e.index];return Qr(i)?Ev(-1,i):mr(i)}}else{if(n&32)return p_(e,t)()||mr(t[e.index]);{let r=ZT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Tl(t[pr]);return Vh(i,r)}else return Vh(t,e.next)}}}return null}function ZT(t,e){if(e!==null){let r=t[pr][Qn],i=e.projection;return r.projection[i]}return null}function Ev(t,e){let n=vn+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return Vh(r,i)}return e[Bs]}function $B(t,e,n){let r=m_(t,e);r&&VB(t,r,e,n)}function v_(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Hs(mr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)v_(t,e,n.child,r,i,s,!1),ra(e,t,i,a,s);else if(c&32){let l=p_(n,r),u;for(;u=l();)ra(e,t,i,u,s);ra(e,t,i,a,s)}else c&16?HB(t,e,r,n,i,s):ra(e,t,i,a,s);n=o?n.projectionNext:n.next}}function pf(t,e,n,r,i,s){v_(n,r,t.firstChild,e,i,s,!1)}function HB(t,e,n,r,i,s){let o=n[pr],c=o[Qn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ra(e,t,i,u,s)}else{let l=c,u=o[jt];qT(r)&&(l.flags|=128),v_(t,e,l,u,i,s,!0)}}function zB(t,e,n,r,i){let s=n[Bs],o=mr(n);s!==o&&ra(e,t,r,s,i);for(let a=vn;a<n.length;a++){let c=n[a];pf(c[oe],c,t,e,r,s)}}function qB(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Gr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Gr.Important),t.setStyle(n,r,i,s))}}function GB(t,e,n){t.setAttribute(e,"style",n)}function XT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function JT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&fv(t,e,r),i!==null&&XT(t,e,i),s!==null&&GB(t,e,s)}var xv=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${D2})`}};function __(t){return t instanceof xv?t.changingThisBreaksApplicationSecurity:t}var Cv=class{};var WB="h",KB="b";var QB=()=>null;function w_(t,e,n=!1){return QB(t,e,n)}var Tv=class{},Jh=class{};function YB(t){let e=Error(`No component factory found for ${on(t)}.`);return e[ZB]=t,e}var ZB="ngComponent";var Sv=class{resolveComponentFactory(e){throw YB(e)}},gf=(()=>{let e=class e{};e.NULL=new Sv;let t=e;return t})();function XB(){return b_(Zn(),We())}function b_(t,e){return new ki(Yn(t,e))}var ki=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=XB;let t=e;return t})();var Al=class{},_a=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>JB();let t=e;return t})();function JB(){let t=We(),e=Zn(),n=Pi(e.index,t);return(Vs(n)?n:t)[Bt]}var eU=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),tv={};function ef(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(mr(s)),Qr(s)&&tU(s,r);let o=n.type;if(o&8)ef(t,e,n.child,r);else if(o&32){let a=p_(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ZT(e,n);if(Array.isArray(a))r.push(...a);else{let c=Tl(e[pr]);ef(c[oe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function tU(t,e){for(let n=vn;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&ef(r[oe],r,i,e)}t[Bs]!==t[Kr]&&e.push(t[Bs])}var eS=[];function nU(t){return t[js]??rU(t)}function rU(t){let e=eS.pop()??Object.create(sU);return e.lView=t,e}function iU(t){t.lView[js]!==t&&(t.lView=null,eS.push(t))}var sU=de(N({},xx),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Cl(t.lView)},consumerOnSignalRead(){this.lView[js]=this}});function tS(t){return rS(t[El])}function nS(t){return rS(t[Kn])}function rS(t){for(;t!==null&&!Qr(t);)t=t[Kn];return t}var oU="ngOriginalError";function nv(t){return t[oU]}var yr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&nv(e);for(;n&&nv(n);)n=nv(n);return n||null}},iS=new V("",{providedIn:"root",factory:()=>O(yr).handleError.bind(void 0)});var sS=!1,aU=new V("",{providedIn:"root",factory:()=>sS});var qs={};function Yt(t=1){oS(vr(),We(),va()+t,!1)}function oS(t,e,n,r){if(!r)if((e[G]&3)===3){let s=t.preOrderCheckHooks;s!==null&&kh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Oh(e,s,0,n)}Us(n)}function q(t,e=re.Default){let n=We();if(n===null)return M(t,e);let r=Zn();return MT(r,n,Qt(t),e)}function aS(){let t="invalid";throw new Error(t)}function cS(t,e,n,r,i,s){let o=Wt(null);try{let a=null;i&_n.SignalBased&&(a=e[r][Ex]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&_n.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):nT(e,a,r,s)}finally{Wt(o)}}function cU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Us(~i);else{let s=i,o=n[++r],a=n[++r];Tj(o,s);let c=e[s];a(2,c)}}}finally{Us(-1)}}function mf(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Kr]=i,d[G]=r|4|128|8|64,(l!==null||t&&t[G]&2048)&&(d[G]|=2048),cT(d),d[jt]=d[ya]=t,d[Rn]=n,d[Si]=o||t&&t[Si],d[Bt]=a||t&&t[Bt],d[ca]=c||t&&t[ca]||null,d[Qn]=s,d[uf]=IB(),d[Uh]=u,d[JC]=l,d[pr]=e.type==2?t[pr]:d,d}function yf(t,e,n,r,i){let s=t.data[e];if(s===null)s=lU(t,e,n,r,i),Cj()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=bj();s.injectorIndex=o===null?-1:o.injectorIndex}return Nl(s,!0),s}function lU(t,e,n,r,i){let s=fT(),o=pT(),a=o?s:s&&s.parent,c=t.data[e]=pU(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function lS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function uS(t,e,n,r,i){let s=va(),o=r&2;try{Us(-1),o&&e.length>gr&&oS(t,e,gr,!1),dr(o?2:0,i),n(r,i)}finally{Us(s),dr(o?3:1,i)}}function dS(t,e,n){if(tT(e)){let r=Wt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Wt(r)}}}function hS(t,e,n){uT()&&(bU(t,e,n,Yn(n,e)),(n.flags&64)===64&&yS(t,e,n))}function fS(t,e,n=Yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function pS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=I_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function I_(t,e,n,r,i,s,o,a,c,l,u){let d=gr+r,h=d+i,f=uU(d,h),p=typeof l=="function"?l():l;return f[oe]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function uU(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:qs);return n}function dU(t,e,n,r){let s=r.get(aU,sS)||n===fr.ShadowDom,o=t.selectRootElement(e,s);return hU(o),o}function hU(t){fU(t)}var fU=()=>null;function pU(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return vj()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yC(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=_n.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?vC(r,n,l,a,c):vC(r,n,l,a)}return r}function vC(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function gU(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=yC(0,d.inputs,u,c,f),l=yC(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!qC(e)?MU(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function mU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yU(t,e,n,r,i,s,o,a){let c=Yn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(D_(t,n,u,r,i),df(e)&&vU(n,e.index)):e.type&3?(r=mU(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function vU(t,e){let n=Pi(e,t);n[G]&16||(n[G]|=64)}function gS(t,e,n,r){if(uT()){let i=r===null?null:{"":-1},s=DU(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&mS(t,e,n,o,i,a),i&&EU(n,r,i)}n.mergedAttrs=Il(n.mergedAttrs,n.attrs)}function mS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)vv(Wh(n,e),t,r[l].type);CU(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=lS(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Il(n.mergedAttrs,u.hostAttrs),TU(t,n,e,c,u),xU(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}gU(t,n,s)}function _U(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;wU(o)!=a&&o.push(a),o.push(n,r,s)}}function wU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function bU(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;df(n)&&SU(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Wh(n,e),Hs(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=ua(e,t,a,n);if(Hs(l,e),o!==null&&AU(e,a-i,l,c,n,o),Ai(c)){let u=Pi(n.index,e);u[Rn]=ua(e,t,a,n)}}}function yS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Sj();try{Us(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];mv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&IU(c,l)}}finally{Us(-1),mv(o)}}function IU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function DU(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Q2(e,o.selectors,!1))if(r||(r=[]),Ai(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Av(t,e,c)}else r.unshift(o),Av(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Av(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function EU(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new U(-301,!1);r.push(e[i],s)}}}function xU(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ai(e)&&(n[""]=t)}}function CU(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function TU(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=la(i.type,!0)),o=new $s(s,Ai(i),q);t.blueprint[r]=o,n[r]=o,_U(t,e,r,lS(t,n,i.hostVars,qs),i)}function SU(t,e,n){let r=Yn(e,t),i=pS(n),s=t[Si].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=vf(t,mf(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function AU(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];cS(r,n,c,l,u,d)}}function MU(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function vS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function _S(t,e){let n=t.contentQueries;if(n!==null){let r=Wt(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];gT(s),a.contentQueries(2,e[o],o)}}}finally{Wt(r)}}}function vf(t,e){return t[El]?t[aC][Kn]=e:t[El]=e,t[aC]=e,e}function Mv(t,e,n){gT(0);let r=Wt(null);try{e(t,n)}finally{Wt(r)}}function RU(t){return t[Dl]||(t[Dl]=[])}function PU(t){return t.cleanup||(t.cleanup=[])}function wS(t,e){let n=t[ca],r=n?n.get(yr,null):null;r&&r.handleError(e)}function D_(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];cS(u,l,r,a,c,i)}}function NU(t,e,n){let r=aT(e,t);TB(t[Bt],r,n)}var bS=100;function IS(t,e=!0,n=0){let r=t[Si],i=r.rendererFactory,s=!1;s||i.begin?.();try{kU(t,n)}catch(o){throw e&&wS(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function kU(t,e){Rv(t,e);let n=0;for(;t_(t);){if(n===bS)throw new U(103,!1);n++,Rv(t,1)}}function OU(t,e,n,r){let i=e[G];if((i&256)===256)return;let s=!1;!s&&e[Si].inlineEffectRunner?.flush(),r_(e);let o=null,a=null;!s&&FU(t)&&(a=nU(e),o=Cx(a));try{cT(e),Ej(t.bindingStartIndex),n!==null&&uS(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&kh(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Oh(e,d,0,null),Yy(e,0)}if(VU(e),DS(e,0),t.contentQueries!==null&&_S(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&kh(e,d)}else{let d=t.contentHooks;d!==null&&Oh(e,d,1),Yy(e,1)}cU(t,e);let l=t.components;l!==null&&xS(e,l,0);let u=t.viewQuery;if(u!==null&&Mv(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&kh(e,d)}else{let d=t.viewHooks;d!==null&&Oh(e,d,2),Yy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Qy]){for(let d of e[Qy])d();e[Qy]=null}s||(e[G]&=-73)}catch(c){throw Cl(e),c}finally{a!==null&&(Tx(a,o),iU(a)),i_()}}function FU(t){return t.type!==2}function DS(t,e){for(let n=tS(t);n!==null;n=nS(n))for(let r=vn;r<n.length;r++){let i=n[r];ES(i,e)}}function VU(t){for(let e=tS(t);e!==null;e=nS(e)){if(!(e[G]&Zv.HasTransplantedViews))continue;let n=e[Hh];for(let r=0;r<n.length;r++){let i=n[r],s=i[jt];hj(i)}}}function LU(t,e,n){let r=Pi(e,t);ES(r,n)}function ES(t,e){e_(t)&&Rv(t,e)}function Rv(t,e){let r=t[oe],i=t[G],s=t[js],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ty(s)),s&&(s.dirty=!1),t[G]&=-9217,o)OU(r,t,r.template,t[Rn]);else if(i&8192){DS(t,1);let a=r.components;a!==null&&xS(t,a,1)}}function xS(t,e,n){for(let r=0;r<e.length;r++)LU(t,e[r],n)}function E_(t){for(t[Si].changeDetectionScheduler?.notify();t;){t[G]|=64;let e=Tl(t);if(ij(t)&&!e)return t;t=e}return null}var fa=class{get rootNodes(){let e=this._lView,n=e[oe];return ef(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return(this._lView[G]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[jt];if(Qr(e)){let n=e[$h],r=n?n.indexOf(this):-1;r>-1&&(Zh(e,r),Kh(n,r))}this._attachedToViewContainer=!1}g_(this._lView[oe],this._lView)}onDestroy(e){lT(this._lView,e)}markForCheck(){E_(this._cdRefInjectingView||this._lView)}detach(){this._lView[G]&=-129}reattach(){gv(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,IS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,KT(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e,gv(this._lView)}},Vl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jU;let t=e;return t})();function jU(t){return BU(Zn(),We(),(t&16)===16)}function BU(t,e,n){if(df(t)&&!n){let r=Pi(t.index,e);return new fa(r,r)}else if(t.type&47){let r=e[pr];return new fa(r,e)}return null}var CS=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=UU,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Pv=class extends CS{constructor(e){super(),this._lView=e}onDestroy(e){return lT(this._lView,e),()=>pj(this._lView,e)}};function UU(){return new Pv(We())}var _C=new Set;function _f(t){_C.has(t)||(_C.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Nv=class extends vt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=rv(s),i&&(i=rv(i)),o&&(o=rv(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof nt&&e.add(a),a}};function rv(t){return e=>{setTimeout(t,void 0,e)}}var ut=Nv;function wC(...t){}function $U(){let t=typeof Mt.requestAnimationFrame=="function",e=Mt[t?"requestAnimationFrame":"setTimeout"],n=Mt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ue=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=$U().nativeRequestAnimationFrame,qU(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,HU,wC,wC);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HU={};function x_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zU(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,kv(t),t.isCheckStableRunning=!0,x_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),kv(t))}function qU(t){let e=()=>{zU(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(GU(a))return n.invokeTask(i,s,o,a);try{return bC(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),IC(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return bC(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),IC(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,kv(t),x_(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function kv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function bC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function IC(t){t._nesting--,x_(t)}var Ov=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function GU(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function WU(t="zone.js",e){return t==="noop"?new Ov:t==="zone.js"?new ue(e):t}var ia=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ia||{}),KU={destroy(){}};function C_(t,e){!e&&yB(C_);let n=e?.injector??O(Xn);if(!wB(n))return KU;_f("NgAfterNextRender");let r=n.get(T_),i=r.handler??=new Vv,s=e?.phase??ia.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(CS).onDestroy(o),c=new Fv(n,s,()=>{o(),t()});return i.register(c),{destroy:o}}var Fv=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ue),this.errorHandler=e.get(yr,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Vv=class{constructor(){this.executingCallbacks=!1,this.buckets={[ia.EarlyRead]:new Set,[ia.Write]:new Set,[ia.MixedReadWrite]:new Set,[ia.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},T_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function QU(t,e){let n=Pi(e,t),r=n[oe];YU(r,n);let i=n[Kr];i!==null&&n[Uh]===null&&(n[Uh]=w_(i,n[ca])),S_(r,n,n[Rn])}function YU(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function S_(t,e,n){r_(e);try{let r=t.viewQuery;r!==null&&Mv(1,r,n);let i=t.template;i!==null&&uS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_S(t,e),t.staticViewQueries&&Mv(2,t.viewQuery,n);let s=t.components;s!==null&&ZU(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[G]&=-5,i_()}}function ZU(t,e){for(let n=0;n<e.length;n++)QU(t,e[n])}function Lv(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Zx(i,a);else if(s==2){let c=a,l=e[++o];r=Zx(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var tf=class extends gf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ti(e);return new pa(n,this.ngModule)}};function DC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function XU(t){let e=t.toLowerCase();return e==="svg"?oT:e==="math"?cj:null}var jv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=cf(r);let i=this.injector.get(e,tv,r);return i!==tv||n===tv?i:this.parentInjector.get(e,n,r)}},pa=class extends Jh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=DC(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return DC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=J2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof wn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new jv(e,s):e,a=o.get(Al,null);if(a===null)throw new U(407,!1);let c=o.get(eU,null),l=o.get(T_,null),u=o.get(Cv,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?dU(h,r,this.componentDef.encapsulation,o):WT(h,f,XU(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;p!==null&&(m=w_(p,o,!0));let y=I_(0,null,null,1,0,null,null,null,null,null,null),v=mf(null,y,null,g,null,null,d,h,o,null,m);r_(v);let _,b;try{let w=this.componentDef,E,A=null;w.findHostDirectiveDefs?(E=[],A=new Map,w.findHostDirectiveDefs(w,E,A),E.push(w)):E=[w];let S=JU(v,p),L=e$(S,p,w,E,v,d,h);b=Jv(y,gr),p&&r$(h,w,p,r),n!==void 0&&i$(b,this.ngContentSelectors,n),_=n$(L,w,E,A,v,[s$]),S_(y,v,null)}finally{i_()}return new Bv(this.componentType,_,b_(b,v),v,b)}},Bv=class extends Tv{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fa(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;D_(s[oe],s,i,e,n),this.previousInputValues.set(e,n);let o=Pi(this._tNode.index,s);E_(o)}}get injector(){return new Ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function JU(t,e){let n=t[oe],r=gr;return t[r]=e,yf(n,r,2,"#host",null)}function e$(t,e,n,r,i,s,o){let a=i[oe];t$(r,t,e,o);let c=null;e!==null&&(c=w_(e,i[ca]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=mf(i,pS(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Av(a,t,r.length-1),vf(i,d),i[t.index]=d}function t$(t,e,n,r){for(let i of t)e.mergedAttrs=Il(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Lv(e,e.mergedAttrs,!0),n!==null&&JT(r,n,e))}function n$(t,e,n,r,i,s){let o=Zn(),a=i[oe],c=Yn(o,i);mS(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=ua(i,a,d,o);Hs(h,i)}yS(a,i,o),c&&Hs(c,i);let l=ua(i,a,o.directiveStart+o.componentOffset,o);if(t[Rn]=i[Rn]=l,s!==null)for(let u of s)u(l,e);return dS(a,o,t),l}function r$(t,e,n,r){if(r)fv(t,n,["ng-version","17.1.3"]);else{let{attrs:i,classes:s}=ej(e.selectors[0]);i&&fv(t,n,i),s&&s.length>0&&XT(t,n,s.join(" "))}}function i$(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function s$(){let t=Zn();a_(We()[oe],t)}function o$(t){return Object.getPrototypeOf(t.prototype).constructor}function Oi(t){let e=o$(t.type),n=!0,r=[t];for(;e;){let i;if(Ai(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Rh(t.inputs),o.inputTransforms=Rh(t.inputTransforms),o.declaredInputs=Rh(t.declaredInputs),o.outputs=Rh(t.outputs);let a=i.hostBindings;a&&d$(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&l$(t,c),l&&u$(t,l),a$(t,i),E2(t.outputs,i.outputs),Ai(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Oi&&(n=!1)}}e=Object.getPrototypeOf(e)}c$(r)}function a$(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function c$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Il(i.hostAttrs,n=Il(n,i.hostAttrs))}}function Rh(t){return t===aa?{}:t===Mn?[]:t}function l$(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function u$(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function d$(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Yie=new RegExp(`^(\\d+)*(${KB}|${WB})*(.*)`);var h$=()=>null;function Uv(t,e){return h$(t,e)}function f$(t,e,n,r){let i=e.tView,o=t[G]&4096?4096:16,a=mf(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[lf]=c;let l=t[xl];return l!==null&&(a[xl]=l.createEmbeddedView(i)),S_(i,a,n),a}function p$(t,e){let n=vn+e;if(n<t.length)return t[n]}function $v(t,e){return!e||e.firstChild===null||qT(t)}function TS(t,e,n,r=!0){let i=e[oe];if(RB(i,e,t,n),r){let o=Ev(n,t),a=e[Bt],c=m_(a,t[Bs]);c!==null&&AB(i,t[Qn],a,e,c,o)}let s=e[Uh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function g$(t,e){let n=Zh(t,e);return n!==void 0&&g_(n[oe],n),n}var wf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=m$;let t=e;return t})();function m$(){let t=Zn();return v$(t,We())}var y$=wf,SS=class extends y${constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return b_(this._hostTNode,this._hostLView)}get injector(){return new Ls(this._hostTNode,this._hostLView)}get parentInjector(){let e=c_(this._hostTNode,this._hostLView);if(ET(e)){let n=Gh(e,this._hostLView),r=qh(e),i=n[oe].data[r+8];return new Ls(i,n)}else return new Ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=EC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Uv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,$v(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!Yj(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new pa(Ti(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(wn,null);g&&(s=g)}let u=Ti(c.componentType??{}),d=Uv(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,$v(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(dj(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[jt],l=new SS(c,c[Qn],c[jt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return TS(o,i,s,r),e.attachToViewContainerRef(),kT(iv(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=EC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Zh(this._lContainer,n);r&&(Kh(iv(this._lContainer),n),g_(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Zh(this._lContainer,n);return r&&Kh(iv(this._lContainer),n)!=null?new fa(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function EC(t){return t[$h]}function iv(t){return t[$h]||(t[$h]=[])}function v$(t,e){let n,r=e[t.index];return Qr(r)?n=r:(n=vS(r,e,null,t),e[t.index]=n,vf(e,n)),w$(n,e,t,r),new SS(n,t,e)}function _$(t,e){let n=t[Bt],r=n.createComment(""),i=Yn(e,t),s=m_(n,i);return Xh(n,s,r,LB(n,i),!1),r}var w$=D$,b$=()=>!1;function I$(t,e,n){return b$(t,e,n)}function D$(t,e,n,r){if(t[Bs])return;let i;n.type&8?i=mr(r):i=_$(e,n),t[Bs]=i}var Mi=class{},Ml=class{};var nf=class extends Mi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tf(this);let i=YC(e);this._bootstrapComponents=zT(i.bootstrap),this._r3Injector=$T(e,n,[{provide:Mi,useValue:this},{provide:gf,useValue:this.componentFactoryResolver},...r],on(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rf=class extends Ml{constructor(e){super(),this.moduleType=e}create(e){return new nf(this.moduleType,e,[])}};function E$(t,e,n){return new nf(t,e,n)}var Hv=class extends Mi{constructor(e){super(),this.componentFactoryResolver=new tf(this),this.instance=null;let n=new Sl([...e.providers,{provide:Mi,useValue:this},{provide:gf,useValue:this.componentFactoryResolver}],e.parent||d_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function bf(t,e,n=null){return new Hv({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var If=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new St(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function x$(t,e,n){return t[e]=n}function C$(t,e){return t[e]}function Df(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function T$(t,e,n,r,i,s,o,a,c){let l=e.consts,u=yf(e,t,4,o||null,zh(l,a));gS(e,n,u,zh(l,c)),a_(e,u);let d=u.tView=I_(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Ll(t,e,n,r,i,s,o,a){let c=We(),l=vr(),u=t+gr,d=l.firstCreatePass?T$(u,l,c,e,n,r,i,s,o):l.data[u];Nl(d,!1);let h=S$(l,c,d,t);s_()&&y_(l,c,h,d),Hs(h,c);let f=vS(h,c,h,d);return c[u]=f,vf(c,f),I$(f,d,c),Xv(d)&&hS(l,c,d),o!=null&&fS(c,d,a),Ll}var S$=A$;function A$(t,e,n,r){return o_(!0),e[Bt].createComment("")}function M$(t,e,n,r){return Df(t,n_(),n)?e+OC(n)+r:qs}function Ph(t,e){return t<<17|e<<2}function zs(t){return t>>17&32767}function R$(t){return(t&2)==2}function P$(t,e){return t&131071|e<<17}function zv(t){return t|2}function ga(t){return(t&131068)>>2}function sv(t,e){return t&-131069|e<<2}function N$(t){return(t&1)===1}function qv(t){return t|1}function k$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=zs(o),c=ga(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ol(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=zs(t[a+1]);t[r+1]=Ph(h,a),h!==0&&(t[h+1]=sv(t[h+1],r)),t[a+1]=P$(t[a+1],r)}else t[r+1]=Ph(a,0),a!==0&&(t[a+1]=sv(t[a+1],r)),a=r;else t[r+1]=Ph(c,0),a===0?a=r:t[c+1]=sv(t[c+1],r),c=r;l&&(t[r+1]=zv(t[r+1])),xC(t,u,r,!0),xC(t,u,r,!1),O$(e,u,t,r,s),o=Ph(a,c),s?e.classBindings=o:e.styleBindings=o}function O$(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ol(s,e)>=0&&(n[r+1]=qv(n[r+1]))}function xC(t,e,n,r){let i=t[n+1],s=e===null,o=r?zs(i):ga(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];F$(c,e)&&(a=!0,t[o+1]=r?qv(l):zv(l)),o=r?zs(l):ga(l)}a&&(t[n+1]=r?zv(i):qv(i))}function F$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ol(t,e)>=0:!1}function _r(t,e,n){let r=We(),i=n_();if(Df(r,i,e)){let s=vr(),o=Pj();yU(s,o,r,t,e,r[Bt],n,!1)}return _r}function CC(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";D_(t,n,s[o],o,r)}function Ef(t,e){return V$(t,e,null,!0),Ef}function V$(t,e,n,r){let i=We(),s=vr(),o=xj(2);if(s.firstUpdatePass&&j$(s,t,o,r),e!==qs&&Df(i,o,e)){let a=s.data[va()];z$(s,a,i,i[Bt],t,i[o+1]=q$(e,n),r,o)}}function L$(t,e){return e>=t.expandoStartIndex}function j$(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[va()],o=L$(t,n);G$(s,r)&&e===null&&!o&&(e=!1),e=B$(i,s,e,r),k$(i,s,e,n,o,r)}}function B$(t,e,n,r){let i=Aj(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ov(null,t,e,n,r),n=Rl(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=ov(i,t,e,n,r),s===null){let c=U$(t,e,r);c!==void 0&&Array.isArray(c)&&(c=ov(null,t,e,c[1],r),c=Rl(c,e.attrs,r),$$(t,e,r,c))}else s=H$(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function U$(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ga(r)!==0)return t[zs(r)]}function $$(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[zs(i)]=r}function H$(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Rl(r,o,n)}return Rl(r,e.attrs,n)}function ov(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Rl(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Rl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Xj(t,o,n?!0:e[++s]))}return t===void 0?null:t}function z$(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=N$(l)?TC(c,e,n,i,ga(l),o):void 0;if(!sf(u)){sf(s)||R$(l)&&(s=TC(c,null,n,i,a,o));let d=aT(va(),n);qB(r,o,d,i,s)}}function TC(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===qs&&(h=d?Mn:void 0);let f=d?Xy(h,r):u===r?h:void 0;if(l&&!sf(f)&&(f=Xy(c,r)),sf(f)&&(a=f,o))return a;let p=t[i+1];i=o?zs(p):ga(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Xy(c,r))}return a}function sf(t){return t!==void 0}function q$(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=on(__(t)))),t}function G$(t,e){return(t.flags&(e?8:16))!==0}function xf(t,e,n){_f("NgControlFlow");let r=We(),i=n_(),s=W$(r,gr+t),o=0;if(Df(r,i,e)){let a=Wt(null);try{if(g$(s,o),e!==-1){let c=K$(r[oe],gr+e),l=Uv(s,c.tView.ssrId),u=f$(r,c,n,{dehydratedView:l});TS(s,u,o,$v(c,l))}}finally{Wt(a)}}else{let a=p$(s,o);a!==void 0&&(a[Rn]=n)}}function W$(t,e){return t[e]}function K$(t,e){return Jv(t,e)}function Q$(t,e,n,r,i,s){let o=e.consts,a=zh(o,i),c=yf(e,t,2,r,a);return gS(e,n,c,zh(o,s)),c.attrs!==null&&Lv(c,c.attrs,!1),c.mergedAttrs!==null&&Lv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function he(t,e,n,r){let i=We(),s=vr(),o=gr+t,a=i[Bt],c=s.firstCreatePass?Q$(o,s,i,e,n,r):s.data[o],l=Y$(s,i,c,a,e,t);i[o]=l;let u=Xv(c);return Nl(c,!0),JT(a,l,c),(c.flags&32)!==32&&s_()&&y_(s,i,l,c),gj()===0&&Hs(l,i),mj(),u&&(hS(s,i,c),dS(s,c,i)),r!==null&&fS(i,c),he}function ve(){let t=Zn();pT()?Ij():(t=t.parent,Nl(t,!1));let e=t;_j(e)&&wj(),yj();let n=vr();return n.firstCreatePass&&(a_(n,t),tT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Vj(e)&&CC(n,e,We(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Lj(e)&&CC(n,e,We(),e.stylesWithoutHost,!1),ve}function He(t,e,n,r){return he(t,e,n,r),ve(),He}var Y$=(t,e,n,r,i,s)=>(o_(!0),WT(r,i,Nj()));function AS(){return We()}var Fs=void 0;function Z$(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var X$=["en",[["a","p"],["AM","PM"],Fs],[["AM","PM"],Fs,Fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fs,"{1} 'at' {0}",Fs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Z$],av={};function Pn(t){let e=J$(t),n=SC(e);if(n)return n;let r=e.split("-")[0];if(n=SC(r),n)return n;if(r==="en")return X$;throw new U(701,!1)}function SC(t){return t in av||(av[t]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[t]),av[t]}var rt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(rt||{});function J$(t){return t.toLowerCase().replace(/_/g,"-")}var of="en-US";var eH=of;function tH(t){typeof t=="string"&&(eH=t.toLowerCase().replace(/_/g,"-"))}function Gs(t){return!!t&&typeof t.then=="function"}function MS(t){return!!t&&typeof t.subscribe=="function"}function Ut(t,e,n,r){let i=We(),s=vr(),o=Zn();return rH(s,i,i[Bt],o,t,e,r),Ut}function nH(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Dl],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function rH(t,e,n,r,i,s,o){let a=Xv(r),l=t.firstCreatePass&&PU(t),u=e[Rn],d=RU(e),h=!0;if(r.type&3||o){let g=Yn(r,e),m=o?o(g):g,y=d.length,v=o?b=>o(mr(b[r.index])):r.index,_=null;if(!o&&a&&(_=nH(t,e,i,r.index)),_!==null){let b=_.__ngLastListenerFn__||_;b.__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,h=!1}else{s=MC(r,e,u,s,!1);let b=n.listen(m,i,s);d.push(s,b),l&&l.push(i,v,y,y+1)}}else s=MC(r,e,u,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let y=p[m],v=p[m+1],w=e[y][v].subscribe(s),E=d.length;d.push(s,w),l&&l.push(i,r.index,E,-(E+1))}}}function AC(t,e,n,r){try{return dr(6,e,n),n(r)!==!1}catch(i){return wS(t,i),!1}finally{dr(7,e,n)}}function MC(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Pi(t.index,e):e;E_(a);let c=AC(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=AC(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function jl(t=1){return Rj(t)}function Ye(t,e=""){let n=We(),r=vr(),i=t+gr,s=r.firstCreatePass?yf(r,i,1,e,null):r.data[i],o=iH(r,n,s,e,t);n[i]=o,s_()&&y_(r,n,o,s),Nl(s,!1)}var iH=(t,e,n,r,i)=>(o_(!0),CB(e[Bt],r));function Cf(t){return wa("",t,""),Cf}function wa(t,e,n){let r=We(),i=M$(r,t,e,n);return i!==qs&&NU(r,va(),i),wa}function sH(t,e,n){let r=vr();if(r.firstCreatePass){let i=Ai(t);Gv(n,r.data,r.blueprint,i,!0),Gv(e,r.data,r.blueprint,i,!1)}}function Gv(t,e,n,r,i){if(t=Qt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Gv(t[s],e,n,r,i);else{let s=vr(),o=We(),a=Zn(),c=ha(t)?t:Qt(t.provide),l=UT(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ha(t)||!t.multi){let f=new $s(l,i,q),p=lv(c,e,i?u:u+h,d);p===-1?(vv(Wh(a,o),s,c),cv(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=lv(c,e,u+h,d),p=lv(c,e,u,u+h),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){vv(Wh(a,o),s,c);let y=cH(i?aH:oH,n.length,i,r,l);!i&&m&&(n[p].providerFactory=y),cv(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)}else{let y=RS(n[i?p:f],l,!i&&r);cv(s,t,f>-1?f:p,y)}!i&&r&&m&&n[p].componentProviders++}}}function cv(t,e,n,r){let i=ha(e),s=uB(e);if(i||s){let c=(s?Qt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function RS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function lv(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oH(t,e,n,r){return Wv(this.multi,[])}function aH(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ua(n,n[oe],this.providerFactory.index,r);s=a.slice(0,o),Wv(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Wv(i,s);return s}function Wv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function cH(t,e,n,r,i){let s=new $s(t,n,q);return s.multi=[],s.index=e,s.componentProviders=0,RS(s,i,r&&!n),s}function Tf(t,e=[]){return n=>{n.providersResolver=(r,i)=>sH(r,i?i(t):t,e)}}var lH=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=LT(!1,r.type),s=i.length>0?bf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(M(wn))});let t=e;return t})();function PS(t){_f("NgStandalone"),t.getStandaloneInjector=e=>e.get(lH).getOrCreateStandaloneInjector(t)}function NS(t,e,n){let r=Dj()+t,i=We();return i[r]===qs?x$(i,r,n?e.call(n):e()):C$(i,r)}var Nh=null;function uH(t){Nh!==null&&(t.defaultEncapsulation!==Nh.defaultEncapsulation||t.preserveWhitespaces!==Nh.preserveWhitespaces)||(Nh=t)}var Wr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},kS=new Wr("17.1.3"),Sf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Kv=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Af=(()=>{let e=class e{compileModuleSync(r){return new rf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=YC(r),o=zT(s.declarations).reduce((a,c)=>{let l=Ti(c);return l&&a.push(new pa(l)),a},[]);return new Kv(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dH=new V("");var A_=new V(""),Bl=new V(""),Mf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,M_||(hH(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(M(ue),M(Rf),M(Bl))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Rf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return M_?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function hH(t){M_=t}var M_,Pf=new V(""),OS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=O(Pf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Gs(o))r.push(o);else if(MS(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),R_=new V("");function fH(t,e,n){let r=new rf(n);return Promise.resolve(r)}function pH(){Ax(()=>{throw new U(600,!1)})}function gH(t){return t.isBoundToModule}function mH(t,e,n){try{let r=n();return Gs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function FS(t,e){return Array.isArray(e)?e.reduce(FS,t):N(N({},t),e)}var ba=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(iS),this.afterRenderEffectManager=O(T_),this.componentTypes=[],this.components=[],this.isStable=O(If).hasPendingTasks.pipe(z(r=>!r)),this._injector=O(wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Jh;if(!this._injector.get(OS).done){let f=!s&&QC(r),p=!1;throw new U(405,p)}let a;s?a=r:a=this._injector.get(gf).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=gH(a)?void 0:this._injector.get(Mi),l=i||a.selector,u=a.create(Xn.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(A_,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Lh(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===bS)throw new U(103,!1);let i=r===0;for(let{_lView:s,notifyErrorHandler:o}of this._views)!i&&!PC(s)||this.detectChangesInView(s,o,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>PC(i)))}detectChangesInView(r,i,s){let o;s?(o=0,r[G]|=1024):r[G]&64?o=0:o=1,IS(r,i,o)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Lh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(R_,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Lh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new U(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Lh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function RC(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}function PC(t){return t_(t)}var yH=(()=>{let e=class e{constructor(){this.zone=O(ue),this.applicationRef=O(ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vH(t){return[{provide:ue,useFactory:t},{provide:da,multi:!0,useFactory:()=>{let e=O(yH,{optional:!0});return()=>e.initialize()}},{provide:da,multi:!0,useFactory:()=>{let e=O(bH);return()=>{e.initialize()}}},{provide:iS,useFactory:_H}]}function _H(){let t=O(ue),e=O(yr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function wH(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var bH=(()=>{let e=class e{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=O(ue),this.pendingTasks=O(If)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IH(){return typeof $localize<"u"&&$localize.locale||of}var Nf=new V("",{providedIn:"root",factory:()=>O(Nf,re.Optional|re.SkipSelf)||IH()});var VS=new V(""),LS=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=WU(i?.ngZone,wH({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=E$(r.moduleType,this.injector,vH(()=>s)),a=o.injector.get(yr,null);return s.runOutsideAngular(()=>{let c=s.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{Lh(this._modules,o),c.unsubscribe()})}),mH(a,s,()=>{let c=o.injector.get(OS);return c.runInitializers(),c.donePromise.then(()=>{let l=o.injector.get(Nf,of);return tH(l||of),this._moduleDoBootstrap(o),o})})})}bootstrapModule(r,i=[]){let s=FS({},i);return fH(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(ba);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new U(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(VS,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(M(Xn))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),wl=null,jS=new V("");function DH(t){if(wl&&!wl.get(jS,!1))throw new U(400,!1);pH(),wl=t;let e=t.get(LS);return CH(t),e}function P_(t,e,n=[]){let r=`Platform: ${e}`,i=new V(r);return(s=[])=>{let o=BS();if(!o||o.injector.get(jS,!1)){let a=[...n,...s,{provide:i,useValue:!0}];t?t(a):DH(EH(a,r))}return xH(i)}}function EH(t=[],e){return Xn.create({name:e,providers:[{provide:hf,useValue:"platform"},{provide:VS,useValue:new Set([()=>wl=null])},...t]})}function xH(t){let e=BS();if(!e)throw new U(401,!1);return e}function BS(){return wl?.get(LS)??null}function CH(t){t.get(h_,null)?.forEach(n=>n())}function N_(){return!1}var US=P_(null,"core",[]),$S=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(M(ba))},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})();function HS(t){let e=Ti(t);if(!e)return null;let n=new pa(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var KS=null;function wr(){return KS}function QS(t){KS??=t}var $f=class{},cn=new V(""),j_=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>O(AH),providedIn:"platform"});let t=e;return t})(),YS=new V(""),AH=(()=>{let e=class e extends j_{constructor(){super(),this._doc=O(cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wr().getBaseHref(this._doc)}onPopState(r){let i=wr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=wr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function B_(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function zS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Zr(t){return t&&t[0]!=="?"?"?"+t:t}var Ws=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>O(U_),providedIn:"root"});let t=e;return t})(),ZS=new V(""),U_=(()=>{let e=class e extends Ws{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??O(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return B_(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Zr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Zr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Zr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(M(j_),M(ZS,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XS=(()=>{let e=class e extends Ws{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=B_(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Zr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Zr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(M(j_),M(ZS,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Ia=(()=>{let e=class e{constructor(r){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=PH(zS(qS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Zr(i))}normalize(r){return e.stripTrailingSlash(RH(this._basePath,qS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Zr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Zr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Zr,e.joinWithSlash=B_,e.stripTrailingSlash=zS,e.\u0275fac=function(i){return new(i||e)(M(Ws))},e.\u0275prov=j({token:e,factory:()=>MH(),providedIn:"root"});let t=e;return t})();function MH(){return new Ia(M(Ws))}function RH(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function qS(t){return t.replace(/\/index.html$/,"")}function PH(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Zt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Zt||{}),Te=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Te||{}),In=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(In||{}),Xr=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(Xr||{});function NH(t){return Pn(t)[rt.LocaleId]}function kH(t,e,n){let r=Pn(t),i=[r[rt.DayPeriodsFormat],r[rt.DayPeriodsStandalone]],s=Nn(i,e);return Nn(s,n)}function OH(t,e,n){let r=Pn(t),i=[r[rt.DaysFormat],r[rt.DaysStandalone]],s=Nn(i,e);return Nn(s,n)}function FH(t,e,n){let r=Pn(t),i=[r[rt.MonthsFormat],r[rt.MonthsStandalone]],s=Nn(i,e);return Nn(s,n)}function VH(t,e){let r=Pn(t)[rt.Eras];return Nn(r,e)}function kf(t,e){let n=Pn(t);return Nn(n[rt.DateFormat],e)}function Of(t,e){let n=Pn(t);return Nn(n[rt.TimeFormat],e)}function Ff(t,e){let r=Pn(t)[rt.DateTimeFormat];return Nn(r,e)}function qf(t,e){let n=Pn(t),r=n[rt.NumberSymbols][e];if(typeof r>"u"){if(e===Xr.CurrencyDecimal)return n[rt.NumberSymbols][Xr.Decimal];if(e===Xr.CurrencyGroup)return n[rt.NumberSymbols][Xr.Group]}return r}function JS(t){if(!t[rt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[rt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function LH(t){let e=Pn(t);return JS(e),(e[rt.ExtraData][2]||[]).map(r=>typeof r=="string"?k_(r):[k_(r[0]),k_(r[1])])}function jH(t,e,n){let r=Pn(t);JS(r);let i=[r[rt.ExtraData][0],r[rt.ExtraData][1]],s=Nn(i,e)||[];return Nn(s,n)||[]}function Nn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function k_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var BH=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vf={},UH=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Jr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Jr||{}),we=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(we||{}),_e=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(_e||{});function $H(t,e,n,r){let i=ZH(t);e=Yr(n,e)||e;let o=[],a;for(;e;)if(a=UH.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=tA(r,c),i=YH(i,r,!0));let l="";return o.forEach(u=>{let d=KH(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Hf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Yr(t,e){let n=NH(t);if(Vf[n]??={},Vf[n][e])return Vf[n][e];let r="";switch(e){case"shortDate":r=kf(t,In.Short);break;case"mediumDate":r=kf(t,In.Medium);break;case"longDate":r=kf(t,In.Long);break;case"fullDate":r=kf(t,In.Full);break;case"shortTime":r=Of(t,In.Short);break;case"mediumTime":r=Of(t,In.Medium);break;case"longTime":r=Of(t,In.Long);break;case"fullTime":r=Of(t,In.Full);break;case"short":let i=Yr(t,"shortTime"),s=Yr(t,"shortDate");r=Lf(Ff(t,In.Short),[i,s]);break;case"medium":let o=Yr(t,"mediumTime"),a=Yr(t,"mediumDate");r=Lf(Ff(t,In.Medium),[o,a]);break;case"long":let c=Yr(t,"longTime"),l=Yr(t,"longDate");r=Lf(Ff(t,In.Long),[c,l]);break;case"full":let u=Yr(t,"fullTime"),d=Yr(t,"fullDate");r=Lf(Ff(t,In.Full),[u,d]);break}return r&&(Vf[n][e]=r),r}function Lf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Jn(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function HH(t,e){return Jn(t,3).substring(0,e)}function dt(t,e,n=0,r=!1,i=!1){return function(s,o){let a=zH(t,s);if((n>0||a>-n)&&(a+=n),t===we.Hours)a===0&&n===-12&&(a=12);else if(t===we.FractionalSeconds)return HH(a,e);let c=qf(o,Xr.MinusSign);return Jn(a,e,c,r,i)}}function zH(t,e){switch(t){case we.FullYear:return e.getFullYear();case we.Month:return e.getMonth();case we.Date:return e.getDate();case we.Hours:return e.getHours();case we.Minutes:return e.getMinutes();case we.Seconds:return e.getSeconds();case we.FractionalSeconds:return e.getMilliseconds();case we.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Me(t,e,n=Zt.Format,r=!1){return function(i,s){return qH(i,s,t,e,n,r)}}function qH(t,e,n,r,i,s){switch(n){case _e.Months:return FH(e,i,r)[t.getMonth()];case _e.Days:return OH(e,i,r)[t.getDay()];case _e.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=LH(e),u=jH(e,i,r),d=l.findIndex(h=>{if(Array.isArray(h)){let[f,p]=h,g=o>=f.hours&&a>=f.minutes,m=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&m)return!0}else if(g||m)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return kH(e,i,r)[o<12?0:1];case _e.Eras:return VH(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function jf(t){return function(e,n,r){let i=-1*r,s=qf(n,Xr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Jr.Short:return(i>=0?"+":"")+Jn(o,2,s)+Jn(Math.abs(i%60),2,s);case Jr.ShortGMT:return"GMT"+(i>=0?"+":"")+Jn(o,1,s);case Jr.Long:return"GMT"+(i>=0?"+":"")+Jn(o,2,s)+":"+Jn(Math.abs(i%60),2,s);case Jr.Extended:return r===0?"Z":(i>=0?"+":"")+Jn(o,2,s)+":"+Jn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var GH=0,Uf=4;function WH(t){let e=Hf(t,GH,1).getDay();return Hf(t,0,1+(e<=Uf?Uf:Uf+7)-e)}function eA(t){let e=t.getDay(),n=e===0?-3:Uf-e;return Hf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function O_(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=eA(n),o=WH(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Jn(i,t,qf(r,Xr.MinusSign))}}function Bf(t,e=!1){return function(n,r){let s=eA(n).getFullYear();return Jn(s,t,qf(r,Xr.MinusSign),e)}}var F_={};function KH(t){if(F_[t])return F_[t];let e;switch(t){case"G":case"GG":case"GGG":e=Me(_e.Eras,Te.Abbreviated);break;case"GGGG":e=Me(_e.Eras,Te.Wide);break;case"GGGGG":e=Me(_e.Eras,Te.Narrow);break;case"y":e=dt(we.FullYear,1,0,!1,!0);break;case"yy":e=dt(we.FullYear,2,0,!0,!0);break;case"yyy":e=dt(we.FullYear,3,0,!1,!0);break;case"yyyy":e=dt(we.FullYear,4,0,!1,!0);break;case"Y":e=Bf(1);break;case"YY":e=Bf(2,!0);break;case"YYY":e=Bf(3);break;case"YYYY":e=Bf(4);break;case"M":case"L":e=dt(we.Month,1,1);break;case"MM":case"LL":e=dt(we.Month,2,1);break;case"MMM":e=Me(_e.Months,Te.Abbreviated);break;case"MMMM":e=Me(_e.Months,Te.Wide);break;case"MMMMM":e=Me(_e.Months,Te.Narrow);break;case"LLL":e=Me(_e.Months,Te.Abbreviated,Zt.Standalone);break;case"LLLL":e=Me(_e.Months,Te.Wide,Zt.Standalone);break;case"LLLLL":e=Me(_e.Months,Te.Narrow,Zt.Standalone);break;case"w":e=O_(1);break;case"ww":e=O_(2);break;case"W":e=O_(1,!0);break;case"d":e=dt(we.Date,1);break;case"dd":e=dt(we.Date,2);break;case"c":case"cc":e=dt(we.Day,1);break;case"ccc":e=Me(_e.Days,Te.Abbreviated,Zt.Standalone);break;case"cccc":e=Me(_e.Days,Te.Wide,Zt.Standalone);break;case"ccccc":e=Me(_e.Days,Te.Narrow,Zt.Standalone);break;case"cccccc":e=Me(_e.Days,Te.Short,Zt.Standalone);break;case"E":case"EE":case"EEE":e=Me(_e.Days,Te.Abbreviated);break;case"EEEE":e=Me(_e.Days,Te.Wide);break;case"EEEEE":e=Me(_e.Days,Te.Narrow);break;case"EEEEEE":e=Me(_e.Days,Te.Short);break;case"a":case"aa":case"aaa":e=Me(_e.DayPeriods,Te.Abbreviated);break;case"aaaa":e=Me(_e.DayPeriods,Te.Wide);break;case"aaaaa":e=Me(_e.DayPeriods,Te.Narrow);break;case"b":case"bb":case"bbb":e=Me(_e.DayPeriods,Te.Abbreviated,Zt.Standalone,!0);break;case"bbbb":e=Me(_e.DayPeriods,Te.Wide,Zt.Standalone,!0);break;case"bbbbb":e=Me(_e.DayPeriods,Te.Narrow,Zt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Me(_e.DayPeriods,Te.Abbreviated,Zt.Format,!0);break;case"BBBB":e=Me(_e.DayPeriods,Te.Wide,Zt.Format,!0);break;case"BBBBB":e=Me(_e.DayPeriods,Te.Narrow,Zt.Format,!0);break;case"h":e=dt(we.Hours,1,-12);break;case"hh":e=dt(we.Hours,2,-12);break;case"H":e=dt(we.Hours,1);break;case"HH":e=dt(we.Hours,2);break;case"m":e=dt(we.Minutes,1);break;case"mm":e=dt(we.Minutes,2);break;case"s":e=dt(we.Seconds,1);break;case"ss":e=dt(we.Seconds,2);break;case"S":e=dt(we.FractionalSeconds,1);break;case"SS":e=dt(we.FractionalSeconds,2);break;case"SSS":e=dt(we.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=jf(Jr.Short);break;case"ZZZZZ":e=jf(Jr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jf(Jr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=jf(Jr.Long);break;default:return null}return F_[t]=e,e}function tA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function QH(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function YH(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=tA(e,i);return QH(t,r*(s-i))}function ZH(t){if(GS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Hf(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(BH))return XH(r)}let e=new Date(t);if(!GS(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function XH(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function GS(t){return t instanceof Date&&!isNaN(t.valueOf())}function nA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function JH(t,e){return new U(2100,!1)}var ez="mediumDate",tz=new V(""),nz=new V(""),Da=(()=>{let e=class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??ez,c=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return $H(r,a,o||this.locale,c)}catch(a){throw JH(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(q(Nf,16),q(tz,24),q(nz,24))},e.\u0275pipe=GC({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var Gf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})(),$_="browser",rz="server";function iz(t){return t===$_}function Ks(t){return t===rz}var rA=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>iz(O(an))?new V_(O(cn),window):new L_});let t=e;return t})(),V_=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=sz(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function sz(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var L_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zf=class{};var q_=class extends $f{constructor(){super(...arguments),this.supportsDOMEvents=!0}},G_=class t extends q_{static makeCurrent(){QS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=az();return n==null?null:cz(n)}resetBaseElement(){Ul=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nA(document.cookie,e)}},Ul=null;function az(){return Ul=Ul||document.querySelector("base"),Ul?Ul.getAttribute("href"):null}function cz(t){return new URL(t,document.baseURI).pathname}var W_=class{addToWindow(e){Mt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new U(5103,!1);return s},Mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Mt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?wr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},lz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),K_=new V(""),cA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new U(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(M(K_),M(ue))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Wf=class{constructor(e){this._doc=e}},H_="ng-app-id",lA=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ks(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${H_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(H_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(H_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(M(cn),M(ff),M(f_,8),M(an))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),z_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Y_=/%COMP%/g,uA="%COMP%",uz=`_nghost-${uA}`,dz=`_ngcontent-${uA}`,hz=!0,fz=new V("",{providedIn:"root",factory:()=>hz});function pz(t){return dz.replace(Y_,t)}function gz(t){return uz.replace(Y_,t)}function dA(t,e){return e.map(n=>n.replace(Y_,t))}var sA=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ks(c),this.defaultRenderer=new $l(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===fr.ShadowDom&&(i=de(N({},i),{encapsulation:fr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Kf?s.applyToHost(r):s instanceof Hl&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case fr.Emulated:o=new Kf(l,u,i,this.appId,d,a,c,h);break;case fr.ShadowDom:return new Q_(l,u,r,i,a,c,this.nonce,h);default:o=new Hl(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(M(cA),M(lA),M(ff),M(fz),M(cn),M(an),M(ue),M(f_))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),$l=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(z_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(oA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(oA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=z_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=z_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Gr.DashCase|Gr.Important)?e.style.setProperty(n,r,i&Gr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=wr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function oA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Q_=class extends $l{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=dA(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hl=class extends $l{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?dA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kf=class extends Hl{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=pz(l),this.hostAttr=gz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},mz=(()=>{let e=class e extends Wf{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(M(cn))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),aA=["alt","control","meta","shift"],yz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},_z=(()=>{let e=class e extends Wf{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),aA.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=yz[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),aA.forEach(a=>{if(a!==s){let c=vz[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(M(cn))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function wz(){G_.makeCurrent()}function bz(){return new yr}function Iz(){return HT(document),document}var Dz=[{provide:an,useValue:$_},{provide:h_,useValue:wz,multi:!0},{provide:cn,useFactory:Iz,deps:[]}],hA=P_(US,"browser",Dz),Ez=new V(""),xz=[{provide:Bl,useClass:W_,deps:[]},{provide:A_,useClass:Mf,deps:[ue,Rf,Bl]},{provide:Mf,useClass:Mf,deps:[ue,Rf,Bl]}],Cz=[{provide:hf,useValue:"root"},{provide:yr,useFactory:bz,deps:[]},{provide:K_,useClass:mz,multi:!0,deps:[cn,ue,an]},{provide:K_,useClass:_z,multi:!0,deps:[cn]},sA,lA,cA,{provide:Al,useExisting:sA},{provide:zf,useClass:lz,deps:[]},[]],fA=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ff,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(M(Ez,12))},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({providers:[...Cz,...xz],imports:[Gf,$S]});let t=e;return t})();var pA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(M(cn))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var EA=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(q(_a),q(ki))},e.\u0275dir=bn({type:e});let t=e;return t})(),Sz=(()=>{let e=class e extends EA{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kl(e)))(s||e)}})(),e.\u0275dir=bn({type:e,features:[Oi]});let t=e;return t})(),xA=new V("");var Az={provide:xA,useExisting:ma(()=>Vi),multi:!0};function Mz(){let t=wr()?wr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Rz=new V(""),Vi=(()=>{let e=class e extends EA{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Mz())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(q(_a),q(ki),q(Rz,8))},e.\u0275dir=bn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ut("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Tf([Az]),Oi]});let t=e;return t})();function Fi(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function CA(t){return t!=null&&typeof t.length=="number"}var TA=new V(""),SA=new V(""),Pz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Xt=class{static min(e){return Nz(e)}static max(e){return kz(e)}static required(e){return Oz(e)}static requiredTrue(e){return Fz(e)}static email(e){return Vz(e)}static minLength(e){return Lz(e)}static maxLength(e){return jz(e)}static pattern(e){return Bz(e)}static nullValidator(e){return AA(e)}static compose(e){return OA(e)}static composeAsync(e){return VA(e)}};function Nz(t){return e=>{if(Fi(e.value)||Fi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function kz(t){return e=>{if(Fi(e.value)||Fi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Oz(t){return Fi(t.value)?{required:!0}:null}function Fz(t){return t.value===!0?null:{required:!0}}function Vz(t){return Fi(t.value)||Pz.test(t.value)?null:{email:!0}}function Lz(t){return e=>Fi(e.value)||!CA(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function jz(t){return e=>CA(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Bz(t){if(!t)return AA;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Fi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function AA(t){return null}function MA(t){return t!=null}function RA(t){return Gs(t)?ye(t):t}function PA(t){let e={};return t.forEach(n=>{e=n!=null?N(N({},e),n):e}),Object.keys(e).length===0?null:e}function NA(t,e){return e.map(n=>n(t))}function Uz(t){return!t.validate}function kA(t){return t.map(e=>Uz(e)?e:n=>e.validate(n))}function OA(t){if(!t)return null;let e=t.filter(MA);return e.length==0?null:function(n){return PA(NA(n,e))}}function FA(t){return t!=null?OA(kA(t)):null}function VA(t){if(!t)return null;let e=t.filter(MA);return e.length==0?null:function(n){let r=NA(n,e).map(RA);return $y(r).pipe(z(PA))}}function LA(t){return t!=null?VA(kA(t)):null}function mA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function jA(t){return t._rawValidators}function BA(t){return t._rawAsyncValidators}function Z_(t){return t?Array.isArray(t)?t:[t]:[]}function Zf(t,e){return Array.isArray(t)?t.includes(e):t===e}function yA(t,e){let n=Z_(e);return Z_(t).forEach(i=>{Zf(n,i)||n.push(i)}),n}function vA(t,e){return Z_(e).filter(n=>!Zf(t,n))}var Xf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},xa=class extends Xf{get formDirective(){return null}get path(){return null}},Gl=class extends Xf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Jf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},$z={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ooe=de(N({},$z),{"[class.ng-submitted]":"isSubmitted"}),Ta=(()=>{let e=class e extends Jf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(Gl,2))},e.\u0275dir=bn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Ef("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Oi]});let t=e;return t})(),Sa=(()=>{let e=class e extends Jf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(xa,10))},e.\u0275dir=bn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Ef("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Oi]});let t=e;return t})();var zl="VALID",Qf="INVALID",Ea="PENDING",ql="DISABLED";function ew(t){return(rp(t)?t.validators:t)||null}function Hz(t){return Array.isArray(t)?FA(t):t||null}function tw(t,e){return(rp(e)?e.asyncValidators:t)||null}function zz(t){return Array.isArray(t)?LA(t):t||null}function rp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function UA(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new U(1e3,"");if(!r[n])throw new U(1001,"")}function $A(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new U(1002,"")})}var Ca=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zl}get invalid(){return this.status===Qf}get pending(){return this.status==Ea}get disabled(){return this.status===ql}get enabled(){return this.status!==ql}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vA(e,this._rawAsyncValidators))}hasValidator(e){return Zf(this._rawValidators,e)}hasAsyncValidator(e){return Zf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ea,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ql,this.errors=null,this._forEachChild(r=>{r.disable(de(N({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=zl,this._forEachChild(r=>{r.enable(de(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zl||this.status===Ea)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ql:zl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ea,this._hasOwnPendingAsyncValidator=!0;let n=RA(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?ql:this.errors?Qf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ea)?Ea:this._anyControlsHaveStatus(Qf)?Qf:zl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Hz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zz(this._rawAsyncValidators)}},ep=class extends Ca{constructor(e,n,r){super(ew(n),tw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){$A(this,!0,e),Object.keys(e).forEach(r=>{UA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var X_=class extends ep{};var nw=new V("CallSetDisabledState",{providedIn:"root",factory:()=>ip}),ip="always";function qz(t,e){return[...e.path,t]}function _A(t,e,n=ip){rw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Wz(t,e),Qz(t,e),Kz(t,e),Gz(t,e)}function wA(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),np(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function tp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Gz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function rw(t,e){let n=jA(t);e.validator!==null?t.setValidators(mA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=BA(t);e.asyncValidator!==null?t.setAsyncValidators(mA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();tp(e._rawValidators,i),tp(e._rawAsyncValidators,i)}function np(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=jA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=BA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return tp(e._rawValidators,r),tp(e._rawAsyncValidators,r),n}function Wz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&HA(t,e)})}function Kz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&HA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function HA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Qz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Yz(t,e){t==null,rw(t,e)}function Zz(t,e){return np(t,e)}function Xz(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Jz(t){return Object.getPrototypeOf(t.constructor)===Sz}function e4(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function t4(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Vi?n=s:Jz(s)?r=s:i=s}),i||r||n||null}function n4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function bA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function IA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Yf=class extends Ca{constructor(e=null,n,r){super(ew(n),tw(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(IA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var r4=t=>t instanceof Yf;var Aa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=bn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var zA=new V("");var i4={provide:xa,useExisting:ma(()=>Qs)},Qs=(()=>{let e=class e extends xa{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ut,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(np(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return _A(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){wA(r.control||null,r,!1),n4(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,e4(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(wA(i||null,r),r4(s)&&(_A(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);Yz(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&Zz(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rw(this.form,this),this._oldForm&&np(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(q(TA,10),q(SA,10),q(nw,8))},e.\u0275dir=bn({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Ut("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[_n.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Tf([i4]),Oi,Ri]});let t=e;return t})();var s4={provide:Gl,useExisting:ma(()=>Ys)},Ys=(()=>{let e=class e extends Gl{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ut,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=t4(this,o)}ngOnChanges(r){this._added||this._setUpControl(),Xz(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return qz(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(q(xa,13),q(TA,10),q(SA,10),q(xA,10),q(zA,8))},e.\u0275dir=bn({type:e,selectors:[["","formControlName",""]],inputs:{name:[_n.None,"formControlName","name"],isDisabled:[_n.None,"disabled","isDisabled"],model:[_n.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Tf([s4]),Oi,Ri]});let t=e;return t})();var qA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})(),J_=class extends Ca{constructor(e,n,r){super(ew(n),tw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){$A(this,!1,e),e.forEach((r,i)=>{UA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function DA(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ma=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return DA(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new ep(s,o)}record(r,i=null){let s=this._reduceControls(r);return new X_(s,i)}control(r,i,s){let o={};return this.useNonNullable?(DA(i)?o=i:(o.validators=i,o.asyncValidators=s),new Yf(r,de(N({},o),{nonNullable:!0}))):new Yf(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new J_(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Yf)return r;if(r instanceof Ca)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:nw,useValue:r.callSetDisabledState??ip}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({imports:[qA]});let t=e;return t})(),WA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:zA,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:nw,useValue:r.callSetDisabledState??ip}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({imports:[qA]});let t=e;return t})();var ee="primary",au=Symbol("RouteTitle"),lw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Oa(t){return new lw(t)}function o4(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function a4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!br(t[n],e[n]))return!1;return!0}function br(t,e){let n=t?uw(t):void 0,r=e?uw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!nM(t[i],e[i]))return!1;return!0}function uw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function nM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function rM(t){return t.length>0?t[t.length-1]:null}function Ui(t){return Uy(t)?t:Gs(t)?ye(Promise.resolve(t)):H(t)}var c4={exact:sM,subset:oM},iM={exact:l4,subset:u4,ignored:()=>!0};function KA(t,e,n){return c4[n.paths](t.root,e.root,n.matrixParams)&&iM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function l4(t,e){return br(t,e)}function sM(t,e,n){if(!Xs(t.segments,e.segments)||!ap(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!sM(t.children[r],e.children[r],n))return!1;return!0}function u4(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nM(t[n],e[n]))}function oM(t,e,n){return aM(t,e,e.segments,n)}function aM(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Xs(i,n)||e.hasChildren()||!ap(i,n,r))}else if(t.segments.length===n.length){if(!Xs(t.segments,n)||!ap(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!oM(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Xs(t.segments,i)||!ap(t.segments,i,r)||!t.children[ee]?!1:aM(t.children[ee],e,s,r)}}function ap(t,e,n){return e.every((r,i)=>iM[n](t[i].parameters,r.parameters))}var Li=class{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oa(this.queryParams),this._queryParamMap}toString(){return f4.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cp(this)}},Zs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Oa(this.parameters),this._parameterMap}toString(){return lM(this)}};function d4(t,e){return Xs(t,e)&&t.every((n,r)=>br(n.parameters,e[r].parameters))}function Xs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function h4(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var cu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>new Jl,providedIn:"root"});let t=e;return t})(),Jl=class{parse(e){let n=new hw(e);return new Li(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Wl(e.root,!0)}`,r=m4(e.queryParams),i=typeof e.fragment=="string"?`#${p4(e.fragment)}`:"";return`${n}${r}${i}`}},f4=new Jl;function cp(t){return t.segments.map(e=>lM(e)).join("/")}function Wl(t,e){if(!t.hasChildren())return cp(t);if(e){let n=t.children[ee]?Wl(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ee&&r.push(`${i}:${Wl(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=h4(t,(r,i)=>i===ee?[Wl(t.children[ee],!1)]:[`${i}:${Wl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${cp(t)}/${n[0]}`:`${cp(t)}/(${n.join("//")})`}}function cM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sp(t){return cM(t).replace(/%3B/gi,";")}function p4(t){return encodeURI(t)}function dw(t){return cM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lp(t){return decodeURIComponent(t)}function QA(t){return lp(t.replace(/\+/g,"%20"))}function lM(t){return`${dw(t.path)}${g4(t.parameters)}`}function g4(t){return Object.entries(t).map(([e,n])=>`;${dw(e)}=${dw(n)}`).join("")}function m4(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${sp(n)}=${sp(i)}`).join("&"):`${sp(n)}=${sp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var y4=/^[^\/()?;#]+/;function sw(t){let e=t.match(y4);return e?e[0]:""}var v4=/^[^\/()?;=#]+/;function _4(t){let e=t.match(v4);return e?e[0]:""}var w4=/^[^=?&#]+/;function b4(t){let e=t.match(w4);return e?e[0]:""}var I4=/^[^&#]+/;function D4(t){let e=t.match(I4);return e?e[0]:""}var hw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new be(e,n)),r}parseSegment(){let e=sw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Zs(lp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=_4(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=sw(this.remaining);i&&(r=i,this.capture(r))}e[lp(n)]=lp(r)}parseQueryParam(e){let n=b4(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=D4(this.remaining);o&&(r=o,this.capture(r))}let i=QA(n),s=QA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ee);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ee]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function uM(t){return t.segments.length>0?new be([],{[ee]:t}):t}function dM(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=dM(i);if(r===ee&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new be(t.segments,e);return E4(n)}function E4(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new be(t.segments.concat(e.segments),e.children)}return t}function Fa(t){return t instanceof Li}function x4(t,e,n=null,r=null){let i=hM(t);return fM(i,e,n,r)}function hM(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new be(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=uM(r);return e??i}function fM(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ow(i,i,i,n,r);let s=C4(e);if(s.toRoot())return ow(i,i,new be([],{}),n,r);let o=T4(s,i,t),a=o.processChildren?Yl(o.segmentGroup,o.index,s.commands):gM(o.segmentGroup,o.index,s.commands);return ow(i,o.segmentGroup,a,n,r)}function up(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function eu(t){return typeof t=="object"&&t!=null&&t.outlets}function ow(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=pM(t,e,n);let a=uM(dM(o));return new Li(a,s,i)}function pM(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=pM(s,e,n)}),new be(t.segments,r)}var dp=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&up(r[0]))throw new U(4003,!1);let i=r.find(eu);if(i&&i!==rM(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function C4(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dp(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new dp(n,e,r)}var Na=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function T4(t,e,n){if(t.isAbsolute)return new Na(e,!0,0);if(!n)return new Na(e,!1,NaN);if(n.parent===null)return new Na(n,!0,0);let r=up(t.commands[0])?0:1,i=n.segments.length-1+r;return S4(n,i,t.numberOfDoubleDots)}function S4(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Na(r,!1,i-s)}function A4(t){return eu(t[0])?t[0].outlets:{[ee]:t}}function gM(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return Yl(t,e,n);let r=M4(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new be(t.segments.slice(0,r.pathIndex),{});return s.children[ee]=new be(t.segments.slice(r.pathIndex),t.children),Yl(s,0,i)}else return r.match&&i.length===0?new be(t.segments,{}):r.match&&!t.hasChildren()?fw(t,e,n):r.match?Yl(t,0,i):fw(t,e,n)}function Yl(t,e,n){if(n.length===0)return new be(t.segments,{});{let r=A4(n),i={};if(Object.keys(r).some(s=>s!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let s=Yl(t.children[ee],e,n);return new be(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gM(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new be(t.segments,i)}}function M4(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(eu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ZA(c,l,o))return s;r+=2}else{if(!ZA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(eu(s)){let c=R4(s.outlets);return new be(r,c)}if(i===0&&up(n[0])){let c=t.segments[e];r.push(new Zs(c.path,YA(n[0]))),i++;continue}let o=eu(s)?s.outlets[ee]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&up(a)?(r.push(new Zs(o,YA(a))),i+=2):(r.push(new Zs(o,{})),i++)}return new be(r,{})}function R4(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=fw(new be([],{}),0,r))}),e}function YA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ZA(t,e,n){return t==n.path&&br(e,n.parameters)}var Zl="imperative",It=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(It||{}),On=class{constructor(e,n){this.id=e,this.url=n}},Va=class extends On{constructor(e,n,r="imperative",i=null){super(e,n),this.type=It.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ei=class extends On{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=It.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(kn||{}),hp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(hp||{}),ji=class extends On{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=It.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bi=class extends On{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=It.NavigationSkipped}},tu=class extends On{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=It.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fp=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pw=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gw=class extends On{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=It.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mw=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vw=class{constructor(e){this.route=e,this.type=It.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_w=class{constructor(e){this.route=e,this.type=It.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ww=class{constructor(e){this.snapshot=e,this.type=It.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bw=class{constructor(e){this.snapshot=e,this.type=It.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iw=class{constructor(e){this.snapshot=e,this.type=It.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dw=class{constructor(e){this.snapshot=e,this.type=It.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pp=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=It.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},nu=class{},ru=class{constructor(e){this.url=e}};var Ew=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lu,this.attachRef=null}},lu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Ew,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=xw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Cw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cw(e,this._root).map(n=>n.value)}};function xw(t,e){if(t===e.value)return e;for(let n of e.children){let r=xw(t,n);if(r)return r}return null}function Cw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Cw(t,n);if(r.length)return r.unshift(e),r}return[]}var Dn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Pa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var mp=class extends gp{constructor(e,n){super(e),this.snapshot=n,Fw(this,e)}toString(){return this.snapshot.toString()}};function mM(t){let e=P4(t),n=new St([new Zs("",{})]),r=new St({}),i=new St({}),s=new St({}),o=new St(""),a=new La(n,r,s,o,i,ee,t,e.root);return a.snapshot=e.root,new mp(new Dn(a,[]),e)}function P4(t){let e={},n={},r={},i="",s=new iu([],e,r,i,n,ee,t,null,{});return new yp("",new Dn(s,[]))}var La=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(z(l=>l[au]))??H(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(z(e=>Oa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(z(e=>Oa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ow(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&vM(i)&&(r.resolve[au]=i.title),r}var iu=class{get title(){return this.data?.[au]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},yp=class extends gp{constructor(e,n){super(n),this.url=e,Fw(this,n)}toString(){return yM(this._root)}};function Fw(t,e){e.value._routerState=t,e.children.forEach(n=>Fw(t,n))}function yM(t){let e=t.children.length>0?` { ${t.children.map(yM).join(", ")} } `:"";return`${t.value}${e}`}function aw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,br(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),br(e.params,n.params)||t.paramsSubject.next(n.params),a4(e.url,n.url)||t.urlSubject.next(n.url),br(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Tw(t,e){let n=br(t.params,e.params)&&d4(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Tw(t.parent,e.parent))}function vM(t){return typeof t.title=="string"||t.title===null}var Vw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=O(lu),this.location=O(wf),this.changeDetector=O(Vl),this.environmentInjector=O(wn),this.inputBinder=O(Ip,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Sw(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=bn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ri]});let t=e;return t})(),Sw=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===La?this.route:e===lu?this.childContexts:this.parent.get(e,n)}},Ip=new V(""),XA=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ml([i.queryParams,i.params,i.data]).pipe(Ge(([o,a,c],l)=>(c=N(N(N({},o),a),c),l===0?H(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=HS(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function N4(t,e,n){let r=su(t,e._root,n?n._root:void 0);return new mp(r,e)}function su(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=k4(t,e,n);return new Dn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>su(t,a)),o}}let r=O4(e.value),i=e.children.map(s=>su(t,s));return new Dn(r,i)}}function k4(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return su(t,r,i);return su(t,r)})}function O4(t){return new La(new St(t.url),new St(t.params),new St(t.queryParams),new St(t.fragment),new St(t.data),t.outlet,t.component,t)}var _M="ngNavigationCancelingError";function wM(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bM(!1,kn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function bM(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_M]=!0,n.cancellationCode=e,n}function F4(t){return IM(t)&&Fa(t.url)}function IM(t){return!!t&&t[_M]}var V4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=bt({type:e,selectors:[["ng-component"]],standalone:!0,features:[PS],decls:1,vars:0,template:function(i,s){i&1&&He(0,"router-outlet")},dependencies:[Vw],encapsulation:2});let t=e;return t})();function L4(t,e){return t.providers&&!t._injector&&(t._injector=bf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Lw(t){let e=t.children&&t.children.map(Lw),n=e?de(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=V4),n}function Ir(t){return t.outlet||ee}function j4(t,e){let n=t.filter(r=>Ir(r)===e);return n.push(...t.filter(r=>Ir(r)!==e)),n}function uu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var B4=(t,e,n,r)=>z(i=>(new Aw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Aw=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),aw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Pa(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Pa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Pa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Pa(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Dw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(aw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),aw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=uu(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},vp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ka=class{constructor(e,n){this.component=e,this.route=n}};function U4(t,e,n){let r=t._root,i=e?e._root:null;return Kl(r,i,n,[r.value])}function $4(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ba(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!FC(t)?t:e.get(t):r}function Kl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Pa(e);return t.children.forEach(o=>{H4(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Xl(a,n.getContext(o),i)),i}function H4(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=z4(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new vp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Kl(t,e,a?a.children:null,r,i):Kl(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ka(a.outlet.component,o))}else o&&Xl(e,a,i),i.canActivateChecks.push(new vp(r)),s.component?Kl(t,null,a?a.children:null,r,i):Kl(t,null,n,r,i);return i}function z4(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Xs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Xs(t.url,e.url)||!br(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tw(t,e)||!br(t.queryParams,e.queryParams);case"paramsChange":default:return!Tw(t,e)}}function Xl(t,e,n){let r=Pa(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Xl(o,e.children.getContext(s),n):Xl(o,null,n):Xl(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ka(e.outlet.component,i)):n.canDeactivateChecks.push(new ka(null,i)):n.canDeactivateChecks.push(new ka(null,i))}function du(t){return typeof t=="function"}function q4(t){return typeof t=="boolean"}function G4(t){return t&&du(t.canLoad)}function W4(t){return t&&du(t.canActivate)}function K4(t){return t&&du(t.canActivateChild)}function Q4(t){return t&&du(t.canDeactivate)}function Y4(t){return t&&du(t.canMatch)}function DM(t){return t instanceof zr||t?.name==="EmptyError"}var op=Symbol("INITIAL_VALUE");function ja(){return Ge(t=>ml(t.map(e=>e.pipe(qr(1),Os(op)))).pipe(z(e=>{for(let n of e)if(n!==!0){if(n===op)return op;if(n===!1||n instanceof Li)return n}return!0}),At(e=>e!==op),qr(1)))}function Z4(t,e){return ct(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?H(de(N({},n),{guardsResult:!0})):X4(o,r,i,t).pipe(ct(a=>a&&q4(a)?J4(r,s,t,e):H(a)),z(a=>de(N({},n),{guardsResult:a})))})}function X4(t,e,n,r){return ye(t).pipe(ct(i=>i5(i.component,i.route,n,e,r)),Sn(i=>i!==!0,!0))}function J4(t,e,n,r){return ye(e).pipe(Ns(i=>Jo(t5(i.route.parent,r),e5(i.route,r),r5(t,i.path,n),n5(t,i.route,n))),Sn(i=>i!==!0,!0))}function e5(t,e){return t!==null&&e&&e(new Iw(t)),H(!0)}function t5(t,e){return t!==null&&e&&e(new ww(t)),H(!0)}function n5(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(s=>Ch(()=>{let o=uu(e)??n,a=Ba(s,o),c=W4(a)?a.canActivate(e,t):Ni(o,()=>a(e,t));return Ui(c).pipe(Sn())}));return H(i).pipe(ja())}function r5(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>$4(o)).filter(o=>o!==null).map(o=>Ch(()=>{let a=o.guards.map(c=>{let l=uu(o.node)??n,u=Ba(c,l),d=K4(u)?u.canActivateChild(r,t):Ni(l,()=>u(r,t));return Ui(d).pipe(Sn())});return H(a).pipe(ja())}));return H(s).pipe(ja())}function i5(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return H(!0);let o=s.map(a=>{let c=uu(e)??i,l=Ba(a,c),u=Q4(l)?l.canDeactivate(t,e,n,r):Ni(c,()=>l(t,e,n,r));return Ui(u).pipe(Sn())});return H(o).pipe(ja())}function s5(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return H(!0);let s=i.map(o=>{let a=Ba(o,t),c=G4(a)?a.canLoad(e,n):Ni(t,()=>a(e,n));return Ui(c)});return H(s).pipe(ja(),EM(r))}function EM(t){return Oy(lt(e=>{if(Fa(e))throw wM(t,e)}),z(e=>e===!0))}function o5(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return H(!0);let s=i.map(o=>{let a=Ba(o,t),c=Y4(a)?a.canMatch(e,n):Ni(t,()=>a(e,n));return Ui(c)});return H(s).pipe(ja(),EM(r))}var ou=class{constructor(e){this.segmentGroup=e||null}},_p=class extends Error{constructor(e){super(),this.urlTree=e}};function Ra(t){return Xo(new ou(t))}function a5(t){return Xo(new U(4e3,!1))}function c5(t){return Xo(bM(!1,kn.GuardRejected))}var Mw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[ee])return a5(e.redirectTo);i=i.children[ee]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new _p(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Li(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new be(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Rw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function l5(t,e,n,r,i){let s=jw(t,e,n);return s.matched?(r=L4(e,r),o5(r,e,n,i).pipe(z(o=>o===!0?s:N({},Rw)))):H(s)}function jw(t,e,n){if(e.path==="**")return u5(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},Rw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||o4)(n,t,e);if(!i)return N({},Rw);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?N(N({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function u5(t){return{matched:!0,parameters:t.length>0?rM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function JA(t,e,n,r){return n.length>0&&f5(t,n,r)?{segmentGroup:new be(e,h5(r,new be(n,t.children))),slicedSegments:[]}:n.length===0&&p5(t,n,r)?{segmentGroup:new be(t.segments,d5(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function d5(t,e,n,r){let i={};for(let s of n)if(Dp(t,e,s)&&!r[Ir(s)]){let o=new be([],{});i[Ir(s)]=o}return N(N({},r),i)}function h5(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&Ir(r)!==ee){let i=new be([],{});n[Ir(r)]=i}return n}function f5(t,e,n){return n.some(r=>Dp(t,e,r)&&Ir(r)!==ee)}function p5(t,e,n){return n.some(r=>Dp(t,e,r))}function Dp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function g5(t,e,n,r){return Ir(t)!==r&&(r===ee||!Dp(e,n,t))?!1:jw(e,t,n).matched}function m5(t,e,n){return e.length===0&&!t.children[n]}var Pw=class{};function y5(t,e,n,r,i,s,o="emptyOnly"){return new Nw(t,e,n,r,i,o,s).recognize()}var v5=31,Nw=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Mw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=JA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(z(n=>{let r=new iu([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},ee,this.rootComponentType,null,{}),i=new Dn(r,n),s=new yp("",i),o=x4(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ee).pipe(Di(r=>{if(r instanceof _p)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ou?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Ow(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(z(s=>s instanceof Dn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ye(i).pipe(Ns(s=>{let o=r.children[s],a=j4(n,s);return this.processSegmentGroup(e,a,o,s)}),ks((s,o)=>(s.push(...o),s)),Ei(null),Gy(),ct(s=>{if(s===null)return Ra(r);let o=xM(s);return _5(o),H(o)}))}processSegment(e,n,r,i,s,o){return ye(n).pipe(Ns(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Di(c=>{if(c instanceof ou)return H(null);throw c}))),Sn(a=>!!a),Di(a=>{if(DM(a))return m5(r,i,s)?H(new Pw):Ra(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return g5(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ra(i):Ra(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=jw(n,i,s);if(!a)return Ra(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>v5&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(ct(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=l5(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ge(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ge(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new iu(u,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,b5(r),Ir(r),r.component??r._loadedComponent??null,r,I5(r)),{segmentGroup:p,slicedSegments:g}=JA(n,u,d,c);if(g.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(z(y=>y===null?null:new Dn(f,y)));if(c.length===0&&g.length===0)return H(new Dn(f,[]));let m=Ir(r)===s;return this.processSegment(l,c,p,g,m?ee:s,!0).pipe(z(y=>new Dn(f,y instanceof Dn?[y]:[])))}))):Ra(n)))}getChildConfig(e,n,r){return n.children?H({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?H({routes:n._loadedRoutes,injector:n._loadedInjector}):s5(e,n,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,n).pipe(lt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):c5(n))):H({routes:[],injector:e})}};function _5(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function w5(t){let e=t.value.routeConfig;return e&&e.path===""}function xM(t){let e=[],n=new Set;for(let r of t){if(!w5(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=xM(r.children);e.push(new Dn(r.value,i))}return e.filter(r=>!n.has(r))}function b5(t){return t.data||{}}function I5(t){return t.resolve||{}}function D5(t,e,n,r,i,s){return ct(o=>y5(t,e,n,r,o.extractedUrl,i,s).pipe(z(({state:a,tree:c})=>de(N({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function E5(t,e){return ct(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return H(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of CM(c))o.add(l);let a=0;return ye(o).pipe(Ns(c=>s.has(c)?x5(c,r,t,e):(c.data=Ow(c,c.parent,t).resolve,H(void 0))),lt(()=>a++),ea(1),ct(c=>a===o.size?H(n):rn))})}function CM(t){let e=t.children.map(n=>CM(n)).flat();return[t,...e]}function x5(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!vM(i)&&(s[au]=i.title),C5(s,t,e,r).pipe(z(o=>(t._resolvedData=o,t.data=Ow(t,t.parent,n).resolve,null)))}function C5(t,e,n,r){let i=uw(t);if(i.length===0)return H({});let s={};return ye(i).pipe(ct(o=>T5(t[o],e,n,r).pipe(Sn(),lt(a=>{s[o]=a}))),ea(1),zy(s),Di(o=>DM(o)?rn:Xo(o)))}function T5(t,e,n,r){let i=uu(e)??r,s=Ba(t,i),o=s.resolve?s.resolve(e,n):Ni(i,()=>s(e,n));return Ui(o)}function cw(t){return Ge(e=>{let n=t(e);return n?ye(n).pipe(z(()=>e)):H(e)})}var TM=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ee);return i}getResolvedTitleForRoute(r){return r.data[au]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>O(S5),providedIn:"root"});let t=e;return t})(),S5=(()=>{let e=class e extends TM{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(M(pA))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hu=new V("",{providedIn:"root",factory:()=>({})}),wp=new V(""),Bw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Af)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return H(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ui(r.loadComponent()).pipe(z(SM),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),yl(()=>{this.componentLoaders.delete(r)})),s=new Ko(i,()=>new vt).pipe(Wo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return H({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=A5(i,this.compiler,r,this.onLoadEndListener).pipe(yl(()=>{this.childrenLoaders.delete(i)})),a=new Ko(o,()=>new vt).pipe(Wo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function A5(t,e,n,r){return Ui(t.loadChildren()).pipe(z(SM),ct(i=>i instanceof Ml||Array.isArray(i)?H(i):ye(e.compileModuleAsync(i))),z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(wp,[],{optional:!0,self:!0}).flat()),{routes:o.map(Lw),injector:s}}))}function M5(t){return t&&typeof t=="object"&&"default"in t}function SM(t){return M5(t)?t.default:t}var Uw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>O(R5),providedIn:"root"});let t=e;return t})(),R5=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),AM=new V(""),MM=new V("");function P5(t,e,n){let r=t.get(MM),i=t.get(cn);return t.get(ue).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),N5(t))),{onViewTransitionCreated:c}=r;return c&&Ni(t,()=>c({transition:a,from:e,to:n})),o})}function N5(t){return new Promise(e=>{C_(e,{injector:t})})}var $w=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vt,this.transitionAbortSubject=new vt,this.configLoader=O(Bw),this.environmentInjector=O(wn),this.urlSerializer=O(cu),this.rootContexts=O(lu),this.location=O(Ia),this.inputBindingEnabled=O(Ip,{optional:!0})!==null,this.titleStrategy=O(TM),this.options=O(hu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Uw),this.createViewTransition=O(AM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null;let r=s=>this.events.next(new vw(s)),i=s=>this.events.next(new _w(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(de(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new St({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Zl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(o=>o.id!==0),z(o=>de(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ge(o=>{this.currentTransition=o;let a=!1,c=!1;return H(o).pipe(lt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?de(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ge(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Bi(l.id,this.urlSerializer.serialize(l.rawUrl),h,hp.IgnoredSameUrlNavigation)),l.resolve(null),rn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return H(l).pipe(Ge(h=>{let f=this.transitions?.getValue();return this.events.next(new Va(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?rn:Promise.resolve(h)}),D5(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=de(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new fp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=l,y=new Va(h,this.urlSerializer.serialize(f),p,g);this.events.next(y);let v=mM(this.rootComponentType).snapshot;return this.currentTransition=o=de(N({},l),{targetSnapshot:v,urlAfterRedirects:f,extras:de(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,H(o)}else{let h="";return this.events.next(new Bi(l.id,this.urlSerializer.serialize(l.extractedUrl),h,hp.IgnoredByUrlHandlingStrategy)),l.resolve(null),rn}}),lt(l=>{let u=new pw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),z(l=>(this.currentTransition=o=de(N({},l),{guards:U4(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Z4(this.environmentInjector,l=>this.events.next(l)),lt(l=>{if(o.guardsResult=l.guardsResult,Fa(l.guardsResult))throw wM(this.urlSerializer,l.guardsResult);let u=new gw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),At(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",kn.GuardRejected),!1)),cw(l=>{if(l.guards.canActivateChecks.length)return H(l).pipe(lt(u=>{let d=new mw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ge(u=>{let d=!1;return H(u).pipe(E5(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",kn.NoDataFromResolver)}}))}),lt(u=>{let d=new yw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),cw(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(lt(f=>{d.component=f}),z(()=>{})));for(let f of d.children)h.push(...u(f));return h};return ml(u(l.targetSnapshot.root)).pipe(Ei(null),qr(1))}),cw(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?ye(d).pipe(z(()=>o)):H(o)}),z(l=>{let u=N4(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=de(N({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),lt(()=>{this.events.next(new nu)}),B4(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qr(1),lt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ei(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ky(this.transitionAbortSubject.pipe(lt(l=>{throw l}))),yl(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",kn.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Di(l=>{if(c=!0,IM(l))this.events.next(new ji(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),F4(l)?this.events.next(new ru(l.url)):o.resolve(!1);else{this.events.next(new tu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return rn}))}))}cancelNavigationTransition(r,i,s){let o=new ji(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function k5(t){return t!==Zl}var O5=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>O(F5),providedIn:"root"});let t=e;return t})(),kw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},F5=(()=>{let e=class e extends kw{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kl(e)))(s||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),RM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>O(V5),providedIn:"root"});let t=e;return t})(),V5=(()=>{let e=class e extends RM{constructor(){super(...arguments),this.location=O(Ia),this.urlSerializer=O(cu),this.options=O(hu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Uw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Li,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Va)this.stateMemento=this.createStateMemento();else if(r instanceof Bi)this.rawUrlTree=i.initialUrl;else if(r instanceof fp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof nu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ji&&(r.code===kn.GuardRejected||r.code===kn.NoDataFromResolver)?this.restoreHistory(i):r instanceof tu?this.restoreHistory(i,!0):r instanceof ei&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=kl(e)))(s||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ql=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ql||{});function PM(t,e){t.events.pipe(At(n=>n instanceof ei||n instanceof ji||n instanceof tu||n instanceof Bi),z(n=>n instanceof ei||n instanceof Bi?Ql.COMPLETE:(n instanceof ji?n.code===kn.Redirect||n.code===kn.SupersededByNewNavigation:!1)?Ql.REDIRECTING:Ql.FAILED),At(n=>n!==Ql.REDIRECTING),qr(1)).subscribe(()=>{e()})}function L5(t){throw t}var j5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=O(Sf),this.stateManager=O(RM),this.options=O(hu,{optional:!0})||{},this.pendingTasks=O(If),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O($w),this.urlSerializer=O(cu),this.location=O(Ia),this.urlHandlingStrategy=O(Uw),this._events=new vt,this.errorHandler=this.options.errorHandler||L5,this.navigated=!1,this.routeReuseStrategy=O(O5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(wp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Ip,{optional:!0}),this.eventsSubscription=new nt,this.isNgZoneEnabled=O(ue)instanceof ue&&ue.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ji&&i.code!==kn.Redirect&&i.code!==kn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ei)this.navigated=!0;else if(i instanceof ru){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||k5(s.source)};this.scheduleNavigation(a,Zl,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}$5(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Zl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=N({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Lw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=hM(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return fM(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Fa(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Zl,null,i)}navigate(r,i={skipLocationChange:!1}){return U5(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=N({},j5):i===!1?s=N({},B5):s=i,Fa(r))return KA(this.currentUrlTree,r,s);let o=this.parseUrl(r);return KA(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return PM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function U5(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function $5(t){return!(t instanceof nu)&&!(t instanceof ru)}var bp=class{};var H5=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(At(r=>r instanceof ei),Ns(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=bf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return ye(s).pipe(Ii())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=H(null);let o=s.pipe(ct(a=>a===null?H(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ye([o,a]).pipe(Ii())}else return o})}};e.\u0275fac=function(i){return new(i||e)(M(Rt),M(Af),M(wn),M(bp),M(Bw))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),NM=new V(""),z5=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Va?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ei?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Bi&&r.code===hp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof pp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){aS()},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function q5(t){return t.routerState.root}function fu(t,e){return{\u0275kind:t,\u0275providers:e}}function G5(){let t=O(Xn);return e=>{let n=t.get(ba);if(e!==n.components[0])return;let r=t.get(Rt),i=t.get(kM);t.get(Hw)===1&&r.initialNavigation(),t.get(OM,null,re.Optional)?.setUpPreloading(),t.get(NM,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kM=new V("",{factory:()=>new vt}),Hw=new V("",{providedIn:"root",factory:()=>1});function W5(){return fu(2,[{provide:Hw,useValue:0},{provide:Pf,multi:!0,deps:[Xn],useFactory:e=>{let n=e.get(YS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Rt),s=e.get(kM);PM(i,()=>{r(!0)}),e.get($w).afterPreactivation=()=>(r(!0),s.closed?H(void 0):s),i.initialNavigation()}))}}])}function K5(){return fu(3,[{provide:Pf,multi:!0,useFactory:()=>{let e=O(Rt);return()=>{e.setUpLocationChangeListener()}}},{provide:Hw,useValue:2}])}var OM=new V("");function Q5(t){return fu(0,[{provide:OM,useExisting:H5},{provide:bp,useExisting:t}])}function Y5(){return fu(8,[XA,{provide:Ip,useExisting:XA}])}function Z5(t){let e=[{provide:AM,useValue:P5},{provide:MM,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return fu(9,e)}var eM=new V("ROUTER_FORROOT_GUARD"),X5=[Ia,{provide:cu,useClass:Jl},Rt,lu,{provide:La,useFactory:q5,deps:[Rt]},Bw,[]],zw=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[X5,[],{provide:wp,multi:!0,useValue:r},{provide:eM,useFactory:nq,deps:[[Rt,new Fl,new OT]]},{provide:hu,useValue:i||{}},i?.useHash?eq():tq(),J5(),i?.preloadingStrategy?Q5(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?rq(i):[],i?.bindToComponentInputs?Y5().\u0275providers:[],i?.enableViewTransitions?Z5().\u0275providers:[],iq()]}}static forChild(r){return{ngModule:e,providers:[{provide:wp,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(M(eM,8))},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})();function J5(){return{provide:NM,useFactory:()=>{let t=O(rA),e=O(ue),n=O(hu),r=O($w),i=O(cu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new z5(i,r,t,e,n)}}}function eq(){return{provide:Ws,useClass:XS}}function tq(){return{provide:Ws,useClass:U_}}function nq(t){return"guarded"}function rq(t){return[t.initialNavigation==="disabled"?K5().\u0275providers:[],t.initialNavigation==="enabledBlocking"?W5().\u0275providers:[]]}var tM=new V("");function iq(){return[{provide:tM,useFactory:G5},{provide:R_,multi:!0,useExisting:tM}]}var sq="firebase",oq="10.11.0";bi(sq,oq,"app");var $a=new Wr("ANGULARFIRE2_VERSION");var aq=(t,e)=>{let n=e?[e]:Ix(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Js=class{constructor(){return aq(cq)}},cq="app-check";function qw(){}var Ep=class{zone;delegate;constructor(e,n=jy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Gw=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qw,{},qw,qw)),n.pipe(lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xp=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ep(Zone.current)),this.insideAngular=n.run(()=>new Ep(Zone.current,gl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(M(ue))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lq(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function ln(t){return uq(lq())(t)}function uq(t){return function(n){return n=n.lift(new Gw(t.ngZone)),n.pipe(Gn(t.outsideAngular),Tn(t.insideAngular))}}var fq=new Map,pq={activated:!1,tokenObservers:[]},gq={initialized:!1,enabled:!1};function er(t){return fq.get(t)||Object.assign({},pq)}function UM(){return gq}var mq="https://content-firebaseappcheck.googleapis.com/v1";var yq="exchangeDebugToken",VM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Goe=24*60*60*1e3;var Kw=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return D(this,null,function*(){this.stop();try{this.pending=new Dy,this.pending.promise.catch(n=>{}),yield vq(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Dy,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function vq(t){return new Promise(e=>{setTimeout(e,t)})}var _q={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$i=new wx("appCheck","AppCheck",_q);function $M(t){if(!er(t).activated)throw $i.create("use-before-activation",{appName:t.name})}function HM(r,i){return D(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(t,a)}catch(f){throw $i.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw $i.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw $i.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function zM(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${mq}/projects/${n}/apps/${r}:${yq}?key=${i}`,body:{debug_token:e}}}var wq="firebase-app-check-database",bq=1,Qw="firebase-app-check-store";var Cp=null;function Iq(){return Cp||(Cp=new Promise((t,e)=>{try{let n=indexedDB.open(wq,bq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e($i.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Qw,{keyPath:"compositeKey"})}}}catch(n){e($i.create("storage-open",{originalErrorMessage:n?.message}))}}),Cp)}function Dq(t,e){return Eq(xq(t),e)}function Eq(t,e){return D(this,null,function*(){let r=(yield Iq()).transaction(Qw,"readwrite"),s=r.objectStore(Qw).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a($i.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function xq(t){return`${t.options.appId}-${t.name}`}var Yw=new th("@firebase/app-check");function Ww(t,e){return eh()?Dq(t,e).catch(n=>{Yw.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function qM(){return UM().enabled}function GM(){return D(this,null,function*(){let t=UM();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Cq={error:"UNKNOWN_ERROR"};function Tq(t){return yx.encodeString(JSON.stringify(t),!1)}function Zw(t,e=!1){return D(this,null,function*(){let n=t.app;$M(n);let r=er(n),i=r.token,s;if(i&&!pu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(pu(c)?i=c:yield Ww(n,void 0))}if(!e&&i&&pu(i))return{token:i.token};let o=!1;if(qM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HM(zM(n,yield GM()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield Ww(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield er(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Yw.warn(c.message):Yw.error(c),s=c}let a;return i?s?pu(i)?a={token:i.token,internalError:s}:a=jM(s):(a={token:i.token},r.token=i,yield Ww(n,i)):a=jM(s),o&&Rq(n,a),a})}function Sq(t){return D(this,null,function*(){let e=t.app;$M(e);let{provider:n}=er(e);if(qM()){let r=yield GM(),{token:i}=yield HM(zM(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Aq(t,e,n,r){let{app:i}=t,s=er(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&pu(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),LM(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>LM(t))}function WM(t,e){let n=er(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function LM(t){let{app:e}=t,n=er(e),r=n.tokenRefresher;r||(r=Mq(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Mq(t){let{app:e}=t;return new Kw(()=>D(this,null,function*(){let n=er(e),r;if(n.token?r=yield Zw(t,!0):r=yield Zw(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=er(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},VM.RETRIAL_MIN_WAIT,VM.RETRIAL_MAX_WAIT)}function Rq(t,e){let n=er(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function pu(t){return t.expireTimeMillis-Date.now()>0}function jM(t){return{token:Tq(Cq),error:t}}var Xw=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=er(this.app);for(let n of e)WM(this.app,n.next);return Promise.resolve()}};function Pq(t,e){return new Xw(t,e)}function Nq(t){return{getToken:e=>Zw(t,e),getLimitedUseToken:()=>Sq(t),addTokenListener:e=>Aq(t,"INTERNAL",e),removeTokenListener:e=>WM(t.app,e)}}var kq="@firebase/app-check",Oq="0.8.3";var Fq="app-check",BM="app-check-internal";function Vq(){dl(new As(Fq,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Pq(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(BM).initialize()})),dl(new As(BM,t=>{let e=t.getProvider("app-check").getImmediate();return Nq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),bi(kq,Oq)}Vq();var Lq=["localhost","0.0.0.0","127.0.0.1"],iae=typeof window<"u"&&Lq.includes(window.location.hostname);var jq="firebase",Bq="10.11.0";Lt.registerVersion(jq,Bq,"app-compat");var Uq=["ngOnDestroy"],YM=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(Uq.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,d),d})})})});var Tp=class{constructor(e){return e}},Ha=new V("angularfire2.app.options"),za=new V("angularfire2.app.name");function gu(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=Lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Lt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;$q("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Tp(o)}var $q=(t,...e)=>{N_()&&typeof console<"u"&&console[t](...e)},Hq={provide:Tp,useFactory:gu,deps:[Ha,ue,[new Fl,za]]},ZM=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ha,useValue:n},{provide:za,useValue:r}]}}constructor(n){Lt.registerVersion("angularfire",$a.full,"core"),Lt.registerVersion("angularfire",$a.full,"app-compat"),Lt.registerVersion("angular",kS.full,n.toString())}static \u0275fac=function(r){return new(r||t)(M(an))};static \u0275mod=Qe({type:t});static \u0275inj=Ke({providers:[Hq]})}return t})();function Sp(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return zq(i,o)||(QM("error",`${e} was already initialized on the ${n} Firebase App with different settings.${qq?" You may need to reload as Firebase is not HMR aware.":""}`),QM("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function zq(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var qq=typeof module<"u"&&!!module.hot,QM=(t,...e)=>{N_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Jw=new V("angularfire2.auth.use-emulator"),eb=new V("angularfire2.auth.settings"),tb=new V("angularfire2.auth.tenant-id"),nb=new V("angularfire2.auth.langugage-code"),rb=new V("angularfire2.auth.use-device-language"),ib=new V("angularfire.auth.persistence"),sb=(t,e,n,r,i,s,o,a)=>Sp(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,u]of Object.entries(o))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]),Ap=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,l,u,d,h,f){let p=new vt,g=H(void 0).pipe(Tn(o.outsideAngular),Ge(()=>s.runOutsideAngular(()=>import("./chunk-RLFJJVXN.js"))),z(()=>gu(n,s,r)),z(m=>sb(m,s,a,l,u,d,c,h)),Sh({bufferSize:1,refCount:!1}));if(Ks(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=H(null);else{g.pipe(Sn()).subscribe();let m=g.pipe(Ge(_=>_.getRedirectResult().then(b=>b,()=>null)),ln,Sh({bufferSize:1,refCount:!1})),y=g.pipe(Ge(_=>new se(b=>({unsubscribe:s.runOutsideAngular(()=>_.onAuthStateChanged(w=>b.next(w),w=>b.error(w),()=>b.complete()))})))),v=g.pipe(Ge(_=>new se(b=>({unsubscribe:s.runOutsideAngular(()=>_.onIdTokenChanged(w=>b.next(w),w=>b.error(w),()=>b.complete()))}))));this.authState=m.pipe(Ah(y),Gn(o.outsideAngular),Tn(o.insideAngular)),this.user=m.pipe(Ah(v),Gn(o.outsideAngular),Tn(o.insideAngular)),this.idToken=this.user.pipe(Ge(_=>_?ye(_.getIdToken()):H(null))),this.idTokenResult=this.user.pipe(Ge(_=>_?ye(_.getIdTokenResult()):H(null))),this.credential=Hy(m,p,this.authState.pipe(At(_=>!_))).pipe(z(_=>_?.user?_:null),Gn(o.outsideAngular),Tn(o.insideAngular))}return YM(this,g,s,{spy:{apply:(m,y,v)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&v.then(_=>p.next(_))}}})}static \u0275fac=function(r){return new(r||t)(M(Ha),M(za,8),M(an),M(ue),M(xp),M(Jw,8),M(eb,8),M(tb,8),M(nb,8),M(rb,8),M(ib,8),M(Js,8))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Gq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={},k,Tb=Tb||{},K=Gq||self;function Hp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Au(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Wq(t){return Object.prototype.hasOwnProperty.call(t,ob)&&t[ob]||(t[ob]=++Kq)}var ob="closure_uid_"+(1e9*Math.random()>>>0),Kq=0;function Qq(t,e,n){return t.call.apply(t.bind,arguments)}function Yq(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=Qq:$t=Yq,$t.apply(null,arguments)}function Mp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Et(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Hi(){this.s=this.s,this.o=this.o}var Zq=0;Hi.prototype.s=!1;Hi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Zq!=0)&&Wq(this)};Hi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var dR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Sb(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function JM(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Hp(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ht(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var Xq=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};K.addEventListener("test",n,e),K.removeEventListener("test",n,e)}catch{}return t}();function bu(t){return/^[\s\xa0]*$/.test(t)}function zp(){var t=K.navigator;return t&&(t=t.userAgent)?t:""}function Dr(t){return zp().indexOf(t)!=-1}function Ab(t){return Ab[" "](t),t}Ab[" "]=function(){};function Jq(t,e){var n=UG;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var eG=Dr("Opera"),Ka=Dr("Trident")||Dr("MSIE"),hR=Dr("Edge"),db=hR||Ka,fR=Dr("Gecko")&&!(zp().toLowerCase().indexOf("webkit")!=-1&&!Dr("Edge"))&&!(Dr("Trident")||Dr("MSIE"))&&!Dr("Edge"),tG=zp().toLowerCase().indexOf("webkit")!=-1&&!Dr("Edge");function pR(){var t=K.document;return t?t.documentMode:void 0}var hb;e:{if(Rp="",Pp=function(){var t=zp();if(fR)return/rv:([^\);]+)(\)|;)/.exec(t);if(hR)return/Edge\/([\d\.]+)/.exec(t);if(Ka)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(tG)return/WebKit\/(\S+)/.exec(t);if(eG)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Pp&&(Rp=Pp?Pp[1]:""),Ka&&(Np=pR(),Np!=null&&Np>parseFloat(Rp))){hb=String(Np);break e}hb=Rp}var Rp,Pp,Np,fb;K.document&&Ka?(ab=pR(),fb=ab||parseInt(hb,10)||void 0):fb=void 0;var ab,nG=fb;function Iu(t,e){if(Ht.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(fR){e:{try{Ab(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:rG[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Iu.$.h.call(this)}}Et(Iu,Ht);var rG={2:"touch",3:"pen",4:"mouse"};Iu.prototype.h=function(){Iu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Mu="closure_listenable_"+(1e6*Math.random()|0),iG=0;function sG(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++iG,this.fa=this.ia=!1}function qp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Mb(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function oG(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function gR(t){let e={};for(let n in t)e[n]=t[n];return e}var eR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<eR.length;s++)n=eR[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Gp(t){this.src=t,this.g={},this.h=0}Gp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=gb(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new sG(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function pb(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=dR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(qp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function gb(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Rb="closure_lm_"+(1e6*Math.random()|0),cb={};function yR(t,e,n,r,i){if(r&&r.once)return _R(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)yR(t,e[s],n,r,i);return null}return n=kb(n),t&&t[Mu]?t.O(e,n,Au(r)?!!r.capture:!!r,i):vR(t,e,n,!1,r,i)}function vR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Au(i)?!!i.capture:!!i,a=Nb(t);if(a||(t[Rb]=a=new Gp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=aG(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xq||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bR(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function aG(){function t(n){return e.call(t.src,t.listener,n)}let e=cG;return t}function _R(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_R(t,e[s],n,r,i);return null}return n=kb(n),t&&t[Mu]?t.P(e,n,Au(r)?!!r.capture:!!r,i):vR(t,e,n,!0,r,i)}function wR(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)wR(t,e[s],n,r,i);else r=Au(r)?!!r.capture:!!r,n=kb(n),t&&t[Mu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=gb(s,n,r,i),-1<n&&(qp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Nb(t))&&(e=t.g[e.toString()],t=-1,e&&(t=gb(e,n,r,i)),(n=-1<t?e[t]:null)&&Pb(n))}function Pb(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Mu])pb(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nb(e))?(pb(n,t),n.h==0&&(n.src=null,e[Rb]=null)):qp(t)}}}function bR(t){return t in cb?cb[t]:cb[t]="on"+t}function cG(t,e){if(t.fa)t=!0;else{e=new Iu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Pb(t),t=n.call(r,e)}return t}function Nb(t){return t=t[Rb],t instanceof Gp?t:null}var lb="__closure_events_fn_"+(1e9*Math.random()>>>0);function kb(t){return typeof t=="function"?t:(t[lb]||(t[lb]=function(e){return t.handleEvent(e)}),t[lb])}function Dt(){Hi.call(this),this.i=new Gp(this),this.S=this,this.J=null}Et(Dt,Hi);Dt.prototype[Mu]=!0;Dt.prototype.removeEventListener=function(t,e,n,r){wR(this,t,e,n,r)};function Nt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ht(e,t);else if(e instanceof Ht)e.target=e.target||t;else{var i=e;e=new Ht(r,t),mR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=kp(o,r,!0,e)&&i}if(o=e.g=t,i=kp(o,r,!0,e)&&i,i=kp(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=kp(o,r,!1,e)&&i}Dt.prototype.N=function(){if(Dt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qp(n[r]);delete t.g[e],t.h--}}this.J=null};Dt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Dt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function kp(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&pb(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ob=K.JSON.stringify,mb=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function lG(){var t=Fb;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var yb=class{constructor(){this.h=this.g=null}add(e,n){let r=IR.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},IR=new mb(()=>new vb,t=>t.reset()),vb=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function uG(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function dG(t){K.setTimeout(()=>{throw t},0)}var Du,Eu=!1,Fb=new yb,DR=()=>{let t=K.Promise.resolve(void 0);Du=()=>{t.then(hG)}},hG=()=>{for(var t;t=lG();){try{t.h.call(t.g)}catch(n){dG(n)}var e=IR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Eu=!1};function Wp(t,e){Dt.call(this),this.h=t||1,this.g=e||K,this.j=$t(this.qb,this),this.l=Date.now()}Et(Wp,Dt);k=Wp.prototype;k.ga=!1;k.T=null;k.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nt(this,"tick"),this.ga&&(Vb(this),this.start()))}};k.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Vb(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}k.N=function(){Wp.$.N.call(this),Vb(this),delete this.g};function Lb(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:K.setTimeout(t,e||0)}function ER(t){t.g=Lb(()=>{t.g=null,t.i&&(t.i=!1,ER(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var _b=class extends Hi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ER(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function xu(t){Hi.call(this),this.h=t,this.g={}}Et(xu,Hi);var tR=[];function xR(t,e,n,r){Array.isArray(n)||(n&&(tR[0]=n.toString()),n=tR);for(var i=0;i<n.length;i++){var s=yR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function CR(t){Mb(t.g,function(e,n){this.g.hasOwnProperty(n)&&Pb(e)},t),t.g={}}xu.prototype.N=function(){xu.$.N.call(this),CR(this)};xu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kp(){this.g=!0}Kp.prototype.Ea=function(){this.g=!1};function fG(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function pG(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ga(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+mG(t,n)+(r?" "+r:"")})}function gG(t,e){t.info(function(){return"TIMEOUT: "+e})}Kp.prototype.info=function(){};function mG(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ob(n)}catch{return e}}var ro={},nR=null;function Qp(){return nR=nR||new Dt}ro.Ta="serverreachability";function TR(t){Ht.call(this,ro.Ta,t)}Et(TR,Ht);function Cu(t){let e=Qp();Nt(e,new TR(e))}ro.STAT_EVENT="statevent";function SR(t,e){Ht.call(this,ro.STAT_EVENT,t),this.stat=e}Et(SR,Ht);function Jt(t){let e=Qp();Nt(e,new SR(e,t))}ro.Ua="timingevent";function AR(t,e){Ht.call(this,ro.Ua,t),this.size=e}Et(AR,Ht);function Ru(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){t()},e)}var Yp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},MR={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jb(){}jb.prototype.h=null;function rR(t){return t.h||(t.h=t.i())}function RR(){}var Pu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bb(){Ht.call(this,"d")}Et(Bb,Ht);function Ub(){Ht.call(this,"c")}Et(Ub,Ht);var wb;function Zp(){}Et(Zp,jb);Zp.prototype.g=function(){return new XMLHttpRequest};Zp.prototype.i=function(){return{}};wb=new Zp;function Nu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new xu(this),this.P=yG,t=db?125:void 0,this.V=new Wp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new PR}function PR(){this.i=null,this.g="",this.h=!1}var yG=45e3,NR={},bb={};k=Nu.prototype;k.setTimeout=function(t){this.P=t};function Ib(t,e,n){t.L=1,t.A=Jp(ni(e)),t.u=n,t.S=!0,kR(t,null)}function kR(t,e){t.G=Date.now(),ku(t),t.B=ni(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),$R(n.i,"t",r),t.o=0,n=t.l.J,t.h=new PR,t.g=lP(t.l,n?e:null,!t.u),0<t.O&&(t.M=new _b($t(t.Pa,t,t.g),t.O)),xR(t.U,t.g,"readystatechange",t.nb),e=t.I?gR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Cu(),fG(t.j,t.v,t.B,t.m,t.W,t.u)}k.nb=function(t){t=t.target;let e=this.M;e&&Er(t)==3?e.l():this.Pa(t)};k.Pa=function(t){try{if(t==this.g)e:{let u=Er(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||db||this.g&&(this.h.h||this.g.ja()||aR(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Cu(3):Cu(2)),Xp(this);var n=this.g.da();this.ca=n;t:if(OR(this)){var r=aR(this.g);t="";var i=r.length,s=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){eo(this),wu(this);var o="";break t}this.h.i=new K.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,pG(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bu(a)){var l=a;break t}}l=null}if(n=l)Ga(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Db(this,n);else{this.i=!1,this.s=3,Jt(12),eo(this),wu(this);break e}}this.S?(FR(this,u,o),db&&this.i&&u==3&&(xR(this.U,this.V,"tick",this.mb),this.V.start())):(Ga(this.j,this.m,o,null),Db(this,o)),u==4&&eo(this),this.i&&!this.J&&(u==4?sP(this.l,this):(this.i=!1,ku(this)))}else LG(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),eo(this),wu(this)}}}catch{}finally{}};function OR(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function FR(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=vG(t,n),i==bb){e==4&&(t.s=4,Jt(14),r=!1),Ga(t.j,t.m,null,"[Incomplete Response]");break}else if(i==NR){t.s=4,Jt(15),Ga(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ga(t.j,t.m,i,null),Db(t,i);OR(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Jt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wb(e),e.M=!0,Jt(11))):(Ga(t.j,t.m,n,"[Invalid Chunked Response]"),eo(t),wu(t))}k.mb=function(){if(this.g){var t=Er(this.g),e=this.g.ja();this.o<e.length&&(Xp(this),FR(this,t,e),this.i&&t!=4&&ku(this))}};function vG(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?bb:(n=Number(e.substring(n,r)),isNaN(n)?NR:(r+=1,r+n>e.length?bb:(e=e.slice(r,r+n),t.o=r+n,e)))}k.cancel=function(){this.J=!0,eo(this)};function ku(t){t.Y=Date.now()+t.P,VR(t,t.P)}function VR(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ru($t(t.lb,t),e)}function Xp(t){t.C&&(K.clearTimeout(t.C),t.C=null)}k.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(gG(this.j,this.B),this.L!=2&&(Cu(),Jt(17)),eo(this),this.s=2,wu(this)):VR(this,this.Y-t)};function wu(t){t.l.H==0||t.J||sP(t.l,t)}function eo(t){Xp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Vb(t.V),CR(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Db(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Eb(n.i,t))){if(!t.K&&Eb(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)jp(n),ng(n);else break e;Gb(n),Jt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ru($t(n.ib,n),6e3));if(1>=qR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else to(n,11)}else if((t.K||n.g==t)&&jp(n),!bu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&($b(s,s.h),s.h=null))}if(r.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Fe(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=cP(r,r.J?r.pa:null,r.Y),o.K){GR(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Xp(a),ku(a)),r.g=o}else rP(r);0<n.j.length&&rg(n)}else l[0]!="stop"&&l[0]!="close"||to(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?to(n,7):qb(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Cu(4)}catch{}}function _G(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Hp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function wG(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Hp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function LR(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Hp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=wG(t),r=_G(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var jR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bG(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function no(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof no){this.h=t.h,Vp(this,t.j),this.s=t.s,this.g=t.g,Lp(this,t.m),this.l=t.l;var e=t.i,n=new Tu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),iR(this,n),this.o=t.o}else t&&(e=String(t).match(jR))?(this.h=!1,Vp(this,e[1]||"",!0),this.s=vu(e[2]||""),this.g=vu(e[3]||"",!0),Lp(this,e[4]),this.l=vu(e[5]||"",!0),iR(this,e[6]||"",!0),this.o=vu(e[7]||"")):(this.h=!1,this.i=new Tu(null,this.h))}no.prototype.toString=function(){var t=[],e=this.j;e&&t.push(_u(e,sR,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(_u(e,sR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(_u(n,n.charAt(0)=="/"?EG:DG,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",_u(n,CG)),t.join("")};function ni(t){return new no(t)}function Vp(t,e,n){t.j=n?vu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Lp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function iR(t,e,n){e instanceof Tu?(t.i=e,TG(t.i,t.h)):(n||(e=_u(e,xG)),t.i=new Tu(e,t.h))}function Fe(t,e,n){t.i.set(e,n)}function Jp(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _u(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,IG),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function IG(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sR=/[#\/\?@]/g,DG=/[#\?:]/g,EG=/[#\?]/g,xG=/[#\?@]/g,CG=/#/g;function Tu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zi(t){t.g||(t.g=new Map,t.h=0,t.i&&bG(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}k=Tu.prototype;k.add=function(t,e){zi(this),this.i=null,t=Qa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function BR(t,e){zi(t),e=Qa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function UR(t,e){return zi(t),e=Qa(t,e),t.g.has(e)}k.forEach=function(t,e){zi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};k.ta=function(){zi(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};k.Z=function(t){zi(this);let e=[];if(typeof t=="string")UR(this,t)&&(e=e.concat(this.g.get(Qa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};k.set=function(t,e){return zi(this),this.i=null,t=Qa(this,t),UR(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};k.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function $R(t,e,n){BR(t,e),0<n.length&&(t.i=null,t.g.set(Qa(t,e),Sb(n)),t.h+=n.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Qa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function TG(t,e){e&&!t.j&&(zi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(BR(this,r),$R(this,i,n))},t)),t.j=e}var SG=class{constructor(t,e){this.g=t,this.map=e}};function HR(t){this.l=t||AG,K.PerformanceNavigationTiming?(t=K.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(K.g&&K.g.Ka&&K.g.Ka()&&K.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var AG=10;function zR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function qR(t){return t.h?1:t.g?t.g.size:0}function Eb(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function $b(t,e){t.g?t.g.add(e):t.h=e}function GR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}HR.prototype.cancel=function(){if(this.i=WR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function WR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Sb(t.i)}var MG=class{stringify(t){return K.JSON.stringify(t,void 0)}parse(t){return K.JSON.parse(t,void 0)}};function RG(){this.g=new MG}function PG(t,e,n){let r=n||"";try{LR(t,function(i,s){let o=i;Au(i)&&(o=Ob(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function NG(t,e){let n=new Kp;if(K.Image){let r=new Image;r.onload=Mp(Op,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Mp(Op,n,r,"TestLoadImage: error",!1,e),r.onabort=Mp(Op,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Mp(Op,n,r,"TestLoadImage: timeout",!1,e),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Op(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ou(t){this.l=t.ec||null,this.j=t.ob||!1}Et(Ou,jb);Ou.prototype.g=function(){return new eg(this.l,this.j)};Ou.prototype.i=function(t){return function(){return t}}({});function eg(t,e){Dt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Hb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Et(eg,Dt);var Hb=0;k=eg.prototype;k.open=function(t,e){if(this.readyState!=Hb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Su(this)};k.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||K).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fu(this)),this.readyState=Hb};k.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Su(this)),this.g&&(this.readyState=3,Su(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;KR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function KR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}k.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fu(this):Su(this),this.readyState==3&&KR(this)}};k.Za=function(t){this.g&&(this.response=this.responseText=t,Fu(this))};k.Ya=function(t){this.g&&(this.response=t,Fu(this))};k.ka=function(){this.g&&Fu(this)};function Fu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Su(t)}k.setRequestHeader=function(t,e){this.v.append(t,e)};k.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Su(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(eg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var kG=K.JSON.parse;function Ze(t){Dt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=QR,this.L=this.M=!1}Et(Ze,Dt);var QR="",OG=/^https?$/i,FG=["POST","PUT"];k=Ze.prototype;k.Oa=function(t){this.M=t};k.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wb.g(),this.C=this.u?rR(this.u):rR(wb),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){oR(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=K.FormData&&t instanceof K.FormData,!(0<=dR(FG,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{XR(this),0<this.B&&((this.L=VG(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=Lb(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){oR(this,s)}};function VG(t){return Ka&&typeof t.timeout=="number"&&t.ontimeout!==void 0}k.ua=function(){typeof Tb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))};function oR(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,YR(t),tg(t)}function YR(t){t.F||(t.F=!0,Nt(t,"complete"),Nt(t,"error"))}k.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),tg(this))};k.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tg(this,!0)),Ze.$.N.call(this)};k.La=function(){this.s||(this.G||this.v||this.l?ZR(this):this.kb())};k.kb=function(){ZR(this)};function ZR(t){if(t.h&&typeof Tb<"u"&&(!t.C[1]||Er(t)!=4||t.da()!=2)){if(t.v&&Er(t)==4)Lb(t.La,0,t);else if(Nt(t,"readystatechange"),Er(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(jR)[1]||null;!i&&K.self&&K.self.location&&(i=K.self.location.protocol.slice(0,-1)),r=!OG.test(i?i.toLowerCase():"")}n=r}if(n)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var s=2<Er(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",YR(t)}}finally{tg(t)}}}}function tg(t,e){if(t.g){XR(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function XR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(K.clearTimeout(t.A),t.A=null)}k.isActive=function(){return!!this.g};function Er(t){return t.g?t.g.readyState:0}k.da=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}};k.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),kG(e)}};function aR(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case QR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function LG(t){let e={};t=(t.g&&2<=Er(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(bu(t[r]))continue;var n=uG(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}oG(e,function(r){return r.join(", ")})}k.Ia=function(){return this.m};k.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function JR(t){let e="";return Mb(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=JR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Fe(t,e,n))}function mu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function eP(t){this.Ga=0,this.j=[],this.l=new Kp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mu("baseRetryDelayMs",5e3,t),this.hb=mu("retryDelaySeedMs",1e4,t),this.eb=mu("forwardChannelMaxRetries",2,t),this.xa=mu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new HR(t&&t.concurrentRequestLimit),this.Ja=new RG,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k=eP.prototype;k.ra=8;k.H=1;function qb(t){if(tP(t),t.H==3){var e=t.W++,n=ni(t.I);if(Fe(n,"SID",t.K),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Vu(t,n),e=new Nu(t,t.l,e),e.L=2,e.A=Jp(ni(n)),n=!1,K.navigator&&K.navigator.sendBeacon)try{n=K.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&K.Image&&(new Image().src=e.A,n=!0),n||(e.g=lP(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ku(e)}aP(t)}function ng(t){t.g&&(Wb(t),t.g.cancel(),t.g=null)}function tP(t){ng(t),t.u&&(K.clearTimeout(t.u),t.u=null),jp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&K.clearTimeout(t.m),t.m=null)}function rg(t){if(!zR(t.i)&&!t.m){t.m=!0;var e=t.Na;Du||DR(),Eu||(Du(),Eu=!0),Fb.add(e,t),t.C=0}}function jG(t,e){return qR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ru($t(t.Na,t,e),oP(t,t.C)),t.C++,!0)}k.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Nu(this,this.l,t),s=this.s;if(this.U&&(s?(s=gR(s),mR(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=nP(this,i,e),n=ni(this.I),Fe(n,"RID",t),Fe(n,"CVER",22),this.F&&Fe(n,"X-HTTP-Session-Id",this.F),Vu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(JR(s)))+"&"+e:this.o&&zb(n,this.o,s)),$b(this.i,i),this.bb&&Fe(n,"TYPE","init"),this.P?(Fe(n,"$req",e),Fe(n,"SID","null"),i.aa=!0,Ib(i,n,null)):Ib(i,n,e),this.H=2}}else this.H==3&&(t?cR(this,t):this.j.length==0||zR(this.i)||cR(this))};function cR(t,e){var n;e?n=e.m:n=t.W++;let r=ni(t.I);Fe(r,"SID",t.K),Fe(r,"RID",n),Fe(r,"AID",t.V),Vu(t,r),t.o&&t.s&&zb(r,t.o,t.s),n=new Nu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=nP(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),$b(t.i,n),Ib(n,r,e)}function Vu(t,e){t.na&&Mb(t.na,function(n,r){Fe(e,r,n)}),t.h&&LR({},function(n,r){Fe(e,r,n)})}function nP(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$t(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{PG(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function rP(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Du||DR(),Eu||(Du(),Eu=!0),Fb.add(e,t),t.A=0}}function Gb(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ru($t(t.Ma,t),oP(t,t.A)),t.A++,!0)}k.Ma=function(){if(this.u=null,iP(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ru($t(this.jb,this),t)}};k.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jt(10),ng(this),iP(this))};function Wb(t){t.B!=null&&(K.clearTimeout(t.B),t.B=null)}function iP(t){t.g=new Nu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ni(t.wa);Fe(e,"RID","rpc"),Fe(e,"SID",t.K),Fe(e,"AID",t.V),Fe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Fe(e,"TO",t.qa),Fe(e,"TYPE","xmlhttp"),Vu(t,e),t.o&&t.s&&zb(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Jp(ni(e)),n.u=null,n.S=!0,kR(n,t)}k.ib=function(){this.v!=null&&(this.v=null,ng(this),Gb(this),Jt(19))};function jp(t){t.v!=null&&(K.clearTimeout(t.v),t.v=null)}function sP(t,e){var n=null;if(t.g==e){jp(t),Wb(t),t.g=null;var r=2}else if(Eb(t.i,e))n=e.F,GR(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Qp(),Nt(r,new AR(r,n)),rg(t)}else rP(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&jG(t,e)||r==2&&Gb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:to(t,5);break;case 4:to(t,10);break;case 3:to(t,6);break;default:to(t,2)}}}function oP(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function to(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=$t(t.pb,t);n||(n=new no("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||Vp(n,"https"),Jp(n)),NG(n.toString(),r)}else Jt(2);t.H=0,t.h&&t.h.za(e),aP(t),tP(t)}k.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Jt(2)):(this.l.info("Failed to ping google.com"),Jt(1))};function aP(t){if(t.H=0,t.ma=[],t.h){let e=WR(t.i);(e.length!=0||t.j.length!=0)&&(JM(t.ma,e),JM(t.ma,t.j),t.i.i.length=0,Sb(t.j),t.j.length=0),t.h.ya()}}function cP(t,e,n){var r=n instanceof no?ni(n):new no(n);if(r.g!="")e&&(r.g=e+"."+r.g),Lp(r,r.m);else{var i=K.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new no(null);r&&Vp(s,r),e&&(s.g=e),i&&Lp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Fe(r,n,e),Fe(r,"VER",t.ra),Vu(t,r),r}function lP(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ze(new Ou({ob:n})):new Ze(t.va),e.Oa(t.J),e}k.isActive=function(){return!!this.h&&this.h.isActive(this)};function uP(){}k=uP.prototype;k.Ba=function(){};k.Aa=function(){};k.za=function(){};k.ya=function(){};k.isActive=function(){return!0};k.Va=function(){};function Bp(){if(Ka&&!(10<=Number(nG)))throw Error("Environmental error: no available transport.")}Bp.prototype.g=function(t,e){return new En(t,e)};function En(t,e){Dt.call(this),this.g=new eP(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!bu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ya(this)}Et(En,Dt);En.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=cP(t,null,t.Y),rg(t)};En.prototype.close=function(){qb(this.g)};En.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ob(t),t=n);e.j.push(new SG(e.fb++,t)),e.H==3&&rg(e)};En.prototype.N=function(){this.g.h=null,delete this.j,qb(this.g),delete this.g,En.$.N.call(this)};function dP(t){Bb.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Et(dP,Bb);function hP(){Ub.call(this),this.status=1}Et(hP,Ub);function Ya(t){this.g=t}Et(Ya,uP);Ya.prototype.Ba=function(){Nt(this.g,"a")};Ya.prototype.Aa=function(t){Nt(this.g,new dP(t))};Ya.prototype.za=function(t){Nt(this.g,new hP)};Ya.prototype.ya=function(){Nt(this.g,"b")};function BG(){this.blockSize=-1}function tr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Et(tr,BG);tr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ub(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}tr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)ub(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ub(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ub(this,r),i=0;break}}this.h=i,this.i+=e};tr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function De(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var UG={};function Kb(t){return-128<=t&&128>t?Jq(t,function(e){return new De([e|0],0>e?-1:0)}):new De([t|0],0>t?-1:0)}function xr(t){if(isNaN(t)||!isFinite(t))return Wa;if(0>t)return Pt(xr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=xb;return new De(e,0)}function fP(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Pt(fP(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=xr(Math.pow(e,8)),r=Wa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=xr(Math.pow(e,s)),r=r.R(s).add(xr(o))):(r=r.R(n),r=r.add(xr(o)))}return r}var xb=4294967296,Wa=Kb(0),Cb=Kb(1),lR=Kb(16777216);k=De.prototype;k.ea=function(){if(Fn(this))return-Pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:xb+r)*e,e*=xb}return t};k.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ti(this))return"0";if(Fn(this))return"-"+Pt(this).toString(t);for(var e=xr(Math.pow(t,6)),n=this,r="";;){var i=$p(n,e).g;n=Up(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ti(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};k.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ti(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Fn(t){return t.h==-1}k.X=function(t){return t=Up(this,t),Fn(t)?-1:ti(t)?0:1};function Pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new De(n,~t.h).add(Cb)}k.abs=function(){return Fn(this)?Pt(this):this};k.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new De(n,n[n.length-1]&-2147483648?-1:0)};function Up(t,e){return t.add(Pt(e))}k.R=function(t){if(ti(this)||ti(t))return Wa;if(Fn(this))return Fn(t)?Pt(this).R(Pt(t)):Pt(Pt(this).R(t));if(Fn(t))return Pt(this.R(Pt(t)));if(0>this.X(lR)&&0>t.X(lR))return xr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Fp(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Fp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Fp(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Fp(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new De(n,0)};function Fp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function yu(t,e){this.g=t,this.h=e}function $p(t,e){if(ti(e))throw Error("division by zero");if(ti(t))return new yu(Wa,Wa);if(Fn(t))return e=$p(Pt(t),e),new yu(Pt(e.g),Pt(e.h));if(Fn(e))return e=$p(t,Pt(e)),new yu(Pt(e.g),e.h);if(30<t.g.length){if(Fn(t)||Fn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Cb,r=e;0>=r.X(t);)n=uR(n),r=uR(r);var i=qa(n,1),s=qa(r,1);for(r=qa(r,2),n=qa(n,2);!ti(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=qa(r,1),n=qa(n,1)}return e=Up(t,i.R(e)),new yu(i,e)}for(i=Wa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=xr(n),o=s.R(e);Fn(o)||0<o.X(t);)n-=r,s=xr(n),o=s.R(e);ti(s)&&(s=Cb),i=i.add(s),t=Up(t,o)}return new yu(i,t)}k.gb=function(t){return $p(this,t).h};k.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new De(n,this.h&t.h)};k.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new De(n,this.h|t.h)};k.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new De(n,this.h^t.h)};function uR(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new De(n,t.h)}function qa(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new De(i,t.h)}Bp.prototype.createWebChannel=Bp.prototype.g;En.prototype.send=En.prototype.u;En.prototype.open=En.prototype.m;En.prototype.close=En.prototype.close;Yp.NO_ERROR=0;Yp.TIMEOUT=8;Yp.HTTP_ERROR=6;MR.COMPLETE="complete";RR.EventType=Pu;Pu.OPEN="a";Pu.CLOSE="b";Pu.ERROR="c";Pu.MESSAGE="d";Dt.prototype.listen=Dt.prototype.O;Ze.prototype.listenOnce=Ze.prototype.P;Ze.prototype.getLastError=Ze.prototype.Sa;Ze.prototype.getLastErrorCode=Ze.prototype.Ia;Ze.prototype.getStatus=Ze.prototype.da;Ze.prototype.getResponseJson=Ze.prototype.Wa;Ze.prototype.getResponseText=Ze.prototype.ja;Ze.prototype.send=Ze.prototype.ha;Ze.prototype.setWithCredentials=Ze.prototype.Oa;tr.prototype.digest=tr.prototype.l;tr.prototype.reset=tr.prototype.reset;tr.prototype.update=tr.prototype.j;De.prototype.add=De.prototype.add;De.prototype.multiply=De.prototype.R;De.prototype.modulo=De.prototype.gb;De.prototype.compare=De.prototype.X;De.prototype.toNumber=De.prototype.ea;De.prototype.toString=De.prototype.toString;De.prototype.getBits=De.prototype.D;De.fromNumber=xr;De.fromString=fP;var pP=nr.createWebChannelTransport=function(){return new Bp},gP=nr.getStatEventTarget=function(){return Qp()},ig=nr.ErrorCode=Yp,mP=nr.EventType=MR,yP=nr.Event=ro,Qb=nr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Aae=nr.FetchXmlHttpFactory=Ou,Lu=nr.WebChannel=RR,vP=nr.XhrIo=Ze,_P=nr.Md5=tr,io=nr.Integer=De;var wP="@firebase/firestore";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var Tc="10.11.0";var Zi=new th("@firebase/firestore");function tc(){return Zi.logLevel}function wN(t){Zi.setLogLevel(t)}function T(t,...e){if(Zi.logLevel<=lr.DEBUG){let n=e.map(XI);Zi.debug(`Firestore (${Tc}): ${t}`,...n)}}function st(t,...e){if(Zi.logLevel<=lr.ERROR){let n=e.map(XI);Zi.error(`Firestore (${Tc}): ${t}`,...n)}}function Ln(t,...e){if(Zi.logLevel<=lr.WARN){let n=e.map(XI);Zi.warn(`Firestore (${Tc}): ${t}`,...n)}}function XI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function F(t="Unexpected state"){let e=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: `+t;throw st(e),new Error(e)}function B(t,e){t||F()}function bN(t,e){t||F()}function P(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=class extends _x{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},e0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}},t0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},n0=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>D(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(B(typeof r.accessToken=="string"),new gg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new pt(e)}},r0=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},i0=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new r0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},s0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},o0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,T("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new s0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function $G(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var mg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=$G(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Y(t,e){return t<e?-1:t>e?1:0}function uc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function IN(t){return t+"\0"}var ze=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var $=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ze(0,0))}static max(){return new t(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yg=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&F(),r===void 0?r=e.length-n:r>e.length-n&&F(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},pe=class t extends yg{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new C(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},HG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=class t extends yg{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return HG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new C(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new C(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new C(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var R=class t{constructor(e){this.path=e}static fromPath(e){return new t(pe.fromString(e))}static fromName(e){return new t(pe.fromString(e).popFirst(5))}static empty(){return new t(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new pe(e.slice()))}};var dc=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function a0(t){return t.fields.find(e=>e.kind===2)}function oo(t){return t.fields.filter(e=>e.kind!==2)}dc.UNKNOWN_ID=-1;var ac=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Yu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,jn.min())}};function DN(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=$.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new jn(i,R.empty(),e)}function EN(t){return new jn(t.readTime,t.key,-1)}var jn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t($.min(),R.empty(),-1)}static max(){return new t($.max(),R.empty(),-1)}};function JI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=R.comparator(t.documentKey,e.documentKey),n!==0?n:Y(t.largestBatchId,e.largestBatchId))}var xN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function os(t){return D(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==xN)throw t;T("LocalStore","Unexpectedly lost primary lease")})}var I=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var _g=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new gt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new fo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=eD(r.target.error);this.V.reject(new fo(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new fo(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(T("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new l0(n)}},si=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ul())===12.2&&st("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return T("SimpleDb","Removing database:",e),ao(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!eh())return!1;if(t.C())return!0;let e=ul(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return D(this,null,function*(){return this.db||(T("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new fo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new C(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new C(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new fo(e,o))},i.onupgradeneeded=s=>{T("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{T("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return D(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=_g.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),I.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(T("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},c0=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ao(this.k.delete())}},fo=class extends C{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function as(t){return t.name==="IndexedDbTransactionError"}var l0=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(T("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(T("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ao(r)}add(e){return T("SimpleDb","ADD",this.store.name,e,e),ao(this.store.add(e))}get(e){return ao(this.store.get(e)).next(n=>(n===void 0&&(n=null),T("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return T("SimpleDb","DELETE",this.store.name,e),ao(this.store.delete(e))}count(){return T("SimpleDb","COUNT",this.store.name),ao(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new I((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new I((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){T("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new I((r,i)=>{n.onerror=s=>{let o=eD(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new I((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new c0(a),l=n(a.primaryKey,a.value,c);if(l instanceof I){let u=l.catch(d=>(c.done(),I.reject(d)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>I.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ao(t){return new I((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=eD(r.target.error);n(i)}})}var bP=!1;function eD(t){let e=si.S(ul());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new C("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bP||(bP=!0,setTimeout(()=>{throw r},0)),r}}return t}var u0=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){T("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>D(this,null,function*(){this.task=null;try{T("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){as(n)?T("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield os(n)}yield this.ee(6e4)}))}},d0=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return D(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,s=!0;return I.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return T("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(T("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=EN(s);JI(o,r)>0&&(r=o)}),new jn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var xn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function vd(t){return t==null}function Zu(t){return t===0&&1/t==-1/0}function CN(t){return typeof t=="number"&&Number.isInteger(t)&&!Zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function en(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IP(e)),e=zG(t.get(n),e);return IP(e)}function zG(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function IP(t){return t+""}function Cr(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&F(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:F()}s=o+2}return new pe(r)}var DP=["userId","batchId"];function lg(t,e){return[t,en(e)]}function TN(t,e,n){return[t,en(e),n]}var qG={},GG=["prefixPath","collectionGroup","readTime","documentId"],WG=["prefixPath","collectionGroup","documentId"],KG=["collectionGroup","readTime","prefixPath","documentId"],QG=["canonicalId","targetId"],YG=["targetId","path"],ZG=["path","targetId"],XG=["collectionId","parent"],JG=["indexId","uid"],e9=["uid","sequenceNumber"],t9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n9=["indexId","uid","orderedDocumentKey"],r9=["userId","collectionPath","documentId"],i9=["userId","collectionPath","largestBatchId"],s9=["userId","collectionGroup","largestBatchId"],SN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o9=[...SN,"documentOverlays"],AN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MN=AN,RN=[...MN,"indexConfiguration","indexState","indexEntries"],a9=RN;var Xu=class extends vg{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Ct(t,e){let n=P(t);return si.M(n.ae,e)}function EP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||Sr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}},oc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();let e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}};Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},wg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Za(t){return t.hasNext()?t.getNext():void 0}var Cn=class t{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new t([])}unionWith(e){let n=new Se(ot.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var bg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function NN(){return typeof atob<"u"}var xt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bg("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var c9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(B(!!t),typeof t=="string"){let e=0,n=c9.exec(t);if(B(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xi(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}function dm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tD(t){let e=t.mapValue.fields.__previous_value__;return dm(e)?tD(e):e}function Ju(t){let e=oi(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var h0=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ji=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Qi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ug={nullValue:"NULL_VALUE"};function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dm(t)?4:kN(t)?9007199254740991:10:F()}function Rr(t,e){if(t===e)return!0;let n=po(t);if(n!==po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ju(t).isEqual(Ju(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=oi(i.timestampValue),a=oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xi(i.bytesValue).isEqual(Xi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?Zu(o)===Zu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(EP(o)!==EP(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Rr(o[c],a[c])))return!1;return!0}(t,e);default:return F()}}function ed(t,e){return(t.values||[]).find(n=>Rr(n,e))!==void 0}function es(t,e){if(t===e)return 0;let n=po(t),r=po(e);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Xe(s.integerValue||s.doubleValue),c=Xe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return xP(t.timestampValue,e.timestampValue);case 4:return xP(Ju(t),Ju(e));case 5:return Y(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Xi(s),c=Xi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Y(a[l],c[l]);if(u!==0)return u}return Y(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Y(Xe(s.latitude),Xe(o.latitude));return a!==0?a:Y(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=es(a[l],c[l]);if(u)return u}return Y(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Qi.mapValue&&o===Qi.mapValue)return 0;if(s===Qi.mapValue)return 1;if(o===Qi.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=Y(c[d],u[d]);if(h!==0)return h;let f=es(a[c[d]],l[u[d]]);if(f!==0)return f}return Y(c.length,u.length)}(t.mapValue,e.mapValue);default:throw F()}}function xP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Y(t,e);let n=oi(t),r=oi(e),i=Y(n.seconds,r.seconds);return i!==0?i:Y(n.nanos,r.nanos)}function hc(t){return f0(t)}function f0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return R.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=f0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${f0(n.fields[o])}`;return i+"}"}(t.mapValue):F()}function go(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function p0(t){return!!t&&"integerValue"in t}function td(t){return!!t&&"arrayValue"in t}function CP(t){return!!t&&"nullValue"in t}function TP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dg(t){return!!t&&"mapValue"in t}function qu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function l9(t){return"nullValue"in t?ug:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?go(Ji.empty(),R.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:F()}function u9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?go(Ji.empty(),R.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Qi:F()}function SP(t,e){let n=es(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function AP(t,e){let n=es(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var qt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=qu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());dg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xo(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(qu(this.value))}};function ON(t){let e=[];return xo(t.fields,(n,r)=>{let i=new ot([n]);if(dg(r)){let s=ON(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}var mt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,$.min(),$.min(),$.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,$.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,$.min(),$.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,$.min(),$.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Pr=class{constructor(e,n){this.position=e,this.inclusive=n}};function MP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=R.comparator(R.fromName(o.referenceValue),n.key):r=es(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function RP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rr(t.position[n],e.position[n]))return!1;return!0}var mo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function d9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ig=class{},le=class t extends Ig{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new y0(e,n,r):n==="array-contains"?new w0(e,r):n==="in"?new Dg(e,r):n==="not-in"?new b0(e,r):n==="array-contains-any"?new I0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new v0(e,r):new _0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(es(n,this.value)):n!==null&&po(this.value)===po(n)&&this.matchesComparison(es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ee=class t extends Ig{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return fc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function fc(t){return t.op==="and"}function g0(t){return t.op==="or"}function nD(t){return FN(t)&&fc(t)}function FN(t){for(let e of t.filters)if(e instanceof Ee)return!1;return!0}function m0(t){if(t instanceof le)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(nD(t))return t.filters.map(e=>m0(e)).join(",");{let e=t.filters.map(n=>m0(n)).join(",");return`${t.op}(${e})`}}function VN(t,e){return t instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&Rr(r.value,i.value)}(t,e):t instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&VN(o,i.filters[a]),!0):!1}(t,e):void F()}function LN(t,e){let n=t.filters.concat(e);return Ee.create(n,t.op)}function jN(t){return t instanceof le?function(n){return`${n.field.canonicalString()} ${n.op} ${hc(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(jN).join(" ,")+"}"}(t):"Filter"}var y0=class extends le{constructor(e,n,r){super(e,n,r),this.key=R.fromName(r.referenceValue)}matches(e){let n=R.comparator(e.key,this.key);return this.matchesComparison(n)}},v0=class extends le{constructor(e,n){super(e,"in",n),this.keys=BN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},_0=class extends le{constructor(e,n){super(e,"not-in",n),this.keys=BN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function BN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>R.fromName(r.referenceValue))}var w0=class extends le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return td(n)&&ed(n.arrayValue,this.value)}},Dg=class extends le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ed(this.value.arrayValue,n)}},b0=class extends le{constructor(e,n){super(e,"not-in",n)}matches(e){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ed(this.value.arrayValue,n)}},I0=class extends le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!td(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ed(this.value.arrayValue,r))}};var D0=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function E0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new D0(t,e,n,r,i,s,o)}function yo(t){let e=P(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>m0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hc(r)).join(",")),e.ce=n}return e.ce}function _d(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!RP(t.startAt,e.startAt)&&RP(t.endAt,e.endAt)}function Eg(t){return R.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xg(t,e){return t.filters.filter(n=>n instanceof le&&n.field.isEqual(e))}function PP(t,e,n){let r=ug,i=!0;for(let s of xg(t,e)){let o=ug,a=!0;switch(s.op){case"<":case"<=":o=l9(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ug}SP({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];SP({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function NP(t,e,n){let r=Qi,i=!0;for(let s of xg(t,e)){let o=Qi,a=!0;switch(s.op){case">=":case">":o=u9(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Qi}AP({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];AP({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var rr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function UN(t,e,n,r,i,s,o,a){return new rr(t,e,n,r,i,s,o,a)}function Sc(t){return new rr(t)}function kP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rD(t){return t.collectionGroup!==null}function cc(t){let e=P(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Se(ot.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new mo(s,r))}),n.has(ot.keyField().canonicalString())||e.le.push(new mo(ot.keyField(),r))}return e.le}function tn(t){let e=P(t);return e.he||(e.he=h9(e,cc(t))),e.he}function h9(t,e){if(t.limitType==="F")return E0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new mo(i.field,s)});let n=t.endAt?new Pr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pr(t.startAt.position,t.startAt.inclusive):null;return E0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function x0(t,e){let n=t.filters.concat([e]);return new rr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cg(t,e,n){return new rr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return _d(tn(t),tn(e))&&t.limitType===e.limitType}function $N(t){return`${yo(tn(t))}|lt:${t.limitType}`}function nc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jN(i)).join(", ")}]`),vd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hc(i)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function bd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):R.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of cc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=MP(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,cc(r),i)||r.endAt&&!function(o,a,c){let l=MP(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,cc(r),i))}(t,e)}function HN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zN(t){return(e,n)=>{let r=!1;for(let i of cc(t)){let s=f9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function f9(t,e,n){let r=t.field.isKeyField()?R.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?es(c,l):F()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}var Nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return PN(this.inner)}size(){return this.innerSize}};var p9=new Ve(R.comparator);function un(){return p9}var qN=new Ve(R.comparator);function Hu(...t){let e=qN;for(let n of t)e=e.insert(n.key,n);return e}function GN(t){let e=qN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tr(){return Gu()}function WN(){return Gu()}function Gu(){return new Nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var g9=new Ve(R.comparator),m9=new Se(R.comparator);function X(...t){let e=m9;for(let n of t)e=e.add(n);return e}var y9=new Se(Y);function iD(){return y9}function KN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function QN(t){return{integerValue:""+t}}function YN(t,e){return CN(e)?QN(e):KN(t,e)}var pc=class{constructor(){this._=void 0}};function v9(t,e,n){return t instanceof ts?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dm(s)&&(s=tD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ai?XN(t,e):t instanceof ci?JN(t,e):function(i,s){let o=ZN(i,s),a=OP(o)+OP(i.Ie);return p0(o)&&p0(i.Ie)?QN(a):KN(i.serializer,a)}(t,e)}function _9(t,e,n){return t instanceof ai?XN(t,e):t instanceof ci?JN(t,e):n}function ZN(t,e){return t instanceof ns?function(r){return p0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ts=class extends pc{},ai=class extends pc{constructor(e){super(),this.elements=e}};function XN(t,e){let n=e1(e);for(let r of t.elements)n.some(i=>Rr(i,r))||n.push(r);return{arrayValue:{values:n}}}var ci=class extends pc{constructor(e){super(),this.elements=e}};function JN(t,e){let n=e1(e);for(let r of t.elements)n=n.filter(i=>!Rr(i,r));return{arrayValue:{values:n}}}var ns=class extends pc{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function OP(t){return Xe(t.integerValue||t.doubleValue)}function e1(t){return td(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var vo=class{constructor(e,n){this.field=e,this.transform=n}};function w9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ai&&i instanceof ai||r instanceof ci&&i instanceof ci?uc(r.elements,i.elements,Rr):r instanceof ns&&i instanceof ns?Rr(r.Ie,i.Ie):r instanceof ts&&i instanceof ts}(t.transform,e.transform)}var C0=class{constructor(e,n){this.version=e,this.transformResults=n}},Je=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var gc=class{};function t1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new is(t.key,Je.none()):new rs(t.key,t.data,Je.none());{let n=t.data,r=qt.empty(),i=new Se(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ir(t.key,r,new Cn(i.toArray()),Je.none())}}function b9(t,e,n){t instanceof rs?function(i,s,o){let a=i.value.clone(),c=VP(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ir?function(i,s,o){if(!hg(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=VP(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(n1(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wu(t,e,n,r){return t instanceof rs?function(s,o,a,c){if(!hg(s.precondition,o))return a;let l=s.value.clone(),u=LP(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ir?function(s,o,a,c){if(!hg(s.precondition,o))return a;let l=LP(s.fieldTransforms,c,o),u=o.data;return u.setAll(n1(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return hg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function I9(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=ZN(r.transform,i||null);s!=null&&(n===null&&(n=qt.empty()),n.set(r.field,s))}return n||null}function FP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uc(r,i,(s,o)=>w9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var rs=class extends gc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ir=class extends gc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function n1(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function VP(t,e,n){let r=new Map;B(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_9(o,a,n[i]))}return r}function LP(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,v9(s,o,e))}return r}var is=class extends gc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nd=class extends gc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rd=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&b9(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Wu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=WN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=t1(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument($.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(n,r)=>FP(n,r))&&uc(this.baseMutations,e.baseMutations,(n,r)=>FP(n,r))}},T0=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){B(e.mutations.length===r.length);let i=function(){return g9}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var id=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var S0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ht,fe;function r1(t){switch(t){default:return F();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function i1(t){if(t===void 0)return st("GRPC error has no .code"),x.UNKNOWN;switch(t){case ht.OK:return x.OK;case ht.CANCELLED:return x.CANCELLED;case ht.UNKNOWN:return x.UNKNOWN;case ht.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ht.INTERNAL:return x.INTERNAL;case ht.UNAVAILABLE:return x.UNAVAILABLE;case ht.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ht.NOT_FOUND:return x.NOT_FOUND;case ht.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ht.ABORTED:return x.ABORTED;case ht.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ht.DATA_LOSS:return x.DATA_LOSS;default:return F()}}(fe=ht||(ht={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var jP=null;function s1(){return new TextEncoder}var D9=new io([4294967295,4294967295],0);function BP(t){let e=s1().encode(t),n=new _P;return n.update(e),new Uint8Array(n.digest())}function UP(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new io([n,r],0),new io([i,s],0)]}var A0=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ho(`Invalid padding: ${n}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ho(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=io.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(io.fromNumber(r)));return i.compare(D9)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=BP(e),[r,i]=UP(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=BP(e),[r,i]=UP(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ho=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,od.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t($.min(),i,new Ve(Y),un(),X())}},od=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,X(),X(),X())}};var lc=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Tg=class{constructor(e,n){this.targetId=e,this.fe=n}},Sg=class{constructor(e,n,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ag=class{constructor(){this.ge=0,this.pe=HP(),this.ye=xt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=X(),n=X(),r=X();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:F()}}),new od(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=HP()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},M0=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=un(),this.Qe=$P(),this.Ke=new Ve(Y)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:F()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Eg(s))if(r===0){let o=new R(s.path);this.We(n,o,mt.newNoDocument(o,$.min()))}else B(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}jP?.tt(function(u,d,h,f,p){var g,m,y,v,_,b;let w={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},E=d.unchangedNames;return E&&(w.bloomFilter={applied:p===0,hashCount:(g=E?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(v=(y=(m=E?.bits)===null||m===void 0?void 0:m.bitmap)===null||y===void 0?void 0:y.length)!==null&&v!==void 0?v:0,padding:(b=(_=E?.bits)===null||_===void 0?void 0:_.padding)!==null&&b!==void 0?b:0,mightContain:A=>{var S;return(S=f?.mightContain(A))!==null&&S!==void 0&&S}}),w}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Xi(r).toUint8Array()}catch(c){if(c instanceof bg)return Ln("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new A0(o,i,s)}catch(c){return Ln(c instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Eg(a.target)){let c=new R(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,mt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=X();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new sd(e,n,this.Ke,this.qe,r);return this.qe=un(),this.Qe=$P(),this.Ke=new Ve(Y),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ag,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Se(Y),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||T("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Ag),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function $P(){return new Ve(R.comparator)}function HP(){return new Ve(R.comparator)}var E9={asc:"ASCENDING",desc:"DESCENDING"},x9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C9={and:"AND",or:"OR"},R0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function P0(t,e){return t.useProto3Json||vd(e)?e:{value:e}}function mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T9(t,e){return mc(t,e.toTimestamp())}function at(t){return B(!!t),$.fromTimestamp(function(n){let r=oi(n);return new ze(r.seconds,r.nanos)}(t))}function sD(t,e){return N0(t,e).canonicalString()}function N0(t,e){let n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function a1(t){let e=pe.fromString(t);return B(y1(e)),e}function ad(t,e){return sD(t.databaseId,e.path)}function Ar(t,e){let n=a1(e);if(n.get(1)!==t.databaseId.projectId)throw new C(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new R(u1(n))}function c1(t,e){return sD(t.databaseId,e)}function l1(t){let e=a1(t);return e.length===4?pe.emptyPath():u1(e)}function k0(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function u1(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zP(t,e,n){return{name:ad(t,e),fields:n.value.mapValue.fields}}function d1(t,e,n){let r=Ar(t,e.name),i=at(e.updateTime),s=e.createTime?at(e.createTime):$.min(),o=new qt({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function S9(t,e){return"found"in e?function(r,i){B(!!i.found),i.found.name,i.found.updateTime;let s=Ar(r,i.found.name),o=at(i.found.updateTime),a=i.found.createTime?at(i.found.createTime):$.min(),c=new qt({mapValue:{fields:i.found.fields}});return mt.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){B(!!i.missing),B(!!i.readTime);let s=Ar(r,i.missing),o=at(i.readTime);return mt.newNoDocument(s,o)}(t,e):F()}function A9(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(B(u===void 0||typeof u=="string"),xt.fromBase64String(u||"")):(B(u===void 0||u instanceof Buffer||u instanceof Uint8Array),xt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?x.UNKNOWN:i1(l.code);return new C(u,l.message||"")}(o);n=new Sg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ar(t,r.document.name),s=at(r.document.updateTime),o=r.document.createTime?at(r.document.createTime):$.min(),a=new qt({mapValue:{fields:r.document.fields}}),c=mt.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new lc(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ar(t,r.document),s=r.readTime?at(r.readTime):$.min(),o=mt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ar(t,r.document),s=r.removedTargetIds||[];n=new lc([],s,i,null)}else{if(!("filter"in e))return F();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new S0(i,s),a=r.targetId;n=new Tg(a,o)}}return n}function cd(t,e){let n;if(e instanceof rs)n={update:zP(t,e.key,e.value)};else if(e instanceof is)n={delete:ad(t,e.key)};else if(e instanceof ir)n={update:zP(t,e.key,e.data),updateMask:O9(e.fieldMask)};else{if(!(e instanceof nd))return F();n={verify:ad(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ts)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ai)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ci)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ns)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw F()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:T9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:F()}(t,e.precondition)),n}function O0(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Je.updateTime(at(s.updateTime)):s.exists!==void 0?Je.exists(s.exists):Je.none()}(e.currentDocument):Je.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new ts;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new ai(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new ci(u)}else"increment"in a?c=new ns(o,a.increment):F();let l=ot.fromServerFormat(a.fieldPath);return new vo(l,c)}(t,i)):[];if(e.update){e.update.name;let i=Ar(t,e.update.name),s=new qt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Cn(l.map(u=>ot.fromServerFormat(u)))}(e.updateMask);return new ir(i,s,o,n,r)}return new rs(i,s,n,r)}if(e.delete){let i=Ar(t,e.delete);return new is(i,n)}if(e.verify){let i=Ar(t,e.verify);return new nd(i,n)}return F()}function M9(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?at(i.updateTime):at(s);return o.isEqual($.min())&&(o=at(s)),new C0(o,i.transformResults||[])}(n,e))):[]}function h1(t,e){return{documents:[c1(t,e.path)]}}function f1(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=c1(t,i);let s=function(l){if(l.length!==0)return m1(Ee.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:rc(h.field),direction:P9(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=P0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function p1(t){let e=l1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){B(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=g1(d);return h instanceof Ee&&nD(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new mo(ic(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,vd(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Pr(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Pr(f,h)}(n.endAt)),UN(e,i,o,s,a,"F",c,l)}function R9(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function g1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ic(n.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ic(n.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ic(n.unaryFilter.field);return le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ic(n.unaryFilter.field);return le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(t):t.fieldFilter!==void 0?function(n){return le.create(ic(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>g1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return F()}}(n.compositeFilter.op))}(t):F()}function P9(t){return E9[t]}function N9(t){return x9[t]}function k9(t){return C9[t]}function rc(t){return{fieldPath:t.canonicalString()}}function ic(t){return ot.fromServerFormat(t.fieldPath)}function m1(t){return t instanceof le?function(n){if(n.op==="=="){if(TP(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NAN"}};if(CP(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(TP(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NOT_NAN"}};if(CP(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rc(n.field),op:N9(n.op),value:n.value}}}(t):t instanceof Ee?function(n){let r=n.getFilters().map(i=>m1(i));return r.length===1?r[0]:{compositeFilter:{op:k9(n.op),filters:r}}}(t):F()}function O9(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var yc=class t{constructor(e,n,r,i,s=$.min(),o=$.min(),a=xt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Mg=class{constructor(e){this.ct=e}};function F9(t,e){let n;if(e.document)n=d1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=R.fromSegments(e.noDocument.path),i=wo(e.noDocument.readTime);n=mt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{let r=R.fromSegments(e.unknownDocument.path),i=wo(e.unknownDocument.version);n=mt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new ze(i[0],i[1]);return $.fromTimestamp(s)}(e.readTime)),n}function qP(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Rg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ad(s,o.key),fields:o.data.value.mapValue.fields,updateTime:mc(s,o.version.toTimestamp()),createTime:mc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:_o(e.version)};else{if(!e.isUnknownDocument())return F();r.unknownDocument={path:n.path.toArray(),version:_o(e.version)}}return r}function Rg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function _o(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wo(t){let e=new ze(t.seconds,t.nanoseconds);return $.fromTimestamp(e)}function co(t,e){let n=(e.baseMutations||[]).map(s=>O0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>O0(t.ct,s)),i=ze.fromMillis(e.localWriteTimeMs);return new rd(e.batchId,i,n,r)}function zu(t){let e=wo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?wo(t.lastLimboFreeSnapshotVersion):$.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),tn(Sc(l1(s.documents[0])))}(t.query):function(s){return tn(p1(s))}(t.query),new yc(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,xt.fromBase64String(t.resumeToken))}function v1(t,e){let n=_o(e.snapshotVersion),r=_o(e.lastLimboFreeSnapshotVersion),i;i=Eg(e.target)?h1(t.ct,e.target):f1(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function oD(t){let e=p1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cg(e,e.limit,"L"):e}function Yb(t,e){return new id(e.largestBatchId,O0(t.ct,e.overlayMutation))}function GP(t,e){let n=e.path.lastSegment();return[t,en(e.path.popLast()),n]}function WP(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:_o(r.readTime),documentKey:en(r.documentKey.path),largestBatchId:r.largestBatchId}}var F0=class{getBundleMetadata(e,n){return KP(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:wo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return KP(e).put(function(i){return{bundleId:i.id,createTime:_o(at(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return QP(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:oD(s.bundledQuery),readTime:wo(s.readTime)}}(r)})}saveNamedQuery(e,n){return QP(e).put(function(i){return{name:i.name,readTime:_o(at(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function KP(t){return Ct(t,"bundles")}function QP(t){return Ct(t,"namedQueries")}var Pg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return ju(e).get(GP(this.userId,n)).next(r=>r?Yb(this.serializer,r):null)}getOverlays(e,n){let r=Tr();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new id(n,o);i.push(this.ht(e,a))}),I.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(en(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ju(e).H("collectionPathOverlayIndex",a))}),I.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Tr(),s=en(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ju(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=Yb(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Tr(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ju(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=Yb(this.serializer,l);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return ju(e).put(function(i,s,o){let[a,c,l]=GP(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cd(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function ju(t){return Ct(t,"documentOverlays")}var ri=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Xe(e.integerValue));else if("doubleValue"in e){let r=Xe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Zu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=oi(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Xi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?kN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):F()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),R.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};ri.bt=new ri;function V9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function YP(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=V9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var V0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=YP(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=YP(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},L0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},j0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},lo=class{constructor(){this.Gt=new V0,this.zt=new L0(this.Gt),this.jt=new j0(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var uo=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function qi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ZP(t.arrayValue,e.arrayValue),n!==0?n:(n=ZP(t.directionalValue,e.directionalValue),n!==0?n:R.comparator(t.documentKey,e.documentKey)))}function ZP(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Ng=class{constructor(e){this.Yt=new Se((n,r)=>ot.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(B(e.collectionGroup===this.collectionId),this.en)return!1;let n=a0(e);if(n!==void 0&&!this.nn(n))return!1;let r=oo(e),i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Se(ot.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ac(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ac(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ac(r.field,r.dir==="asc"?0:1)));return new dc(dc.UNKNOWN_ID,this.collectionId,n,Yu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function _1(t){var e,n;if(B(t instanceof le||t instanceof Ee),t instanceof le){if(t instanceof Dg){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>le.create(t.field,"==",s)))||[];return Ee.create(i,"or")}return t}let r=t.filters.map(i=>_1(i));return Ee.create(r,t.op)}function L9(t){if(t.getFilters().length===0)return[];let e=$0(_1(t));return B(w1(e)),B0(e)||U0(e)?[e]:e.getFilters()}function B0(t){return t instanceof le}function U0(t){return t instanceof Ee&&nD(t)}function w1(t){return B0(t)||U0(t)||function(n){if(n instanceof Ee&&g0(n)){for(let r of n.getFilters())if(!B0(r)&&!U0(r))return!1;return!0}return!1}(t)}function $0(t){if(B(t instanceof le||t instanceof Ee),t instanceof le)return t;if(t.filters.length===1)return $0(t.filters[0]);let e=t.filters.map(r=>$0(r)),n=Ee.create(e,t.op);return n=kg(n),w1(n)?n:(B(n instanceof Ee),B(fc(n)),B(n.filters.length>1),n.filters.reduce((r,i)=>aD(r,i)))}function aD(t,e){let n;return B(t instanceof le||t instanceof Ee),B(e instanceof le||e instanceof Ee),n=t instanceof le?e instanceof le?function(i,s){return Ee.create([i,s],"and")}(t,e):XP(t,e):e instanceof le?XP(e,t):function(i,s){if(B(i.filters.length>0&&s.filters.length>0),fc(i)&&fc(s))return LN(i,s.getFilters());let o=g0(i)?i:s,a=g0(i)?s:i,c=o.filters.map(l=>aD(l,a));return Ee.create(c,"or")}(t,e),kg(n)}function XP(t,e){if(fc(e))return LN(e,t.getFilters());{let n=e.filters.map(r=>aD(t,r));return Ee.create(n,"or")}}function kg(t){if(B(t instanceof le||t instanceof Ee),t instanceof le)return t;let e=t.getFilters();if(e.length===1)return kg(e[0]);if(FN(t))return t;let n=e.map(i=>kg(i)),r=[];return n.forEach(i=>{i instanceof le?r.push(i):i instanceof Ee&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,t.op)}var H0=class{constructor(){this._n=new ld}addToCollectionParentIndex(e,n){return this._n.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}deleteAllFieldIndexes(e){return I.resolve()}createTargetIndexes(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(jn.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}},ld=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Se(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(pe.comparator)).toArray()}};var sg=new Uint8Array(0),z0=class{constructor(e,n){this.databaseId=n,this.an=new ld,this.un=new Nr(r=>yo(r),(r,i)=>_d(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:r,parent:en(i)};return JP(e).put(s)}return I.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[IN(n),""],!1,!0);return JP(e).W(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Cr(o.parent))}return r})}addFieldIndex(e,n){let r=Bu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=Ja(e);return s.next(a=>{o.put(WP(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Bu(e),i=Ja(e),s=Xa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Bu(e),r=Xa(e),i=Ja(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return I.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Ng(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Xa(e),i=!0,s=new Map;return I.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=X(),a=[];return I.forEach(s,(c,l)=>{T("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`}(c)} to execute ${yo(n)}`);let u=function(_,b){let w=a0(b);if(w===void 0)return null;for(let E of xg(_,w.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(l,c),d=function(_,b){let w=new Map;for(let E of oo(b))for(let A of xg(_,E.fieldPath))switch(A.op){case"==":case"in":w.set(E.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return w.set(E.fieldPath.canonicalString(),A.value),Array.from(w.values())}return null}(l,c),h=function(_,b){let w=[],E=!0;for(let A of oo(b)){let S=A.kind===0?PP(_,A.fieldPath,_.startAt):NP(_,A.fieldPath,_.startAt);w.push(S.value),E&&(E=S.inclusive)}return new Pr(w,E)}(l,c),f=function(_,b){let w=[],E=!0;for(let A of oo(b)){let S=A.kind===0?NP(_,A.fieldPath,_.endAt):PP(_,A.fieldPath,_.endAt);w.push(S.value),E&&(E=S.inclusive)}return new Pr(w,E)}(l,c),p=this.hn(c,l,h),g=this.hn(c,l,f),m=this.Pn(c,l,d),y=this.In(c.indexId,u,p,h.inclusive,g,f.inclusive,m);return I.forEach(y,v=>r.j(v,n.limit).next(_=>{_.forEach(b=>{let w=R.fromSegments(b.documentKey);o.has(w)||(o=o.add(w),a.push(w))})}))}).next(()=>a)}return I.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=L9(Ee.create(e.filters,"and")).map(r=>E0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):sg,f=this.En(e,h,r[d%l],i),p=this.dn(e,h,s[d%l],o),g=a.map(m=>this.En(e,h,m,!0));u.push(...this.createRange(f,p,g))}return u}En(e,n,r,i){let s=new uo(e,R.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){let s=new uo(e,R.empty(),n,r);return i?s.Jt():s}ln(e,n){let r=new Ng(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.cn(n);return I.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Se(ot.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new lo;for(let i of oo(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Ht(i.kind);ri.bt.Pt(s,o)}return r.Wt()}Tn(e){let n=new lo;return ri.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new lo;return ri.bt.Pt(go(this.databaseId,n),r.Ht(function(s){let o=oo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new lo);let s=0;for(let o of oo(e)){let a=r[s++];for(let c of i)if(this.Vn(n,o.fieldPath)&&td(a))i=this.mn(i,o,a);else{let l=c.Ht(o.kind);ri.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new lo;c.seed(a.Wt()),ri.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Bu(e),i=Ja(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let o=[];return I.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Yu(d.sequenceNumber,new jn(wo(d.readTime),new R(Cr(d.documentKey)),d.largestBatchId)):Yu.empty(),f=u.fields.map(([p,g])=>new ac(ot.fromServerFormat(p),g));return new dc(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Y(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Bu(e),s=Ja(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>I.forEach(a,c=>s.put(WP(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return I.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?I.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),I.forEach(a,c=>this.pn(e,i,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?I.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,r,i){return Xa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Xa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Xa(e),s=new Se(qi);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new uo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Se(qi),i=this.An(n,e);if(i==null)return r;let s=a0(n);if(s!=null){let o=e.data.field(s.fieldPath);if(td(o))for(let a of o.arrayValue.values||[])r=r.add(new uo(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new uo(n.indexId,e.key,sg,i));return r}wn(e,n,r,i,s){T("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),p=l.getIterator(),g=Za(f),m=Za(p);for(;g||m;){let y=!1,v=!1;if(g&&m){let _=u(g,m);_<0?v=!0:_>0&&(y=!0)}else g!=null?v=!0:y=!0;y?(d(m),m=Za(p)):v?(h(g),g=Za(f)):(g=Za(f),m=Za(p))}}(i,s,qi,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),I.waitFor(o)}gn(e){let n=1;return Ja(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>qi(o,a)).filter((o,a,c)=>!a||qi(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=qi(o,e),c=qi(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,sg,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,sg,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return qi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(eN)}getMinOffset(e,n){return I.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||F())).next(eN)}};function JP(t){return Ct(t,"collectionParents")}function Xa(t){return Ct(t,"indexEntries")}function Bu(t){return Ct(t,"indexConfiguration")}function Ja(t){return Ct(t,"indexState")}function eN(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;JI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jn(e.readTime,e.documentKey,n)}var tN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function b1(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let l=[];for(let u of n.mutations){let d=TN(e,u.key.path,n.batchId);s.push(i.delete(d)),l.push(u.key)}return I.waitFor(s).next(()=>l)}function Og(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw F();e=t.noDocument}return JSON.stringify(e).length}Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);var Fg=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gi(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=sc(e),o=Gi(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new rd(a,n,r,i),l=function(f,p,g){let m=g.baseMutations.map(v=>cd(f.ct,v)),y=g.mutations.map(v=>cd(f.ct,v));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:m,mutations:y}}(this.serializer,this.userId,c),u=[],d=new Se((h,f)=>Y(h.canonicalString(),f.canonicalString()));for(let h of i){let f=TN(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,qG))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),I.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Gi(e).get(n).next(r=>r?(B(r.userId===this.userId),co(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?I.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Gi(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=r),s=co(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Gi(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gi(e).W("userMutationsIndex",n).next(r=>r.map(i=>co(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=lg(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return sc(e).Y({range:i},(o,a,c)=>{let[l,u,d]=o,h=Cr(u);if(l===this.userId&&n.path.isEqual(h))return Gi(e).get(d).next(f=>{if(!f)throw F();B(f.userId===this.userId),s.push(co(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Se(Y),i=[];return n.forEach(s=>{let o=lg(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=sc(e).Y({range:a},(l,u,d)=>{let[h,f,p]=l,g=Cr(f);h===this.userId&&s.path.isEqual(g)?r=r.add(p):d.done()});i.push(c)}),I.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=lg(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Se(Y);return sc(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,p=Cr(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(Gi(e).get(s).next(o=>{if(o===null)throw F();B(o.userId===this.userId),r.push(co(this.serializer,o))}))}),I.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return b1(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),I.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return I.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return sc(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Cr(s[1]);i.push(c)}else a.done()}).next(()=>{B(i.length===0)})})}containsKey(e,n){return I1(e,this.userId,n)}xn(e){return D1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function I1(t,e,n){let r=lg(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return sc(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===i&&(o=!0),l.done()}).next(()=>o)}function Gi(t){return Ct(t,"mutations")}function sc(t){return Ct(t,"documentMutations")}function D1(t){return Ct(t,"mutationQueues")}var vc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var q0=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new vc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>$.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ec(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(B(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return ec(e).Y((o,a)=>{let c=zu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>I.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ec(e).Y((r,i)=>{let s=zu(i);n(s)})}Bn(e){return nN(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}kn(e,n){return nN(e).put("targetGlobalKey",n)}qn(e,n){return ec(e).put(v1(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=yo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return ec(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=zu(a);_d(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Wi(e);return n.forEach(o=>{let a=en(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),I.waitFor(i)}removeMatchingKeys(e,n,r){let i=Wi(e);return I.forEach(n,s=>{let o=en(s.path);return I.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Wi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wi(e),s=X();return i.Y({range:r,J:!0},(o,a,c)=>{let l=Cr(o[1]),u=new R(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let r=en(n.path),i=IDBKeyRange.bound([r],[IN(r)],!1,!0),s=0;return Wi(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return ec(e).get(n).next(r=>r?zu(r):null)}};function ec(t){return Ct(t,"targets")}function nN(t){return Ct(t,"targetGlobal")}function Wi(t){return Ct(t,"targetDocuments")}function rN([t,e],[n,r]){let i=Y(t,n);return i===0?Y(e,r):i}var G0=class{constructor(e){this.Kn=e,this.buffer=new Se(rN),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();rN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},W0=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){T("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>D(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){as(n)?T("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield os(n)}yield this.zn(3e5)}))}},K0=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return I.resolve(xn._e);let r=new G0(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(T("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve(tN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tN):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),tc()<=lr.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),I.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function j9(t,e){return new K0(t,e)}var Q0=class{constructor(e,n){this.db=e,this.garbageCollector=j9(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return og(e,r)}removeReference(e,n,r){return og(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return og(e,n)}er(e,n){return function(i,s){let o=!1;return D1(i).Z(a=>I1(i,a,s).next(c=>(c&&(o=!0),I.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,$.min()),Wi(e).delete(function(d){return[0,en(d.path)]}(o))))});i.push(c)}}).next(()=>I.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return og(e,n)}Xn(e,n){let r=Wi(e),i,s=xn._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==xn._e&&n(new R(Cr(i)),s),s=l,i=c):s=xn._e}).next(()=>{s!==xn._e&&n(new R(Cr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function og(t,e){return Wi(t).put(function(r,i){return{targetId:0,path:en(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Vg=class{constructor(){this.changes=new Nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Y0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return so(e).put(r)}removeEntry(e,n,r){return so(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Rg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=mt.newInvalidDocument(n);return so(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Uu(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:mt.newInvalidDocument(n)};return so(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Uu(n))},(i,s)=>{r={document:this.nr(n,s),size:Og(s)}}).next(()=>r)}getEntries(e,n){let r=un();return this.ir(e,n,(i,s)=>{let o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=un(),i=new Ve(R.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Og(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return I.resolve();let i=new Se(oN);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Uu(i.first()),Uu(i.last())),o=i.getIterator(),a=o.getNext();return so(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=R.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&oN(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?u.U(Uu(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Rg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=un();for(let d of l){let h=this.nr(R.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(bd(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=un(),o=sN(n,r),a=sN(n,jn.max());return so(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(R.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new Z0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return iN(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}tr(e,n){return iN(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=F9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual($.min())))return r}return mt.newInvalidDocument(e)}};function E1(t){return new Y0(t)}var Z0=class extends Vg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Nr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Se((s,o)=>Y(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=qP(this.ar.serializer,o);i=i.add(s.path.popLast());let l=Og(c);r+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=qP(this.ar.serializer,o.convertToNoDocument($.min()));n.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),I.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function iN(t){return Ct(t,"remoteDocumentGlobal")}function so(t){return Ct(t,"remoteDocumentsV14")}function Uu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sN(t,e){let n=e.documentKey.path.toArray();return[t,Rg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function oN(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Y(n[s],r[s]),i)return i;return i=Y(n.length,r.length),i||(i=Y(n[n.length-2],r[r.length-2]),i||Y(n[n.length-1],r[r.length-1]))}var X0=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Lg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wu(r.mutation,i,Cn.empty(),ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){let i=Tr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Tr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=un(),o=Gu(),a=function(){return Gu()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof ir)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Wu(u.mutation,l,u.mutation.getFieldMask(),ze.now())):o.set(l.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new X0(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Gu(),i=new Ve((o,a)=>o-a),s=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||Cn.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||X()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=WN();u.forEach(h=>{if(!s.has(h)){let f=t1(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return I.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return R.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):I.resolve(Tr()),a=-1,c=s;return o.next(l=>I.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?I.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,X())).next(u=>({batchId:a,changes:GN(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new R(n)).next(r=>{let i=Hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Hu();return this.indexManager.getCollectionParents(e,s).next(a=>I.forEach(a,c=>{let l=function(d,h){return new rr(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,mt.newInvalidDocument(u)))});let a=Hu();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Wu(u.mutation,l,Cn.empty(),ze.now()),bd(n,l)&&(a=a.insert(c,l))}),a})}};var J0=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return I.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:at(i.createTime)}}(n)),I.resolve()}getNamedQuery(e,n){return I.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:oD(i.bundledQuery),readTime:at(i.readTime)}}(n)),I.resolve()}};var eI=class{constructor(){this.overlays=new Ve(R.comparator),this.hr=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Tr();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),I.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){let i=Tr(),s=n.length+1,o=new R(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Tr(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Tr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return I.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new id(n,r));let s=this.hr.get(n);s===void 0&&(s=X(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ud=class{constructor(){this.Pr=new Se(ft.Ir),this.Tr=new Se(ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new ft(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ft(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new R(new pe([])),r=new ft(n,e),i=new ft(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new R(new pe([])),r=new ft(n,e),i=new ft(n,e+1),s=X();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ft(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ft=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return R.comparator(e.key,n.key)||Y(e.pr,n.pr)}static Er(e,n){return Y(e.pr,n.pr)||R.comparator(e.key,n.key)}};var tI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Se(ft.Ir)}checkEmpty(e){return I.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new rd(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return I.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Se(Y);return n.forEach(i=>{let s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),I.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;R.isDocumentKey(s)||(s=s.child(""));let o=new ft(new R(s),0),a=new Se(Y);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),I.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){B(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return I.forEach(n.mutations,i=>{let s=new ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new ft(n,0),i=this.wr.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,I.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var nI=class{constructor(e){this.vr=e,this.docs=function(){return new Ve(R.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mt.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=un(),o=n.path,a=new R(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||JI(EN(u),r)<=0||(i.has(u.key)||bd(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return I.resolve(s)}getAllFromCollectionGroup(e,n,r,i){F()}Fr(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rI(this)}getSize(e){return I.resolve(this.size)}},rI=class extends Vg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var iI=class{constructor(e){this.persistence=e,this.Mr=new Nr(n=>yo(n),_d),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ud,this.targetCount=0,this.Lr=vc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),I.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new vc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.qn(n),I.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),I.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.Nr.containsKey(n))}};var jg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new xn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new iI(this),this.indexManager=new H0,this.remoteDocumentCache=function(i){return new nI(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Mg(n),this.$r=new J0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new tI(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){T("MemoryPersistence","Starting transaction:",e);let i=new sI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return I.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},sI=class extends vg{constructor(e){super(),this.currentSequenceNumber=e}},Bg=class t{constructor(e){this.persistence=e,this.zr=new ud,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw F()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),I.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Jr,r=>{let i=R.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,$.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return I.or([()=>I.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var oI=class{constructor(e){this.serializer=e}N(e,n,r,i){let s=new _g("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DP,{unique:!0}),c.createObjectStore("documentMutations")}(e),aN(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=I.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),aN(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DP,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return I.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:r9});l.createIndex("collectionPathOverlayIndex",i9,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",s9,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:GG});l.createIndex("documentKeyIndex",WG),l.createIndex("collectionGroupIndex",KG)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:JG}).createIndex("sequenceNumberIndex",e9,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:t9}).createIndex("documentKeyIndex",n9,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Og(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>I.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>I.forEach(a,c=>{B(c.userId===s.userId);let l=co(this.serializer,c);return b1(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((o,a)=>{let c=new pe(o),l=function(d){return[0,en(d)]}(c);s.push(n.get(l).next(u=>u?I.resolve():(d=>n.put({targetId:0,path:en(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>I.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:XG});let r=n.store("collectionParents"),i=new ld,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:en(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new pe(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Cr(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let s=zu(i),o=v1(this.serializer,s);return n.put(o)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new R(pe.fromString(d.document.name).popFirst(5)):d.noDocument?R.fromSegments(d.noDocument.path):d.unknownDocument?R.fromSegments(d.unknownDocument.path):F()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>I.waitFor(i))}si(e,n){let r=n.store("mutations"),i=E1(this.serializer),s=new jg(Bg.Hr,this.serializer.ct);return r.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:X();co(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),I.forEach(a,(c,l)=>{let u=new pt(l),d=Pg.lt(this.serializer,u),h=s.getIndexManager(u),f=Fg.lt(u,this.serializer,h,s.referenceDelegate);return new Lg(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Xu(n,xn._e),c).next()})})}};function aN(t){t.createObjectStore("targetDocuments",{keyPath:YG}).createIndex("documentTargetsIndex",ZG,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QG,{unique:!0}),t.createObjectStore("targetGlobal")}var Zb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",aI=class t{constructor(e,n,r,i,s,o,a,c,l,u,d=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new C(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Q0(this,i),this.Ti=n+"main",this.serializer=new Mg(c),this.Ei=new si(this.Ti,this.ui,new oI(this.serializer)),this.Qr=new q0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=E1(this.serializer),this.$r=new F0,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&st("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new C(x.FAILED_PRECONDITION,Zb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new xn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>D(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(n=>D(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>D(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ag(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(as(e))return T("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return T("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return $u(e).get("owner").next(n=>I.resolve(this.Si(n)))}bi(e){return ag(e).delete(this.clientId)}Di(){return D(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Ct(n,"clientMetadata");return r.W().next(i=>{let s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return I.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?I.resolve(!0):$u(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new C(x.FAILED_PRECONDITION,Zb);return!1}}return!(!this.networkEnabled||!this.inForeground)||ag(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&T("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return D(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Xu(e,xn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ag(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Fg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Pg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){T("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===16?a9:c===15?RN:c===14?MN:c===13?AN:c===12?o9:c===11?SN:void F()}(this.ui),o;return this.Ei.runTransaction(e,i,s,a=>(o=new Xu(a,this.kr?this.kr.next():xn._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw st(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new C(x.FAILED_PRECONDITION,xN);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return $u(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new C(x.FAILED_PRECONDITION,Zb)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $u(e).put("owner",n)}static D(){return si.D()}yi(e){let n=$u(e);return n.get("owner").next(r=>this.Si(r)?(T("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):I.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(st(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Ey()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return T("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return st("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){st("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function $u(t){return Ct(t,"owner")}function ag(t){return Ct(t,"clientMetadata")}function cD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var cI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=X(),i=X();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var lI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ug=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ey()?8:si.v(ul())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new lI;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(tc()<=lr.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",nc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),I.resolve()):(tc()<=lr.DEBUG&&T("QueryEngine","Query:",nc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(tc()<=lr.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",nc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):I.resolve())}ji(e,n){if(kP(n))return I.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cg(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=X(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Cg(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return kP(n)||i.isEqual($.min())?I.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?I.resolve(null):(tc()<=lr.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nc(n)),this.es(e,o,n,DN(i,-1)).next(a=>a))})}Zi(e,n){let r=new Se(zN(e));return n.forEach((i,s)=>{bd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return tc()<=lr.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",nc(n)),this.zi.getDocumentsMatchingQuery(e,n,jn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var uI=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ve(Y),this.rs=new Nr(s=>yo(s),_d),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function x1(t,e,n,r){return new uI(t,e,n,r)}function C1(t,e){return D(this,null,function*(){let n=P(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=X();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function B9(t,e){let n=P(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=I.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(g=>{let m=l.docVersions.get(p);B(m!==null),g.version.compareTo(m)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=X();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function T1(t){let e=P(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function U9(t,e){let n=P(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(xt.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(g,m,y){return g.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=un(),l=X();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(S1(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual($.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function S1(t,e,n){let r=X(),i=X();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=un();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual($.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function $9(t,e){let n=P(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _c(t,e){let n=P(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new yc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function wc(t,e,n){return D(this,null,function*(){let r=P(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!as(o))throw o;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function $g(t,e,n){let r=P(t),i=$.min(),s=X();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=P(c),h=d.rs.get(u);return h!==void 0?I.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(r,o,tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:$.min(),n?s:X())).next(a=>(R1(r,HN(e),a),{documents:a,hs:s})))}function A1(t,e){let n=P(t),r=P(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function M1(t,e){let n=P(t),r=n.ss.get(e)||$.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,DN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(R1(n,e,i),i))}function R1(t,e,n){let r=t.ss.get(e)||$.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function H9(t,e,n,r){return D(this,null,function*(){let i=P(t),s=X(),o=un();for(let l of n){let u=e.Ps(l.metadata.name);l.document&&(s=s.add(u));let d=e.Is(l);d.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(u,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield _c(i,function(u){return tn(Sc(pe.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>S1(l,a,o).next(u=>(a.apply(l),u)).next(u=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.cs,u.ls)).next(()=>u.cs)))})}function z9(r,i){return D(this,arguments,function*(t,e,n=X()){let s=yield _c(t,tn(oD(e.bundledQuery))),o=P(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=at(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.$r.saveNamedQuery(a,e);let l=s.withResumeToken(xt.EMPTY_BYTE_STRING,c);return o.ns=o.ns.insert(l.targetId,l),o.Qr.updateTargetData(a,l).next(()=>o.Qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.$r.saveNamedQuery(a,e))})})}function cN(t,e){return`firestore_clients_${t}_${e}`}function lN(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xb(t,e){return`firestore_targets_${t}_${e}`}var Hg=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new C(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(st("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ku=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new C(r.error.code,r.error.message))),s?new t(e,r.state,i):(st("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},zg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=iD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=CN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(st("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},dI=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(st("SharedClientState",`Failed to parse online state: ${e}`),null)}},dd=class{constructor(){this.activeTargetIds=iD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Qu=class{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ve(Y),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=cN(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new dd),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return D(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(cN(this.persistenceKey,r));if(i){let s=zg.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Xb(this.persistenceKey,e));if(r){let i=Ku.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xb(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return T("SharedClientState","READ",e,n),n}setItem(e,n){T("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){T("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(T("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void st("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>D(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(s){let o=xn._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){st("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==xn._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Hg(this.currentUser,e,n,r),s=lN(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){let n=lN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Xb(this.persistenceKey,e),s=new Ku(e,n,r);this.setItem(i,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return zg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Hg.Es(new pt(s),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Ku.Es(i,n)}xs(e){return dI.Es(e)}Js(e){return JSON.parse(e)}zs(e){return D(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);T("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=iD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},qg=class{constructor(){this.no=new dd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new dd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hI=class{io(e){}shutdown(){}};var Gg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cg=null;function Jb(){return cg===null?cg=function(){return 268435456+Math.round(2147483648*Math.random())}():cg++,"0x"+cg.toString(16)}var q9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var fI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var zt="WebChannelConnection",pI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=Jb(),c=this.bo(n,r.toUriEncodedString());T("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,i).then(u=>(T("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ln("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=q9[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=Jb();return new Promise((o,a)=>{let c=new vP;c.setWithCredentials(!0),c.listenOnce(mP.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ig.NO_ERROR:let u=c.getResponseJson();T(zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case ig.TIMEOUT:T(zt,`RPC '${e}' ${s} timed out`),a(new C(x.DEADLINE_EXCEEDED,"Request time out"));break;case ig.HTTP_ERROR:let d=c.getStatus();if(T(zt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(m){let y=m.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(y)>=0?y:x.UNKNOWN}(f.status);a(new C(p,f.message))}else a(new C(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new C(x.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{T(zt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);T(zt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(e,n,r){let i=Jb(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pP(),a=gP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=s.join("");T(zt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,p=new fI({lo:m=>{f?T(zt,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(T(zt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),T(zt,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),g=(m,y,v)=>{m.listen(y,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return g(d,Lu.EventType.OPEN,()=>{f||T(zt,`RPC '${e}' stream ${i} transport opened.`)}),g(d,Lu.EventType.CLOSE,()=>{f||(f=!0,T(zt,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),g(d,Lu.EventType.ERROR,m=>{f||(f=!0,Ln(zt,`RPC '${e}' stream ${i} transport errored:`,m),p.Vo(new C(x.UNAVAILABLE,"The operation could not be completed")))}),g(d,Lu.EventType.MESSAGE,m=>{var y;if(!f){let v=m.data[0];B(!!v);let _=v,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){T(zt,`RPC '${e}' stream ${i} received error:`,b);let w=b.status,E=function(L){let Q=ht[L];if(Q!==void 0)return i1(Q)}(w),A=b.message;E===void 0&&(E=x.INTERNAL,A="Unknown error status: "+w+" with message "+b.message),f=!0,p.Vo(new C(E,A)),d.close()}else T(zt,`RPC '${e}' stream ${i} received:`,v),p.mo(v)}}),g(a,yP.STAT_EVENT,m=>{m.stat===Qb.PROXY?T(zt,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Qb.NOPROXY&&T(zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function P1(){return typeof window<"u"?window:null}function fg(){return typeof document<"u"?document:null}function Id(t){return new R0(t,!0)}var hd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Wg=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new hd(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return D(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return D(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return D(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(st(n.toString()),st("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new C(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>D(this,null,function*(){this.state=0,this.start()}))}__(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gI=class extends Wg{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=A9(this.serializer,e),r=function(s){if(!("targetChange"in s))return $.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?$.min():o.readTime?at(o.readTime):$.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=k0(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Eg(c)?{documents:h1(s,c)}:{query:f1(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=o1(s,o.resumeToken);let l=P0(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo($.min())>0){a.readTime=mc(s,o.snapshotVersion.toTimestamp());let l=P0(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=R9(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=k0(this.serializer),n.removeTarget=e,this.t_(n)}},mI=class extends Wg{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=M9(e.writeResults,e.commitTime),r=at(e.commitTime);return this.listener.T_(r,n)}return B(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=k0(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>cd(this.serializer,r))};this.t_(n)}};var yI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new C(x.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,N0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(x.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,N0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new C(x.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var vI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(st(n),this.g_=!1):T("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var _I=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>D(this,null,function*(){cs(this)&&(T("RemoteStore","Restarting streams for network reachability change."),yield function(c){return D(this,null,function*(){let l=P(c);l.v_.add(4),yield Ac(l),l.x_.set("Unknown"),l.v_.delete(4),yield Dd(l)})}(this))}))}),this.x_=new vI(r,i)}};function Dd(t){return D(this,null,function*(){if(cs(t))for(let e of t.F_)yield e(!0)})}function Ac(t){return D(this,null,function*(){for(let e of t.F_)yield e(!1)})}function hm(t,e){let n=P(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),dD(n)?uD(n):Rc(n).Jo()&&lD(n,e))}function bc(t,e){let n=P(t),r=Rc(n);n.C_.delete(e),r.Jo()&&N1(n,e),n.C_.size===0&&(r.Jo()?r.Xo():cs(n)&&n.x_.set("Unknown"))}function lD(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rc(t).c_(e)}function N1(t,e){t.O_.Oe(e),Rc(t).l_(e)}function uD(t){t.O_=new M0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Rc(t).start(),t.x_.p_()}function dD(t){return cs(t)&&!Rc(t).Ho()&&t.C_.size>0}function cs(t){return P(t).v_.size===0}function k1(t){t.O_=void 0}function G9(t){return D(this,null,function*(){t.C_.forEach((e,n)=>{lD(t,e)})})}function W9(t,e){return D(this,null,function*(){k1(t),dD(t)?(t.x_.S_(e),uD(t)):t.x_.set("Unknown")})}function K9(t,e,n){return D(this,null,function*(){if(t.x_.set("Online"),e instanceof Sg&&e.state===2&&e.cause)try{yield function(i,s){return D(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kg(t,r)}else if(e instanceof lc?t.O_.$e(e):e instanceof Tg?t.O_.Je(e):t.O_.Ge(e),!n.isEqual($.min()))try{let r=yield T1(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(xt.EMPTY_BYTE_STRING,u.snapshotVersion)),N1(s,c);let d=new yc(u.target,c,l,u.sequenceNumber);lD(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){T("RemoteStore","Failed to raise snapshot:",r),yield Kg(t,r)}})}function Kg(t,e,n){return D(this,null,function*(){if(!as(e))throw e;t.v_.add(1),yield Ac(t),t.x_.set("Offline"),n||(n=()=>T1(t.localStore)),t.asyncQueue.enqueueRetryable(()=>D(this,null,function*(){T("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Dd(t)}))})}function O1(t,e){return e().catch(n=>Kg(t,n,e))}function Mc(t){return D(this,null,function*(){let e=P(t),n=ss(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Q9(e);)try{let i=yield $9(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,Y9(e,i)}catch(i){yield Kg(e,i)}F1(e)&&V1(e)})}function Q9(t){return cs(t)&&t.D_.length<10}function Y9(t,e){t.D_.push(e);let n=ss(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function F1(t){return cs(t)&&!ss(t).Ho()&&t.D_.length>0}function V1(t){ss(t).start()}function Z9(t){return D(this,null,function*(){ss(t).d_()})}function X9(t){return D(this,null,function*(){let e=ss(t);for(let n of t.D_)e.I_(n.mutations)})}function J9(t,e,n){return D(this,null,function*(){let r=t.D_.shift(),i=T0.from(r,e,n);yield O1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Mc(t)})}function e3(t,e){return D(this,null,function*(){e&&ss(t).P_&&(yield function(r,i){return D(this,null,function*(){if(function(o){return r1(o)&&o!==x.ABORTED}(i.code)){let s=r.D_.shift();ss(r).Zo(),yield O1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Mc(r)}})}(t,e)),F1(t)&&V1(t)})}function uN(t,e){return D(this,null,function*(){let n=P(t);n.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");let r=cs(n);n.v_.add(3),yield Ac(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Dd(n)})}function wI(t,e){return D(this,null,function*(){let n=P(t);e?(n.v_.delete(2),yield Dd(n)):e||(n.v_.add(2),yield Ac(n),n.x_.set("Unknown"))})}function Rc(t){return t.N_||(t.N_=function(n,r,i){let s=P(n);return s.R_(),new gI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:G9.bind(null,t),To:W9.bind(null,t),u_:K9.bind(null,t)}),t.F_.push(e=>D(this,null,function*(){e?(t.N_.Zo(),dD(t)?uD(t):t.x_.set("Unknown")):(yield t.N_.stop(),k1(t))}))),t.N_}function ss(t){return t.L_||(t.L_=function(n,r,i){let s=P(n);return s.R_(),new mI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:Z9.bind(null,t),To:e3.bind(null,t),E_:X9.bind(null,t),T_:J9.bind(null,t)}),t.F_.push(e=>D(this,null,function*(){e?(t.L_.Zo(),yield Mc(t)):(yield t.L_.stop(),t.D_.length>0&&(T("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var bI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new C(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Pc(t,e){if(st("AsyncQueue",`${e}: ${t}`),as(t))return new C(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Qg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||R.comparator(n.key,r.key):(n,r)=>R.comparator(n.key,r.key),this.keyedMap=Hu(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Yg=class{constructor(){this.B_=new Ve(R.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):F():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ic=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Qg.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var II=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},DI=class{constructor(){this.queries=new Nr(e=>$N(e),wd),this.onlineState="Unknown",this.W_=new Set}};function hD(t,e){return D(this,null,function*(){let n=P(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new II,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Pc(o,`Initialization of query '${nc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&pD(n)})}function fD(t,e){return D(this,null,function*(){let n=P(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function t3(t,e){let n=P(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&pD(n)}function n3(t,e,n){let r=P(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function pD(t){t.W_.forEach(e=>{e.next()})}var EI,dN;(dN=EI||(EI={})).j_="default",dN.Cache="cache";var fd=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==EI.Cache}};var xI=class{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}};var Zg=class{constructor(e){this.serializer=e}Ps(e){return Ar(this.serializer,e)}Is(e){return e.metadata.exists?d1(this.serializer,e.document,!1):mt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return at(e)}},CI=class{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=L1(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;let r=pe.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){let n=new Map,r=new Zg(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Ps(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||X()).add(s);n.set(o,a)}}return n}complete(){return D(this,null,function*(){let e=yield H9(this.localStore,new Zg(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(let r of this.queries)yield z9(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}})}};function L1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Xg=class{constructor(e){this.key=e}},Jg=class{constructor(e){this.key=e}},em=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=X(),this.mutatedKeys=X(),this.ha=zN(e),this.Pa=new Qg(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Yg,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=bd(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.da(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ha(f,c)>0||l&&this.ha(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||l)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((u,d)=>function(f,p){let g=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return g(f)-g(p)}(u.type,d.type)||this.ha(u.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new Ic(this.query,e.Pa,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Yg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=X(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Jg(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Xg(r))}),n}fa(e){this.ua=e.hs,this.la=X();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Ic.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},TI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},SI=class{constructor(e){this.key=e,this.pa=!1}},AI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Nr(a=>$N(a),wd),this.Sa=new Map,this.ba=new Set,this.Da=new Ve(R.comparator),this.Ca=new Map,this.va=new ud,this.Fa={},this.Ma=new Map,this.xa=vc.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function r3(t,e,n=!0){return D(this,null,function*(){let r=fm(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield j1(r,e,n,!0),i})}function i3(t,e){return D(this,null,function*(){let n=fm(t);yield j1(n,e,!0,!1)})}function j1(t,e,n,r){return D(this,null,function*(){let i=yield _c(t.localStore,tn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield gD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&hm(t.remoteStore,i),a})}function gD(t,e,n,r,i){return D(this,null,function*(){t.Na=(d,h,f)=>function(g,m,y,v){return D(this,null,function*(){let _=m.view.Ta(y);_.Xi&&(_=yield $g(g.localStore,m.query,!1).then(({documents:A})=>m.view.Ta(A,_)));let b=v&&v.targetChanges.get(m.targetId),w=v&&v.targetMismatches.get(m.targetId)!=null,E=m.view.applyChanges(_,g.isPrimaryClient,b,w);return MI(g,m.targetId,E.Va),E.snapshot})}(t,d,h,f);let s=yield $g(t.localStore,e,!0),o=new em(e,s.hs),a=o.Ta(s.documents),c=od.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);MI(t,n,l.Va);let u=new TI(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot})}function s3(t,e,n){return D(this,null,function*(){let r=P(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!wd(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bc(r.remoteStore,i.targetId),Dc(r,i.targetId)}).catch(os))):(Dc(r,i.targetId),yield wc(r.localStore,i.targetId,!0))})}function o3(t,e){return D(this,null,function*(){let n=P(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bc(n.remoteStore,r.targetId))})}function a3(t,e,n){return D(this,null,function*(){let r=_D(t);try{let i=yield function(o,a){let c=P(o),l=ze.now(),u=a.reduce((f,p)=>f.add(p.key),X()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=un(),g=X();return c.os.getEntries(f,u).next(m=>{p=m,p.forEach((y,v)=>{v.isValidDocument()||(g=g.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(m=>{d=m;let y=[];for(let v of a){let _=I9(v,d.get(v.key).overlayedDocument);_!=null&&y.push(new ir(v.key,_,ON(_.value.mapValue),Je.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,y,a)}).next(m=>{h=m;let y=m.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,m.batchId,y)})}).then(()=>({batchId:h.batchId,changes:GN(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Fa[o.currentUser.toKey()];l||(l=new Ve(Y)),l=l.insert(a,c),o.Fa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield di(r,i.changes),yield Mc(r.remoteStore)}catch(i){let s=Pc(i,"Failed to persist write");n.reject(s)}})}function B1(t,e){return D(this,null,function*(){let n=P(t);try{let r=yield U9(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(B(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?B(o.pa):i.removedDocuments.size>0&&(B(o.pa),o.pa=!1))}),yield di(n,r,e)}catch(r){yield os(r)}})}function hN(t,e,n){let r=P(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=P(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.G_(a)&&(l=!0)}),l&&pD(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function c3(t,e,n){return D(this,null,function*(){let r=P(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Ve(R.comparator);o=o.insert(s,mt.newNoDocument(s,$.min()));let a=X().add(s),c=new sd($.min(),new Map,new Ve(Y),o,a);yield B1(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),vD(r)}else yield wc(r.localStore,e,!1).then(()=>Dc(r,e,n)).catch(os)})}function l3(t,e){return D(this,null,function*(){let n=P(t),r=e.batch.batchId;try{let i=yield B9(n.localStore,e);yD(n,r,null),mD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield di(n,i)}catch(i){yield os(i)}})}function u3(t,e,n){return D(this,null,function*(){let r=P(t);try{let i=yield function(o,a){let c=P(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(B(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);yD(r,e,n),mD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield di(r,i)}catch(i){yield os(i)}})}function d3(t,e){return D(this,null,function*(){let n=P(t);cs(n.remoteStore)||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=P(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){let i=Pc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function mD(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function yD(t,e,n){let r=P(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Dc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||U1(t,r)})}function U1(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(bc(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),vD(t))}function MI(t,e,n){for(let r of n)r instanceof Xg?(t.va.addReference(r.key,e),h3(t,r)):r instanceof Jg?(T("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||U1(t,r.key)):F()}function h3(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(T("SyncEngine","New document in limbo: "+n),t.ba.add(r),vD(t))}function vD(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new R(pe.fromString(e)),r=t.xa.next();t.Ca.set(r,new SI(n)),t.Da=t.Da.insert(n,r),hm(t.remoteStore,new yc(tn(Sc(n.path)),r,"TargetPurposeLimboResolution",xn._e))}}function di(t,e,n){return D(this,null,function*(){let r=P(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=cI.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,l){return D(this,null,function*(){let u=P(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>I.forEach(l,h=>I.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>I.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!as(d))throw d;T("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(h,g)}}})}(r.localStore,s))})}function f3(t,e){return D(this,null,function*(){let n=P(t);if(!n.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());let r=yield C1(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new C(x.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield di(n,r.us)}})}function p3(t,e){let n=P(t),r=n.Ca.get(e);if(r&&r.pa)return X().add(r.key);{let i=X(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function g3(t,e){return D(this,null,function*(){let n=P(t),r=yield $g(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&MI(n,e.targetId,i.Va),i})}function m3(t,e){return D(this,null,function*(){let n=P(t);return M1(n.localStore,e).then(r=>di(n,r))})}function y3(t,e,n,r){return D(this,null,function*(){let i=P(t),s=yield function(a,c){let l=P(a),u=P(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):I.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield Mc(i.remoteStore):n==="acknowledged"||n==="rejected"?(yD(i,e,r||null),mD(i,e),function(a,c){P(P(a).mutationQueue).Mn(c)}(i.localStore,e)):F(),yield di(i,s)):T("SyncEngine","Cannot apply mutation batch with id: "+e)})}function v3(t,e){return D(this,null,function*(){let n=P(t);if(fm(n),_D(n),e===!0&&n.Oa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield fN(n,r.toArray());n.Oa=!0,yield wI(n.remoteStore,!0);for(let s of i)hm(n.remoteStore,s)}else if(e===!1&&n.Oa!==!1){let r=[],i=Promise.resolve();n.Sa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Dc(n,o),wc(n.localStore,o,!0))),bc(n.remoteStore,o)}),yield i,yield fN(n,r),function(o){let a=P(o);a.Ca.forEach((c,l)=>{bc(a.remoteStore,l)}),a.va.mr(),a.Ca=new Map,a.Da=new Ve(R.comparator)}(n),n.Oa=!1,yield wI(n.remoteStore,!1)}})}function fN(t,e,n){return D(this,null,function*(){let r=P(t),i=[],s=[];for(let o of e){let a,c=r.Sa.get(o);if(c&&c.length!==0){a=yield _c(r.localStore,tn(c[0]));for(let l of c){let u=r.wa.get(l),d=yield g3(r,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield A1(r.localStore,o);a=yield _c(r.localStore,l),yield gD(r,$1(l),o,!1,a.resumeToken)}i.push(a)}return r.ya.u_(s),i})}function $1(t){return UN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _3(t){return function(n){return P(P(n).persistence).Bi()}(P(t).localStore)}function w3(t,e,n,r){return D(this,null,function*(){let i=P(t);if(i.Oa)return void T("SyncEngine","Ignoring unexpected query state notification.");let s=i.Sa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield M1(i.localStore,HN(s[0])),a=sd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",xt.EMPTY_BYTE_STRING);yield di(i,o,a);break}case"rejected":yield wc(i.localStore,e,!0),Dc(i,e,r);break;default:F()}})}function b3(t,e,n){return D(this,null,function*(){let r=fm(t);if(r.Oa){for(let i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){T("SyncEngine","Adding an already active target "+i);continue}let s=yield A1(r.localStore,i),o=yield _c(r.localStore,s);yield gD(r,$1(s),o.targetId,!1,o.resumeToken),hm(r.remoteStore,o)}for(let i of n)r.Sa.has(i)&&(yield wc(r.localStore,i,!1).then(()=>{bc(r.remoteStore,i),Dc(r,i)}).catch(os))}})}function fm(t){let e=P(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c3.bind(null,e),e.ya.u_=t3.bind(null,e.eventManager),e.ya.La=n3.bind(null,e.eventManager),e}function _D(t){let e=P(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u3.bind(null,e),e}function I3(t,e,n){let r=P(t);(function(s,o,a){return D(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(f,p){let g=P(f),m=at(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",y=>g.$r.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(m)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(L1(c));let l=new CI(c,s.localStore,o.serializer),u=yield o.Ba();for(;u;){let h=yield l.sa(u);h&&a._updateProgress(h),u=yield o.Ba()}let d=yield l.complete();return yield di(s,d.aa,void 0),yield function(f,p){let g=P(f);return g.persistence.runTransaction("Save bundle","readwrite",m=>g.$r.saveBundleMetadata(m,p))}(s.localStore,c),a._completeWith(d.progress),Promise.resolve(d._a)}catch(c){return Ln("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var pd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return D(this,null,function*(){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return x1(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new jg(Bg.Hr,this.serializer)}createSharedClientState(e){return new qg}terminate(){return D(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var tm=class t extends pd{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return D(this,null,function*(){yield Iy(t.prototype,this,"initialize").call(this,e),yield this.ka.initialize(this,e),yield _D(this.ka.syncEngine),yield Mc(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return x1(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new W0(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new d0(n,this.persistence);return new u0(e.asyncQueue,r)}createPersistence(e){let n=cD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new aI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,P1(),fg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new qg}},RI=class t extends tm{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return D(this,null,function*(){yield Iy(t.prototype,this,"initialize").call(this,e);let n=this.ka.syncEngine;this.sharedClientState instanceof Qu&&(this.sharedClientState.syncEngine={Zs:y3.bind(null,n),Xs:w3.bind(null,n),eo:b3.bind(null,n),Bi:_3.bind(null,n),Ys:m3.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>D(this,null,function*(){yield v3(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=P1();if(!Qu.D(n))throw new C(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=cD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},gd=class{initialize(e,n){return D(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f3.bind(null,this.syncEngine),yield wI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new DI}()}createDatastore(e){let n=Id(e.databaseInfo.databaseId),r=function(s){return new pI(s)}(e.databaseInfo);return function(s,o,a,c){return new yI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new _I(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hN(this.syncEngine,n,0),function(){return Gg.D()?new Gg:new hI}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){let d=new AI(i,s,o,a,c,l);return u&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return D(this,null,function*(){var e;yield function(r){return D(this,null,function*(){let i=P(r);T("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Ac(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function pN(t,e=10240){let n=0;return{read(){return D(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return D(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ec=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):st("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var PI=class{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new gt,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){return D(this,null,function*(){return this.metadata.promise})}Ba(){return D(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return D(this,null,function*(){let e=yield this.Wa();if(e===null)return null;let n=this.$a.decode(e),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);let i=yield this.za(r);return new xI(JSON.parse(i),e.length+r)})}ja(){return this.buffer.findIndex(e=>e===123)}Wa(){return D(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}za(e){return D(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let n=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){return D(this,null,function*(){let e=yield this.Ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var NI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new C(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return D(this,null,function*(){let o=P(i),a={documents:s.map(d=>ad(o.serializer,d))},c=yield o.vo("BatchGetDocuments",o.serializer.databaseId,pe.emptyPath(),a,s.length),l=new Map;c.forEach(d=>{let h=S9(o.serializer,d);l.set(h.key.toString(),h)});let u=[];return s.forEach(d=>{let h=l.get(d.toString());B(!!h),u.push(h)}),u})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new is(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=R.fromPath(r);this.mutations.push(new nd(i,this.precondition(i)))}),yield function(r,i){return D(this,null,function*(){let s=P(r),o={writes:i.map(a=>cd(s.serializer,a))};yield s.So("Commit",s.serializer.databaseId,pe.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw F();n=$.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new C(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual($.min())?Je.exists(!1):Je.updateTime(n):Je.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual($.min()))throw new C(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Je.updateTime(n)}return Je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var kI=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ja=r.maxAttempts,this.jo=new hd(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>D(this,null,function*(){let e=new NI(this.datastore),n=this.Xa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})}))}Xa(e){try{let n=this.updateFunction(e);return!vd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!r1(n)}return!1}};var OI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=mg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>D(this,null,function*(){T("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(T("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Pc(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pg(t,e){return D(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>D(this,null,function*(){r.isEqual(i)||(yield C1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function FI(t,e){return D(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield wD(t);T("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>uN(e.remoteStore,i)),t._onlineComponents=e})}function H1(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function wD(t){return D(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){T("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!H1(n))throw n;Ln("Error using user provided cache. Falling back to memory cache: "+n),yield pg(t,new pd)}}else T("FirestoreClient","Using default OfflineComponentProvider"),yield pg(t,new pd);return t._offlineComponents})}function pm(t){return D(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(T("FirestoreClient","Using user provided OnlineComponentProvider"),yield FI(t,t._uninitializedComponentsProvider._online)):(T("FirestoreClient","Using default OnlineComponentProvider"),yield FI(t,new gd))),t._onlineComponents})}function z1(t){return wD(t).then(e=>e.persistence)}function bD(t){return wD(t).then(e=>e.localStore)}function q1(t){return pm(t).then(e=>e.remoteStore)}function ID(t){return pm(t).then(e=>e.syncEngine)}function D3(t){return pm(t).then(e=>e.datastore)}function xc(t){return D(this,null,function*(){let e=yield pm(t),n=e.eventManager;return n.onListen=r3.bind(null,e.syncEngine),n.onUnlisten=s3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o3.bind(null,e.syncEngine),n})}function E3(t){return t.asyncQueue.enqueue(()=>D(this,null,function*(){let e=yield z1(t),n=yield q1(t);return e.setNetworkEnabled(!0),function(i){let s=P(i);return s.v_.delete(0),Dd(s)}(n)}))}function x3(t){return t.asyncQueue.enqueue(()=>D(this,null,function*(){let e=yield z1(t),n=yield q1(t);return e.setNetworkEnabled(!1),function(i){return D(this,null,function*(){let s=P(i);s.v_.add(0),yield Ac(s),s.x_.set("Offline")})}(n)}))}function C3(t,e){let n=new gt;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s,o){return D(this,null,function*(){try{let a=yield function(l,u){let d=P(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new C(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Pc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield bD(t),e,n)})),n.promise}function G1(t,e,n={}){let r=new gt;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,o,a,c,l){let u=new Ec({next:h=>{o.enqueueAndForget(()=>fD(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new C(x.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new C(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new fd(Sc(a.path),u,{includeMetadataChanges:!0,ta:!0});return hD(s,d)}(yield xc(t),t.asyncQueue,e,n,r)})),r.promise}function T3(t,e){let n=new gt;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s,o){return D(this,null,function*(){try{let a=yield $g(i,s,!0),c=new em(s,a.hs),l=c.Ta(a.documents),u=c.applyChanges(l,!1);o.resolve(u.snapshot)}catch(a){let c=Pc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield bD(t),e,n)})),n.promise}function W1(t,e,n={}){let r=new gt;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,o,a,c,l){let u=new Ec({next:h=>{o.enqueueAndForget(()=>fD(s,d)),h.fromCache&&c.source==="server"?l.reject(new C(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new fd(a,u,{includeMetadataChanges:!0,ta:!0});return hD(s,d)}(yield xc(t),t.asyncQueue,e,n,r)})),r.promise}function S3(t,e){let n=new Ec(e);return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s){P(i).W_.add(s),s.next()}(yield xc(t),n)})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s){P(i).W_.delete(s)}(yield xc(t),n)}))}}function A3(t,e,n,r){let i=function(o,a){let c;return c=typeof o=="string"?s1().encode(o):o,function(u,d){return new PI(u,d)}(function(u,d){if(u instanceof Uint8Array)return pN(u,d);if(u instanceof ArrayBuffer)return pN(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Id(e));t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){I3(yield ID(t),i,r)}))}function M3(t,e){return t.asyncQueue.enqueue(()=>D(this,null,function*(){return function(r,i){let s=P(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield bD(t),e)}))}function K1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var gN=new Map;function DD(t,e,n){if(!n)throw new C(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ED(t,e,n,r){if(e===!0&&r===!0)throw new C(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mN(t){if(!R.isDocumentKey(t))throw new C(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yN(t){if(R.isDocumentKey(t))throw new C(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":F()}function ge(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=gm(t);throw new C(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Q1(t,e){if(e<=0)throw new C(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var nm=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new C(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new C(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ED("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new C(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new C(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new C(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},bo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new C(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new e0;switch(r.type){case"firstParty":return new i0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new C(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=gN.get(n);r&&(T("ComponentProvider","Removing Datastore"),gN.delete(n),r.terminate())}(this),Promise.resolve()}};function Y1(t,e,n,r={}){var i;let s=(t=ge(t,bo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=pt.MOCK_USER;else{a=vx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new C(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new pt(l)}t._authCredentials=new t0(new gg(a,c))}}var kt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Re=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Mr=class t extends kt{constructor(e,n,r){super(e,n,Sc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new R(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xD(t,e,...n){if(t=$e(t),DD("collection","path",e),t instanceof bo){let r=pe.fromString(e,...n);return yN(r),new Mr(t,null,r)}{if(!(t instanceof Re||t instanceof Mr))throw new C(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return yN(r),new Mr(t.firestore,null,r)}}function Z1(t,e){if(t=ge(t,bo),DD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new C(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kt(t,null,function(r){return new rr(pe.emptyPath(),r)}(e))}function Ed(t,e,...n){if(t=$e(t),arguments.length===1&&(e=mg.newId()),DD("doc","path",e),t instanceof bo){let r=pe.fromString(e,...n);return mN(r),new Re(t,null,new R(r))}{if(!(t instanceof Re||t instanceof Mr))throw new C(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return mN(r),new Re(t.firestore,t instanceof Mr?t.converter:null,new R(r))}}function CD(t,e){return t=$e(t),e=$e(e),(t instanceof Re||t instanceof Mr)&&(e instanceof Re||e instanceof Mr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function TD(t,e){return t=$e(t),e=$e(e),t instanceof kt&&e instanceof kt&&t.firestore===e.firestore&&wd(t._query,e._query)&&t.converter===e.converter}var VI=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new hd(this,"async_queue_retry"),this.cu=()=>{let n=fg();n&&T("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=fg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=fg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new gt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return D(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!as(e))throw e;T("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw st("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=bI.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&F()}verifyOperationInProgress(){}Tu(){return D(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function LI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var jI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var X1=-1,Ue=class extends bo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new VI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||J1(this),this._firestoreClient.terminate()}};function _t(t){return t._firestoreClient||J1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function J1(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,u){return new h0(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,K1(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new OI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ek(t,e){lk(t=ge(t,Ue));let n=_t(t);if(n._uninitializedComponentsProvider)throw new C(x.FAILED_PRECONDITION,"SDK cache is already specified.");Ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new gd;return nk(n,i,new tm(i,r.cacheSizeBytes,e?.forceOwnership))}function tk(t){lk(t=ge(t,Ue));let e=_t(t);if(e._uninitializedComponentsProvider)throw new C(x.FAILED_PRECONDITION,"SDK cache is already specified.");Ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new gd;return nk(e,r,new RI(r,n.cacheSizeBytes))}function nk(t,e,n){let r=new gt;return t.asyncQueue.enqueue(()=>D(this,null,function*(){try{yield pg(t,n),yield FI(t,e),r.resolve()}catch(i){let s=i;if(!H1(s))throw s;Ln("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function rk(t){if(t._initialized&&!t._terminated)throw new C(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new gt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{yield function(r){return D(this,null,function*(){if(!si.D())return Promise.resolve();let i=r+"main";yield si.delete(i)})}(cD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function ik(t){return function(n){let r=new gt;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return d3(yield ID(n),r)})),r.promise}(_t(t=ge(t,Ue)))}function sk(t){return E3(_t(t=ge(t,Ue)))}function ok(t){return x3(_t(t=ge(t,Ue)))}function ak(t,e){let n=_t(t=ge(t,Ue)),r=new jI;return A3(n,t._databaseId,e,r),r}function ck(t,e){return M3(_t(t=ge(t,Ue)),e).then(n=>n?new kt(t,null,n.query):null)}function lk(t){if(t._initialized||t._terminated)throw new C(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(xt.fromBase64String(e))}catch(n){throw new C(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var sr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new C(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var li=class{constructor(e){this._methodName=e}};var Io=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}};var R3=/^__.*__$/,BI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new rs(e,this.data,n,this.fieldTransforms)}},rm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function uk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}var im=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return sm(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(uk(this.Vu)&&R3.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},UI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Id(e)}Cu(e,n,r,i=!1){return new im({Vu:e,methodName:n,Du:r,path:ot.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Co(t){let e=t._freezeSettings(),n=Id(t._databaseId);return new UI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mm(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);MD("Data must be an object, but it was:",o,r);let a=fk(r,o),c,l;if(s.merge)c=new Cn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=GI(e,d,n);if(!o.contains(h))throw new C(x.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);gk(u,h)||u.push(h)}c=new Cn(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new BI(new qt(a),c,l)}var md=class t extends li{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function dk(t,e,n){return new im({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var $I=class t extends li{_toFieldTransform(e){return new vo(e.path,new ts)}isEqual(e){return e instanceof t}},HI=class t extends li{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=dk(this,e,!0),r=this.vu.map(s=>To(s,n)),i=new ai(r);return new vo(e.path,i)}isEqual(e){return e instanceof t&&xy(this.vu,e.vu)}},zI=class t extends li{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=dk(this,e,!0),r=this.vu.map(s=>To(s,n)),i=new ci(r);return new vo(e.path,i)}isEqual(e){return e instanceof t&&xy(this.vu,e.vu)}},qI=class t extends li{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){let n=new ns(e.serializer,YN(e.serializer,this.Fu));return new vo(e.path,n)}isEqual(e){return e instanceof t&&this.Fu===e.Fu}};function SD(t,e,n,r){let i=t.Cu(1,e,n);MD("Data must be an object, but it was:",i,r);let s=[],o=qt.empty();xo(r,(c,l)=>{let u=RD(e,c,n);l=$e(l);let d=i.yu(u);if(l instanceof md)s.push(u);else{let h=To(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new Cn(s);return new rm(o,a,i.fieldTransforms)}function AD(t,e,n,r,i,s){let o=t.Cu(1,e,n),a=[GI(e,r,n)],c=[i];if(s.length%2!=0)throw new C(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(GI(e,s[h])),c.push(s[h+1]);let l=[],u=qt.empty();for(let h=a.length-1;h>=0;--h)if(!gk(l,a[h])){let f=a[h],p=c[h];p=$e(p);let g=o.yu(f);if(p instanceof md)l.push(f);else{let m=To(p,g);m!=null&&(l.push(f),u.set(f,m))}}let d=new Cn(l);return new rm(u,d,o.fieldTransforms)}function hk(t,e,n,r=!1){return To(n,t.Cu(r?4:3,e))}function To(t,e){if(pk(t=$e(t)))return MD("Unsupported field value:",e,t),fk(t,e);if(t instanceof li)return function(r,i){if(!uk(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=To(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ze.fromDate(r);return{timestampValue:mc(i.serializer,s)}}if(r instanceof ze){let s=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(i.serializer,s)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:o1(i.serializer,r._byteString)};if(r instanceof Re){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${gm(r)}`)}(t,e)}function fk(t,e){let n={};return PN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(r,i)=>{let s=To(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function pk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Io||t instanceof kr||t instanceof Re||t instanceof li)}function MD(t,e,n){if(!pk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=gm(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function GI(t,e,n){if((e=$e(e))instanceof sr)return e._internalPath;if(typeof e=="string")return RD(t,e);throw sm("Field path arguments must be of type string or ",t,!1,void 0,n)}var P3=new RegExp("[~\\*/\\[\\]]");function RD(t,e,n){if(e.search(P3)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sr(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sm(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new C(x.INVALID_ARGUMENT,a+t+c)}function gk(t,e){return t.some(n=>n.isEqual(e))}var Do=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new WI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ym("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},WI=class extends Do{data(){return super.data()}};function ym(t,e){return typeof e=="string"?RD(t,e):e instanceof sr?e._internalPath:e._delegate._internalPath}function mk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new C(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yd=class{},Eo=class extends yd{};function hi(t,e,...n){let r=[];e instanceof yd&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof KI).length,a=s.filter(c=>c instanceof om).length;if(o>1||o>0&&a>0)throw new C(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var om=class t extends Eo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Ck(e._query,n),new kt(e.firestore,e.converter,x0(e._query,n))}_parse(e){let n=Co(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new C(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){_N(d,u);let f=[];for(let p of d)f.push(vN(c,s,p));h={arrayValue:{values:f}}}else h=vN(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||_N(d,u),h=hk(a,o,d,u==="in"||u==="not-in");return le.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function yk(t,e,n){let r=e,i=ym("where",t);return om._create(i,r,n)}var KI=class t extends yd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Ck(o,c),o=x0(o,c)}(e._query,n),new kt(e.firestore,e.converter,x0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var QI=class t extends Eo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new C(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new C(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(s,o)}(e._query,this._field,this._direction);return new kt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new rr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function vk(t,e="asc"){let n=e,r=ym("orderBy",t);return QI._create(r,n)}var am=class t extends Eo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new kt(e.firestore,e.converter,Cg(e._query,this._limit,this._limitType))}};function _k(t){return Q1("limit",t),am._create("limit",t,"F")}function wk(t){return Q1("limitToLast",t),am._create("limitToLast",t,"L")}var cm=class t extends Eo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=xk(e,this.type,this._docOrFields,this._inclusive);return new kt(e.firestore,e.converter,function(i,s){return new rr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function bk(...t){return cm._create("startAt",t,!0)}function Ik(...t){return cm._create("startAfter",t,!1)}var lm=class t extends Eo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=xk(e,this.type,this._docOrFields,this._inclusive);return new kt(e.firestore,e.converter,function(i,s){return new rr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function Dk(...t){return lm._create("endBefore",t,!1)}function Ek(...t){return lm._create("endAt",t,!0)}function xk(t,e,n,r){if(n[0]=$e(n[0]),n[0]instanceof Do)return function(s,o,a,c,l){if(!c)throw new C(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of cc(s))if(d.field.isKeyField())u.push(go(o,c.key));else{let h=c.data.field(d.field);if(dm(h))throw new C(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new C(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Pr(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Co(t.firestore);return function(o,a,c,l,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new C(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let p=0;p<u.length;p++){let g=u[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new C(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof g}`);if(!rD(o)&&g.indexOf("/")!==-1)throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${g}' contains a slash.`);let m=o.path.child(pe.fromString(g));if(!R.isDocumentKey(m))throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let y=new R(m);f.push(go(a,y))}else{let m=hk(c,l,g);f.push(m)}}return new Pr(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function vN(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new C(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rD(e)&&n.indexOf("/")!==-1)throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(pe.fromString(n));if(!R.isDocumentKey(r))throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return go(t,new R(r))}if(n instanceof Re)return go(t,n._key);throw new C(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gm(n)}.`)}function _N(t,e){if(!Array.isArray(t)||t.length===0)throw new C(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ck(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new C(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new C(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Cc=class{convertValue(e,n="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw F()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return xo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Io(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=tD(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){let n=oi(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=pe.fromString(e);B(y1(r));let i=new Ji(r.get(1),r.get(3)),s=new R(r.popFirst(5));return i.isEqual(n)||st(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function vm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var YI=class extends Cc{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}};var ii=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bn=class extends Do{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Yi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ym("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Yi=class extends Bn{data(e={}){return super.data(e)}},or=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ii(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yi(this._firestore,this._userDataWriter,r.key,r,new ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:N3(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function N3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function PD(t,e){return t instanceof Bn&&e instanceof Bn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof or&&e instanceof or&&t._firestore===e._firestore&&TD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Tk(t){t=ge(t,Re);let e=ge(t.firestore,Ue);return G1(_t(e),t._key).then(n=>FD(e,t,n))}var ui=class extends Cc{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}};function Sk(t){t=ge(t,Re);let e=ge(t.firestore,Ue),n=_t(e),r=new ui(e);return C3(n,t._key).then(i=>new Bn(e,r,t._key,i,new ii(i!==null&&i.hasLocalMutations,!0),t.converter))}function Ak(t){t=ge(t,Re);let e=ge(t.firestore,Ue);return G1(_t(e),t._key,{source:"server"}).then(n=>FD(e,t,n))}function Mk(t){t=ge(t,kt);let e=ge(t.firestore,Ue),n=_t(e),r=new ui(e);return mk(t._query),W1(n,t._query).then(i=>new or(e,r,t,i))}function Rk(t){t=ge(t,kt);let e=ge(t.firestore,Ue),n=_t(e),r=new ui(e);return T3(n,t._query).then(i=>new or(e,r,t,i))}function Pk(t){t=ge(t,kt);let e=ge(t.firestore,Ue),n=_t(e),r=new ui(e);return W1(n,t._query,{source:"server"}).then(i=>new or(e,r,t,i))}function ND(t,e,n){t=ge(t,Re);let r=ge(t.firestore,Ue),i=vm(t.converter,e,n);return Nc(r,[mm(Co(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Je.none())])}function kD(t,e,n,...r){t=ge(t,Re);let i=ge(t.firestore,Ue),s=Co(i),o;return o=typeof(e=$e(e))=="string"||e instanceof sr?AD(s,"updateDoc",t._key,e,n,r):SD(s,"updateDoc",t._key,e),Nc(i,[o.toMutation(t._key,Je.exists(!0))])}function Nk(t){return Nc(ge(t.firestore,Ue),[new is(t._key,Je.none())])}function kk(t,e){let n=ge(t.firestore,Ue),r=Ed(t),i=vm(t.converter,e);return Nc(n,[mm(Co(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Je.exists(!1))]).then(()=>r)}function OD(t,...e){var n,r,i;t=$e(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||LI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(LI(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof Re)l=ge(t.firestore,Ue),u=Sc(t._key.path),c={next:d=>{e[o]&&e[o](FD(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=ge(t,kt);l=ge(d.firestore,Ue),u=d._query;let h=new ui(l);c={next:f=>{e[o]&&e[o](new or(l,h,d,f))},error:e[o+1],complete:e[o+2]},mk(t._query)}return function(h,f,p,g){let m=new Ec(g),y=new fd(f,m,p);return h.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return hD(yield xc(h),y)})),()=>{m.Qa(),h.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return fD(yield xc(h),y)}))}}(_t(l),u,a,c)}function Ok(t,e){return S3(_t(t=ge(t,Ue)),LI(e)?e:{next:e})}function Nc(t,e){return function(r,i){let s=new gt;return r.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return a3(yield ID(r),i,s)})),s.promise}(_t(t),e)}function FD(t,e,n){let r=n.docs.get(e._key),i=new ui(t);return new Bn(t,i,e._key,r,new ii(n.hasPendingWrites,n.fromCache),e.converter)}var k3={maxAttempts:5};var um=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Co(e)}set(e,n,r){this._verifyNotCommitted();let i=Ki(e,this._firestore),s=vm(i.converter,n,r),o=mm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Je.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Ki(e,this._firestore),o;return o=typeof(n=$e(n))=="string"||n instanceof sr?AD(this._dataReader,"WriteBatch.update",s._key,n,r,i):SD(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Je.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ki(e,this._firestore);return this._mutations=this._mutations.concat(new is(n._key,Je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new C(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ki(t,e){if((t=$e(t)).firestore!==e)throw new C(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ZI=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Co(n)}get(n){let r=Ki(n,this._firestore),i=new YI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return F();let o=s[0];if(o.isFoundDocument())return new Do(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Do(this._firestore,i,r._key,null,r.converter);throw F()})}set(n,r,i){let s=Ki(n,this._firestore),o=vm(s.converter,r,i),a=mm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Ki(n,this._firestore),a;return a=typeof(r=$e(r))=="string"||r instanceof sr?AD(this._dataReader,"Transaction.update",o._key,r,i,s):SD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Ki(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ki(e,this._firestore),r=new ui(this._firestore);return super.get(e).then(i=>new Bn(this._firestore,r,n._key,i._document,new ii(!1,!1),n.converter))}};function Fk(t,e,n){t=ge(t,Ue);let r=Object.assign(Object.assign({},k3),n);return function(s){if(s.maxAttempts<1)throw new C(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new gt;return s.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){let l=yield D3(s);new kI(s.asyncQueue,l,a,o,c).Ya()})),c.promise}(_t(t),i=>e(new ZI(t,i)),r)}function Vk(){return new md("deleteField")}function Lk(){return new $I("serverTimestamp")}function jk(...t){return new HI("arrayUnion",t)}function Bk(...t){return new zI("arrayRemove",t)}function Uk(t){return new qI("increment",t)}(function(e,n=!0){(function(i){Tc=i})(bx),dl(new As("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ue(new n0(r.getProvider("auth-internal")),new o0(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new C(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ji(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bi(wP,"4.6.0",e),bi(wP,"4.6.0","esm2017")})();var O3="@firebase/firestore-compat",F3="0.3.29";function $D(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new C("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function $k(){if(typeof Uint8Array>"u")throw new C("unimplemented","Uint8Arrays are not available in this environment.")}function Hk(){if(!NN())throw new C("unimplemented","Blobs are unavailable in Firestore in this environment.")}var _m=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Hk(),new t(kr.fromBase64String(e))}static fromUint8Array(e){return $k(),new t(kr.fromUint8Array(e))}toBase64(){return Hk(),this._delegate.toBase64()}toUint8Array(){return $k(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function VD(t){return V3(t,["next","error","complete"])}function V3(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var LD=class{enableIndexedDbPersistence(e,n){return ek(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return tk(e._delegate)}clearIndexedDbPersistence(e){return rk(e._delegate)}},wm=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ji||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Y1(this._delegate,e,n,r)}enableNetwork(){return sk(this._delegate)}disableNetwork(){return ok(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ED("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ik(this._delegate)}onSnapshotsInSync(e){return Ok(this._delegate,e)}get app(){if(!this._appCompat)throw new C("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fc(this,xD(this._delegate,e))}catch(n){throw nn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Or(this,Ed(this._delegate,e))}catch(n){throw nn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ro(this,Z1(this._delegate,e))}catch(n){throw nn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Fk(this._delegate,n=>e(new bm(this,n)))}batch(){return _t(this._delegate),new Im(new um(this._delegate,e=>Nc(this._delegate,e)))}loadBundle(e){return ak(this._delegate,e)}namedQuery(e){return ck(this._delegate,e).then(n=>n?new Ro(this,n):null)}},kc=class extends Cc{constructor(e){super(),this.firestore=e}convertBytes(e){return new _m(new kr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Or.forKey(n,this.firestore,null)}};function L3(t){wN(t)}var bm=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new kc(e)}get(e){let n=So(e);return this._delegate.get(n).then(r=>new Ao(this._firestore,new Bn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=So(e);return r?($D("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=So(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=So(e);return this._delegate.delete(n),this}},Im=class{constructor(e){this._delegate=e}set(e,n,r){let i=So(e);return r?($D("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=So(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=So(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Oc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Yi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mo(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new kc(e),n),i.set(n,s)),s}};Oc.INSTANCES=new WeakMap;var Or=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new C("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Re(n._delegate,r,new R(e)))}static forKey(e,n,r){return new t(n,new Re(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fc(this.firestore,xD(this._delegate,e))}catch(n){throw nn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=$e(e),e instanceof Re?CD(this._delegate,e):!1}set(e,n){n=$D("DocumentReference.set",n);try{return n?ND(this._delegate,e,n):ND(this._delegate,e)}catch(r){throw nn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?kD(this._delegate,e):kD(this._delegate,e,n,...r)}catch(i){throw nn(i,"updateDoc()","DocumentReference.update()")}}delete(){return Nk(this._delegate)}onSnapshot(...e){let n=zk(e),r=qk(e,i=>new Ao(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return OD(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=Sk(this._delegate):e?.source==="server"?n=Ak(this._delegate):n=Tk(this._delegate),n.then(r=>new Ao(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Oc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function nn(t,e,n){return t.message=t.message.replace(e,n),t}function zk(t){for(let e of t)if(typeof e=="object"&&!VD(e))return e;return{}}function qk(t,e){var n,r;let i;return VD(t[0])?i=t[0]:VD(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ao=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return PD(this._delegate,e._delegate)}},Mo=class extends Ao{data(e){let n=this._delegate.data(e);return this._delegate._converter||bN(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ro=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kc(e)}where(e,n,r){try{return new t(this.firestore,hi(this._delegate,yk(e,n,r)))}catch(i){throw nn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,hi(this._delegate,vk(e,n)))}catch(r){throw nn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,hi(this._delegate,_k(e)))}catch(n){throw nn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,hi(this._delegate,wk(e)))}catch(n){throw nn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,hi(this._delegate,bk(...e)))}catch(n){throw nn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,hi(this._delegate,Ik(...e)))}catch(n){throw nn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,hi(this._delegate,Dk(...e)))}catch(n){throw nn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,hi(this._delegate,Ek(...e)))}catch(n){throw nn(n,"endAt()","Query.endAt()")}}isEqual(e){return TD(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=Rk(this._delegate):e?.source==="server"?n=Pk(this._delegate):n=Mk(this._delegate),n.then(r=>new xd(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=zk(e),r=qk(e,i=>new xd(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return OD(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Oc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},jD=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Mo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},xd=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new jD(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Mo(this._firestore,r))})}isEqual(e){return PD(this._delegate,e._delegate)}},Fc=class t extends Ro{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Or(this.firestore,e):null}doc(e){try{return e===void 0?new Or(this.firestore,Ed(this._delegate)):new Or(this.firestore,Ed(this._delegate,e))}catch(n){throw nn(n,"doc()","CollectionReference.doc()")}}add(e){return kk(this._delegate,e).then(n=>new Or(this.firestore,n))}isEqual(e){return CD(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Oc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function So(t){return ge(t,Re)}var BD=class t{constructor(...e){this._delegate=new sr(...e)}static documentId(){return new t(ot.keyField().canonicalString())}isEqual(e){return e=$e(e),e instanceof sr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var UD=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Lk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Vk();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=jk(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Bk(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=Uk(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var j3={Firestore:wm,GeoPoint:Io,Timestamp:ze,Blob:_m,Transaction:bm,WriteBatch:Im,DocumentReference:Or,DocumentSnapshot:Ao,Query:Ro,QueryDocumentSnapshot:Mo,QuerySnapshot:xd,CollectionReference:Fc,FieldPath:BD,FieldValue:UD,setLogLevel:L3,CACHE_SIZE_UNLIMITED:X1};function B3(t,e){t.INTERNAL.registerComponent(new As("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},j3)))}function U3(t){B3(t,(e,n)=>new wm(e,n,new LD)),t.registerVersion(O3,F3)}U3(Lt);function $3(t,e=gl){return new se(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function Gk(t,e){return $3(t,e)}function H3(t,e){return Gk(t,e).pipe(Os(void 0),vl(),z(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function qD(t,e){return Gk(t,e).pipe(z(n=>({payload:n,type:"query"})))}var Dm=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=Zk(r,n);return new xm(i,s,this.afs)}snapshotChanges(){return H3(this.ref,this.afs.schedulers.outsideAngular).pipe(ln)}valueChanges(e={}){return this.snapshotChanges().pipe(z(({payload:n})=>e.idField?de(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ye(this.ref.get(e)).pipe(ln)}};function Em(t,e){return qD(t,e).pipe(Os(void 0),vl(),z(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(d=>d.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function Wk(t,e,n){return Em(t,n).pipe(ks((r,i)=>z3(r,i.map(s=>s.payload),e),[]),qy(),z(r=>r.map(i=>({type:i.type,payload:i}))))}function z3(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=q3(t,r))}),t}function HD(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function q3(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return HD(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return HD(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HD(t,e.oldIndex,1);break}return t}function Kk(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var xm=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Em(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(z(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Os(void 0),vl(),At(([r,i])=>i.length>0||!r),z(([,r])=>r),ln)}auditTrail(e){return this.stateChanges(e).pipe(ks((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=Kk(e);return Wk(this.query,n,this.afs.schedulers.outsideAngular).pipe(ln)}valueChanges(e={}){return qD(this.query,this.afs.schedulers.outsideAngular).pipe(z(n=>n.payload.docs.map(r=>e.idField?de(N({},r.data()),{[e.idField]:r.id}):r.data())),ln)}get(e){return ye(this.query.get(e)).pipe(ln)}add(e){return this.ref.add(e)}doc(e){return new Dm(this.ref.doc(e),this.afs)}},zD=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Em(this.query,this.afs.schedulers.outsideAngular).pipe(ln):Em(this.query,this.afs.schedulers.outsideAngular).pipe(z(n=>n.filter(r=>e.indexOf(r.type)>-1)),At(n=>n.length>0),ln)}auditTrail(e){return this.stateChanges(e).pipe(ks((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=Kk(e);return Wk(this.query,n,this.afs.schedulers.outsideAngular).pipe(ln)}valueChanges(e={}){return qD(this.query,this.afs.schedulers.outsideAngular).pipe(z(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),ln)}get(e){return ye(this.query.get(e)).pipe(ln)}},Qk=new V("angularfire2.enableFirestorePersistence"),Yk=new V("angularfire2.firestore.persistenceSettings"),G3=new V("angularfire2.firestore.settings"),W3=new V("angularfire2.firestore.use-emulator");function Zk(t,e=n=>n){return{query:e(t),ref:t}}var GD=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,c,l,u,d,h,f,p,g,m,y,v){this.schedulers=c;let _=gu(n,a,r),b=u;d&&sb(_,a,h,p,g,m,f,y),[this.firestore,this.persistenceEnabled$]=Sp(`${_.name}.firestore`,"AngularFirestore",_.name,()=>{let w=a.runOutsideAngular(()=>_.firestore());if(s&&w.settings(s),b&&w.useEmulator(...b),i&&!Ks(o)){let E=()=>{try{return ye(w.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(A){return typeof console<"u"&&console.warn(A),H(!1)}};return[w,a.runOutsideAngular(E)]}else return[w,H(!1)]},[s,b,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=Zk(i,r),a=this.schedulers.ngZone.run(()=>s);return new xm(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new zD(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Dm(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(M(Ha),M(za,8),M(Qk,8),M(G3,8),M(an),M(ue),M(xp),M(Yk,8),M(W3,8),M(Ap,8),M(Jw,8),M(eb,8),M(tb,8),M(nb,8),M(rb,8),M(ib,8),M(Js,8))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Xk=(()=>{class t{constructor(){Lt.registerVersion("angularfire",$a.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:Qk,useValue:!0},{provide:Yk,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=Ke({providers:[GD]})}return t})();var dn=(()=>{let e=class e{constructor(r){this.fireAuth=r}signup(r,i){return D(this,null,function*(){try{return(yield this.fireAuth.createUserWithEmailAndPassword(r,i)).user}catch(s){throw console.error(s),s}})}login(r,i){return D(this,null,function*(){try{return(yield this.fireAuth.signInWithEmailAndPassword(r,i)).user}catch(s){throw console.error(s),s}})}logout(){return this.fireAuth.signOut()}getCurrentUserID(){return Lt.auth().currentUser?.uid}};e.\u0275fac=function(i){return new(i||e)(M(Ap))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ls=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.auth=i}getItems(r){return console.log("User id:",r),this.firestore.collection("users").doc(r).valueChanges().subscribe(i=>{this.docId=i.id}),console.log("document id:",this.docId),this.firestore.collection("devices").doc(this.docId).valueChanges().subscribe(i=>{this.items=i}),console.log("items",this.items),this.items}addNewDevice(r,i){this.firestore.collection("users").doc(this.auth.getCurrentUserID()).set({id:r,name:i})}getDeviceName(r){return this.firestore.collection("users").doc(r).valueChanges().subscribe(i=>{this.deviceName=i.name}),this.deviceName}};e.\u0275fac=function(i){return new(i||e)(M(GD),M(dn))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Q3(t,e){t&1&&(he(0,"div",1),He(1,"img",2),he(2,"div",3),bT(),he(3,"svg",4),He(4,"path",5),ve()()())}function Y3(t,e){if(t&1){let n=AS();he(0,"div",6),Ut("click",function(){dT(n);let i=jl();return hT(i.Change())}),He(1,"img",2),he(2,"div",7)(3,"h1"),Ye(4),ve(),he(5,"p"),Ye(6),ve(),he(7,"p"),Ye(8),ve()()()}if(t&2){let n=jl();Yt(4),Cf(n.GetName()),Yt(2),Cf(n.device.data[0].date),Yt(2),wa("Level: ",n.device.data[0].depth,"cm")}}var Jk=(()=>{let e=class e{constructor(r,i,s,o){this.auth=r,this.fire=i,this.datePipe=s,this.router=o}GetName(){return this.fire.getDeviceName(this.auth.getCurrentUserID())}Change(){this.router.navigateByUrl("/device")}};e.\u0275fac=function(i){return new(i||e)(q(dn),q(ls),q(Da),q(Rt))},e.\u0275cmp=bt({type:e,selectors:[["app-main-device"]],inputs:{device:"device"},decls:2,vars:1,consts:[["class","card"],[1,"card"],["src","../../../assets/Images/oiltank.jpg","alt","oiltank.jpg"],["id","addSVG",1,"default"],["id","masking","xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 -960 960 960","width","24"],["d","M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"],[1,"card",3,"click"],[1,"info"]],template:function(i,s){i&1&&Ll(0,Q3,5,0,"div",0)(1,Y3,9,3),i&2&&xf(0,s.device.default?0:s.device.default?-1:1)},styles:[".card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover;transition:all .2s}.card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.info[_ngcontent-%COMP%]{width:100%;height:100%;bottom:0;position:absolute;padding-left:15px;color:#fff;z-index:1;background-color:#00000050}.default[_ngcontent-%COMP%]{width:100%;height:100%;bottom:0;position:absolute;color:#fff;z-index:1;background-color:#00000080}svg[_ngcontent-%COMP%]{width:100%;height:100%;filter:invert(50%)}svg[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_Rotation .5s ease}@keyframes _ngcontent-%COMP%_Rotation{0%{transform:rotate(0)}to{transform:rotate(90deg)}}"]});let t=e;return t})();function X3(t,e){if(t&1&&He(0,"app-main-device",2),t&2){let n=jl();_r("device",n.items)}}var J3=()=>({default:!0}),eO=(()=>{let e=class e{constructor(r,i,s,o){this.datePipe=r,this.router=i,this.fire=s,this.auth=o}ngOnInit(){this.test=this.fire.getItems(this.auth.getCurrentUserID()),console.log("hello world"),console.log(this.test)}tests(){console.log("hey again sup brah"),this.items=this.fire.getItems(this.auth.getCurrentUserID()),console.log("thisone"),console.table(this.items)}NewDevice(){this.router.navigateByUrl("/new")}};e.\u0275fac=function(i){return new(i||e)(q(Da),q(Rt),q(ls),q(dn))},e.\u0275cmp=bt({type:e,selectors:[["app-main-base"]],decls:6,vars:3,consts:[[1,"container"],[1,"deviceList"],[3,"device"],[2,"cursor","pointer",3,"device","click"],["type","button",3,"click"]],template:function(i,s){i&1&&(he(0,"div",0)(1,"div",1),Ll(2,X3,1,1,"app-main-device",2),he(3,"app-main-device",3),Ut("click",function(){return s.NewDevice()}),ve()(),he(4,"button",4),Ut("click",function(){return s.tests()}),Ye(5,"Generate data"),ve()()),i&2&&(Yt(2),xf(2,s.items!==void 0?2:-1),Yt(),_r("device",NS(2,J3)))},dependencies:[Jk],styles:[".deviceList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(420px,1rem));gap:20px;justify-content:flex-start}"]});let t=e;return t})();var tO=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.fb=i,this.router=s}ngOnInit(){this.logIn=this.fb.group({email:["",[Xt.required,Xt.email]],password:["",[Xt.required,Xt.minLength(8)]]})}onSubmit(){if(this.logIn.valid){this.login();return}}login(){return D(this,null,function*(){try{let r=yield this.authService.login(this.logIn.get("email")?.value,this.logIn.get("password")?.value);console.log("Logged in user:",r),this.router.navigateByUrl("/home")}catch(r){console.error("Login unsuccessful:",r)}})}};e.\u0275fac=function(i){return new(i||e)(q(dn),q(Ma),q(Rt))},e.\u0275cmp=bt({type:e,selectors:[["app-auth-login"]],decls:15,vars:1,consts:[[1,"container"],[1,"cover"],[1,"input",3,"formGroup","ngSubmit"],[1,"login","email"],["for","email",1,"mail","lbl"],["type","email","name","email","id","email","formControlName","email"],[1,"login","password"],["for","password",1,"pass","lbl"],["type","password","name","password","id","password","formControlName","password"],[1,"login","submit"],["type","submit"]],template:function(i,s){i&1&&(he(0,"div",0)(1,"div",1),Ye(2," Log In "),ve(),he(3,"form",2),Ut("ngSubmit",function(){return s.onSubmit()}),he(4,"div",3)(5,"label",4),Ye(6,"Email"),ve(),He(7,"input",5),ve(),he(8,"div",6)(9,"label",7),Ye(10,"Password"),ve(),He(11,"input",8),ve(),he(12,"div",9)(13,"button",10),Ye(14,"Sign Back In"),ve()()()()),i&2&&(Yt(3),_r("formGroup",s.logIn))},dependencies:[Aa,Vi,Ta,Sa,Qs,Ys],styles:['.container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;z-index:1;background-color:transparent;display:grid;justify-content:center;align-items:center;display:none}.input[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-areas:"name" "pass" "btn";position:relative;justify-content:center;align-items:center}.email[_ngcontent-%COMP%]{grid-area:name}.password[_ngcontent-%COMP%]{grid-area:pass}.submit[_ngcontent-%COMP%]{grid-area:btn}.lbl[_ngcontent-%COMP%]{position:absolute}.submit[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{border:none;border-bottom:1px solid black;box-shadow:0 5px 5px -2px #000;cursor:auto}button[_ngcontent-%COMP%]{width:fit-content;font-size:1.5rem;border:none;background-color:#fff;cursor:pointer;border:1px solid grey;border-radius:10px;box-shadow:5px 5px 7px #000;border:#0000}button[_ngcontent-%COMP%]:hover{background-color:#c8c8c8}button[_ngcontent-%COMP%]:active{box-shadow:inset 5px 5px 7px #000}label[_ngcontent-%COMP%]{transform:translateY(-15px)}']});let t=e;return t})();var nO=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.fb=i,this.router=s}ngOnInit(){this.signUp=this.fb.group({email:["",[Xt.required,Xt.email]],password:["",[Xt.required,Xt.minLength(8)]]})}onSubmit(){if(this.signUp.valid){this.signin();return}alert(`Invalid entries
There was an invalid input, please try entering in correct values`)}signin(){return D(this,null,function*(){try{let r=yield this.authService.signup(this.signUp.get("email")?.value,this.signUp.get("password")?.value);console.log("Logged in user:",r),this.router.navigateByUrl("/home")}catch(r){console.error("Login unsuccessful:",r)}})}};e.\u0275fac=function(i){return new(i||e)(q(dn),q(Ma),q(Rt))},e.\u0275cmp=bt({type:e,selectors:[["app-auth-signup"]],decls:14,vars:1,consts:[[1,"container"],[2,"width","100%","height","100%"],[1,"input",3,"formGroup","ngSubmit"],[1,"signup","email"],["for","email",1,"mail","lbl"],["type","email","name","email","id","email","formControlName","email"],[1,"signup","password"],["for","password",1,"pass","lbl"],["type","password","name","password","id","password","formControlName","password"],[1,"signup","submit"],["type","submit","id","submit"]],template:function(i,s){i&1&&(he(0,"div",0)(1,"div",1)(2,"form",2),Ut("ngSubmit",function(){return s.onSubmit()}),he(3,"div",3)(4,"label",4),Ye(5,"Email"),ve(),He(6,"input",5),ve(),he(7,"div",6)(8,"label",7),Ye(9,"Password"),ve(),He(10,"input",8),ve(),he(11,"div",9)(12,"button",10),Ye(13,"Create Account"),ve()()()()()),i&2&&(Yt(2),_r("formGroup",s.signUp))},dependencies:[Aa,Vi,Ta,Sa,Qs,Ys],styles:['label[_ngcontent-%COMP%]{transform:translateY(-15px)}.container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;z-index:1;background-color:transparent;display:grid;justify-content:center;align-items:center;display:none}form[_ngcontent-%COMP%]{width:100%;height:100%}.input[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-areas:"name" "pass" "btn";position:relative;justify-content:center;align-items:center}.email[_ngcontent-%COMP%]{grid-area:name}.password[_ngcontent-%COMP%]{grid-area:pass}.confirm[_ngcontent-%COMP%]{grid-area:conf}.submit[_ngcontent-%COMP%]{grid-area:btn}.lbl[_ngcontent-%COMP%]{position:absolute}.submit[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{border:none;border-bottom:1px solid black;box-shadow:0 5px 5px -2px #000;cursor:auto}button[_ngcontent-%COMP%]{width:fit-content;font-size:1.5rem;border:none;background-color:#fff;cursor:pointer;border:1px solid grey;border-radius:10px;box-shadow:5px 5px 7px #000;border:#0000}button[_ngcontent-%COMP%]:hover{background-color:#c8c8c8}button[_ngcontent-%COMP%]:active{box-shadow:inset 5px 5px 7px #000}']});let t=e;return t})();var rO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=bt({type:e,selectors:[["app-auth-base"]],decls:3,vars:0,consts:[[1,"container"],[1,"card","login"],[1,"card","signup"]],template:function(i,s){i&1&&(he(0,"div",0),He(1,"app-auth-login",1)(2,"app-auth-signup",2),ve())},dependencies:[tO,nO],styles:['.container[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;grid-template-areas:"login signup";gap:10%;width:100%;transform:translateY(70%)}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #000;transform:scale(1.1)}@media screen and (max-width: 660px){.container[_ngcontent-%COMP%]{transform:translateY(0);grid-template-areas:"login" "signup"}}.card[_ngcontent-%COMP%]{width:300px;height:300px;display:grid;place-items:center;transition:all .2s}.login[_ngcontent-%COMP%]{grid-area:login}.signup[_ngcontent-%COMP%]{grid-area:signup}']});let t=e;return t})();var iO=(()=>{let e=class e{constructor(r,i,s,o){this.router=r,this.fb=i,this.fire=s,this.auth=o}ngOnInit(){this.newDev=this.fb.group({devName:["",[Xt.required]],devID:["",[Xt.required]]})}AddNewDevice(){return D(this,null,function*(){if(this.newDev.valid){try{this.fire.addNewDevice(this.newDev.get("devID")?.value,this.newDev.get("devName")?.value)}catch(r){console.error("Adding to database unsuccessful:",r)}this.router.navigateByUrl("/home")}})}};e.\u0275fac=function(i){return new(i||e)(q(Rt),q(Ma),q(ls),q(dn))},e.\u0275cmp=bt({type:e,selectors:[["app-base"]],decls:14,vars:1,consts:[[1,"container","card"],[1,"input",3,"formGroup","ngSubmit"],["id","devName"],["for","devName"],["type","text","name","devName","formControlName","devName",1,"input"],["id","devID"],["for","devId",1,"lbl"],["type","text","name","devId","formControlName","devID",1,"input"],["type","submit","id","addBtn"]],template:function(i,s){i&1&&(he(0,"div",0)(1,"form",1),Ut("ngSubmit",function(){return s.AddNewDevice()}),he(2,"div",2)(3,"label",3),Ye(4,"Device Name"),ve(),He(5,"input",4),ve(),he(6,"div",5)(7,"label",6),Ye(8,"Device ID"),ve(),He(9,"input",7),ve(),he(10,"button",8),Ye(11,"Double click"),He(12,"br"),Ye(13,"to confirm"),ve()()()),i&2&&(Yt(),_r("formGroup",s.newDev))},dependencies:[Aa,Vi,Ta,Sa,Qs,Ys],styles:['.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content;font-size:1.5rem;border:none;background-color:#fff;cursor:pointer;border:1px solid grey;border-radius:10px;box-shadow:5px 5px 7px #000;border:#0000}label[_ngcontent-%COMP%]{transform:translateY(-15px)}.container[_ngcontent-%COMP%]{width:240px;height:240px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:10px}.input[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-areas:"name" "pass" "btn";position:relative;justify-content:center;align-items:center}input[type=text][_ngcontent-%COMP%]{border:none;border-bottom:1px solid black;box-shadow:0 5px 5px -2px #000;cursor:auto}#devName[_ngcontent-%COMP%]{grid-area:name}#devID[_ngcontent-%COMP%]{grid-area:pass}#addBtn[_ngcontent-%COMP%]{grid-area:btn}']});let t=e;return t})();function Sd(t){return t+.5|0}var us=(t,e,n)=>Math.max(Math.min(t,n),e);function Cd(t){return us(Sd(t*2.55),0,255)}function ds(t){return us(Sd(t*255),0,255)}function fi(t){return us(Sd(t/2.55)/100,0,1)}function sO(t){return us(Sd(t*100),0,100)}var Un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},KD=[..."0123456789ABCDEF"],nW=t=>KD[t&15],rW=t=>KD[(t&240)>>4]+KD[t&15],Tm=t=>(t&240)>>4===(t&15),iW=t=>Tm(t.r)&&Tm(t.g)&&Tm(t.b)&&Tm(t.a);function sW(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Un[t[1]]*17,g:255&Un[t[2]]*17,b:255&Un[t[3]]*17,a:e===5?Un[t[4]]*17:255}:(e===7||e===9)&&(n={r:Un[t[1]]<<4|Un[t[2]],g:Un[t[3]]<<4|Un[t[4]],b:Un[t[5]]<<4|Un[t[6]],a:e===9?Un[t[7]]<<4|Un[t[8]]:255})),n}var oW=(t,e)=>t<255?e(t):"";function aW(t){var e=iW(t)?nW:rW;return t?"#"+e(t.r)+e(t.g)+e(t.b)+oW(t.a,e):void 0}var cW=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function lO(t,e,n){let r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function lW(t,e,n){let r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function uW(t,e,n){let r=lO(t,1,.5),i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function dW(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function QD(t){let n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=dW(n,r,i,u,s),c=c*60+.5),[c|0,l||0,a]}function YD(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ds)}function ZD(t,e,n){return YD(lO,t,e,n)}function hW(t,e,n){return YD(uW,t,e,n)}function fW(t,e,n){return YD(lW,t,e,n)}function uO(t){return(t%360+360)%360}function pW(t){let e=cW.exec(t),n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Cd(+e[5]):ds(+e[5]));let i=uO(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=hW(i,s,o):e[1]==="hsv"?r=fW(i,s,o):r=ZD(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function gW(t,e){var n=QD(t);n[0]=uO(n[0]+e),n=ZD(n),t.r=n[0],t.g=n[1],t.b=n[2]}function mW(t){if(!t)return;let e=QD(t),n=e[0],r=sO(e[1]),i=sO(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${fi(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}var oO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},aO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yW(){let t={},e=Object.keys(aO),n=Object.keys(oO),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,oO[s]);s=parseInt(aO[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}var Sm;function vW(t){Sm||(Sm=yW(),Sm.transparent=[0,0,0,0]);let e=Sm[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var _W=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wW(t){let e=_W.exec(t),n=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];n=e[8]?Cd(o):us(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Cd(r):us(r,0,255)),i=255&(e[4]?Cd(i):us(i,0,255)),s=255&(e[6]?Cd(s):us(s,0,255)),{r,g:i,b:s,a:n}}}function bW(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var WD=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Vc=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function IW(t,e,n){let r=Vc(fi(t.r)),i=Vc(fi(t.g)),s=Vc(fi(t.b));return{r:ds(WD(r+n*(Vc(fi(e.r))-r))),g:ds(WD(i+n*(Vc(fi(e.g))-i))),b:ds(WD(s+n*(Vc(fi(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Am(t,e,n){if(t){let r=QD(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=ZD(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function dO(t,e){return t&&Object.assign(e||{},t)}function cO(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ds(t[3]))):(e=dO(t,{r:0,g:0,b:0,a:1}),e.a=ds(e.a)),e}function DW(t){return t.charAt(0)==="r"?wW(t):pW(t)}var Td=class t{constructor(e){if(e instanceof t)return e;let n=typeof e,r;n==="object"?r=cO(e):n==="string"&&(r=sW(e)||vW(e)||DW(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=dO(this._rgb);return e&&(e.a=fi(e.a)),e}set rgb(e){this._rgb=cO(e)}rgbString(){return this._valid?bW(this._rgb):void 0}hexString(){return this._valid?aW(this._rgb):void 0}hslString(){return this._valid?mW(this._rgb):void 0}mix(e,n){if(e){let r=this.rgb,i=e.rgb,s,o=n===s?.5:n,a=2*o-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=IW(this._rgb,e._rgb,n)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=ds(e),this}clearer(e){let n=this._rgb;return n.a*=1-e,this}greyscale(){let e=this._rgb,n=Sd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){let n=this._rgb;return n.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Am(this._rgb,2,e),this}darken(e){return Am(this._rgb,2,-e),this}saturate(e){return Am(this._rgb,1,e),this}desaturate(e){return Am(this._rgb,1,-e),this}rotate(e){return gW(this._rgb,e),this}};function Lr(){}var IO=(()=>{let t=0;return()=>t++})();function me(t){return t===null||typeof t>"u"}function Pe(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ae(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function qe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function fn(t,e){return qe(t)?t:e}function Z(t,e){return typeof t>"u"?e:t}var DO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,tE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ie(t,e,n,r){let i,s,o;if(Pe(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(ae(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Rd(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Nm(t){if(Pe(t))return t.map(Nm);if(ae(t)){let e=Object.create(null),n=Object.keys(t),r=n.length,i=0;for(;i<r;++i)e[n[i]]=Nm(t[n[i]]);return e}return t}function EO(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function EW(t,e,n,r){if(!EO(t))return;let i=e[t],s=n[t];ae(i)&&ae(s)?jc(i,s,r):e[t]=Nm(s)}function jc(t,e,n){let r=Pe(e)?e:[e],i=r.length;if(!ae(t))return t;n=n||{};let s=n.merger||EW,o;for(let a=0;a<i;++a){if(o=r[a],!ae(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],t,o,n)}return t}function Uc(t,e){return jc(t,e,{merger:xW})}function xW(t,e,n){if(!EO(t))return;let r=e[t],i=n[t];ae(r)&&ae(i)?Uc(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Nm(i))}var hO={"":t=>t,x:t=>t.x,y:t=>t.y};function CW(t){let e=t.split("."),n=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function TW(t){let e=CW(t);return n=>{for(let r of e){if(r==="")break;n=n&&n[r]}return n}}function mi(t,e){return(hO[e]||(hO[e]=TW(e)))(t)}function Vm(t){return t.charAt(0).toUpperCase()+t.slice(1)}var $c=t=>typeof t<"u",pi=t=>typeof t=="function",nE=(t,e)=>{if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0};function xO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}var Ne=Math.PI,ke=2*Ne,SW=ke+Ne,km=Number.POSITIVE_INFINITY,AW=Ne/180,et=Ne/2,No=Ne/4,fO=Ne*2/3,gi=Math.log10,ar=Math.sign;function Hc(t,e,n){return Math.abs(t-e)<n}function rE(t){let e=Math.round(t);t=Hc(t,e,t/1e3)?e:t;let n=Math.pow(10,Math.floor(gi(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function CO(t){let e=[],n=Math.sqrt(t),r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Fo(t){return!isNaN(parseFloat(t))&&isFinite(t)}function TO(t,e){let n=Math.round(t);return n-e<=t&&n+e>=t}function iE(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $n(t){return t*(Ne/180)}function Lm(t){return t*(180/Ne)}function sE(t){if(!qe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function oE(t,e){let n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),s=Math.atan2(r,n);return s<-.5*Ne&&(s+=ke),{angle:s,distance:i}}function Om(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function MW(t,e){return(t-e+SW)%ke-Ne}function hn(t){return(t%ke+ke)%ke}function zc(t,e,n,r){let i=hn(t),s=hn(e),o=hn(n),a=hn(s-i),c=hn(o-i),l=hn(i-s),u=hn(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function wt(t,e,n){return Math.max(e,Math.min(n,t))}function SO(t){return wt(t,-32768,32767)}function jr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function jm(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}var Fr=(t,e,n,r)=>jm(t,n,r?i=>{let s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),AO=(t,e,n)=>jm(t,n,r=>t[r][e]>=n);function MO(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}var RO=["push","pop","shift","splice","unshift"];function PO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),RO.forEach(n=>{let r="_onData"+Vm(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function aE(t,e){let n=t._chartjs;if(!n)return;let r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(RO.forEach(s=>{delete t[s]}),delete t._chartjs)}function cE(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}var lE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function uE(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,lE.call(window,()=>{r=!1,t.apply(e,n)}))}}function NO(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}var Bm=t=>t==="start"?"left":t==="end"?"right":"center",Ot=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,kO=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function dE(t,e,n){let r=e.length,i=0,s=r;if(t._sorted){let{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(i=wt(Math.min(Fr(a,c,l).lo,n?r:Fr(e,c,o.getPixelForValue(l)).lo),0,r-1)),h?s=wt(Math.max(Fr(a,o.axis,u,!0).hi+1,n?0:Fr(e,c,o.getPixelForValue(u),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function hE(t){let{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;let s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}var Mm=t=>t===0||t===1,pO=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ke/n)),gO=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ke/n)+1,Lc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*et)+1,easeOutSine:t=>Math.sin(t*et),easeInOutSine:t=>-.5*(Math.cos(Ne*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Mm(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Mm(t)?t:pO(t,.075,.3),easeOutElastic:t=>Mm(t)?t:gO(t,.075,.3),easeInOutElastic(t){return Mm(t)?t:t<.5?.5*pO(t*2,.1125,.45):.5+.5*gO(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Lc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Lc.easeInBounce(t*2)*.5:Lc.easeOutBounce(t*2-1)*.5+.5};function fE(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function pE(t){return fE(t)?t:new Td(t)}function XD(t){return fE(t)?t:new Td(t).saturate(.5).darken(.1).hexString()}var RW=["x","y","borderWidth","radius","tension"],PW=["color","borderColor","backgroundColor"];function NW(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:PW},numbers:{type:"number",properties:RW}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function kW(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var mO=new Map;function OW(t,e){e=e||{};let n=t+JSON.stringify(e),r=mO.get(n);return r||(r=new Intl.NumberFormat(t,e),mO.set(n,r)),r}function qc(t,e,n){return OW(e,n).format(t)}var OO={values(t){return Pe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";let r=this.chart.options.locale,i,s=t;if(n.length>1){let l=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=FW(t,n)}let o=gi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),qc(t,r,c)},logarithmic(t,e,n){if(t===0)return"0";let r=n[e].significand||t/Math.pow(10,Math.floor(gi(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?OO.numeric.call(this,t,e,n):""}};function FW(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Pd={formatters:OO};function VW(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var fs=Object.create(null),Um=Object.create(null);function Ad(t,e){if(!e)return t;let n=e.split(".");for(let r=0,i=n.length;r<i;++r){let s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function JD(t,e,n){return typeof e=="string"?jc(Ad(t,e),n):jc(Ad(t,""),e)}var eE=class{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>XD(i.backgroundColor),this.hoverBorderColor=(r,i)=>XD(i.borderColor),this.hoverColor=(r,i)=>XD(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return JD(this,e,n)}get(e){return Ad(this,e)}describe(e,n){return JD(Um,e,n)}override(e,n){return JD(fs,e,n)}route(e,n,r,i){let s=Ad(this,e),o=Ad(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){let c=this[a],l=o[i];return ae(c)?Object.assign({},l,c):Z(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}},Le=new eE({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[NW,kW,VW]);function LW(t){return!t||me(t.size)||me(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Md(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function FO(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0,a=n.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=n[c],d!=null&&!Pe(d))o=Md(t,i,s,o,d);else if(Pe(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!Pe(h)&&(o=Md(t,i,s,o,h));t.restore();let f=s.length/2;if(f>n.length){for(c=0;c<f;c++)delete i[s[c]];s.splice(0,f)}return o}function ps(t,e,n){let r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function gE(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function $m(t,e,n,r){mE(t,e,n,r,null)}function mE(t,e,n,r,i){let s,o,a,c,l,u,d,h,f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*AW;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,ke):t.arc(n,r,g,0,ke),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=fO,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=fO,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":l=g*.516,c=g-l,o=Math.cos(m+No)*c,d=Math.cos(m+No)*(i?i/2-l:c),a=Math.sin(m+No)*c,h=Math.sin(m+No)*(i?i/2-l:c),t.arc(n-d,r-a,l,m-Ne,m-et),t.arc(n+h,r-o,l,m-et,m),t.arc(n+d,r+a,l,m,m+et),t.arc(n-h,r+o,l,m+et,m+Ne),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=i?i/2:c,t.rect(n-u,r-c,2*u,2*c);break}m+=No;case"rectRot":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":m+=No;case"cross":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),m+=No,d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Nd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function kd(t){t.restore()}function VO(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){let s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function LO(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function jW(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),me(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function BW(t,e,n,r,i){if(i.strikethrough||i.underline){let s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,l=n+s.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function UW(t,e){let n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function gs(t,e,n,r,i,s={}){let o=Pe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(t.save(),t.font=i.string,jW(t,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&UW(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),me(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(l,n,r,s.maxWidth)),t.fillText(l,n,r,s.maxWidth),BW(t,n,r,l,s),r+=Number(i.lineHeight);t.restore()}function Gc(t,e){let{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ne,Ne,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ne,et,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,et,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-et,!0),t.lineTo(n+o.topLeft,r)}var $W=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,HW=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function zW(t,e){let n=(""+t).match($W);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}var qW=t=>+t||0;function Hm(t,e){let n={},r=ae(e),i=r?Object.keys(e):e,s=ae(t)?r?o=>Z(t[o],t[e[o]]):o=>t[o]:()=>t;for(let o of i)n[o]=qW(s(o));return n}function yE(t){return Hm(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ms(t){return Hm(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ft(t){let e=yE(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yt(t,e){t=t||{},e=e||Le.font;let n=Z(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Z(t.style,e.style);r&&!(""+r).match(HW)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:Z(t.family,e.family),lineHeight:zW(Z(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Z(t.weight,e.weight),string:""};return i.string=LW(i),i}function Wc(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&Pe(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function jO(t,e,n){let{min:r,max:i}=t,s=tE(e,(i-r)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function yi(t,e){return Object.assign(Object.create(t),e)}function zm(t,e=[""],n,r,i=()=>t[0]){let s=n||t;typeof r>"u"&&(r=$O("_fallback",t));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>zm([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return BO(a,c,()=>JW(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return vO(a).includes(c)},ownKeys(a){return vO(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function Oo(t,e,n,r){let i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:vE(t,r),setContext:s=>Oo(t,s,n,r),override:s=>Oo(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return BO(s,o,()=>WW(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function vE(t,e={scriptable:!0,indexable:!0}){let{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:pi(n)?n:()=>n,isIndexable:pi(r)?r:()=>r}}var GW=(t,e)=>t?t+Vm(e):e,_E=(t,e)=>ae(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function BO(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];let r=n();return t[e]=r,r}function WW(t,e,n){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t,a=r[e];return pi(a)&&o.isScriptable(e)&&(a=KW(e,a,t,n)),Pe(a)&&a.length&&(a=QW(e,a,t,o.isIndexable)),_E(e,a)&&(a=Oo(a,i,s&&s[e],o)),a}function KW(t,e,n,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(s,o||r);return a.delete(t),_E(t,c)&&(c=wE(i._scopes,i,t,c)),c}function QW(t,e,n,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ae(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=wE(l,i,t,u);e.push(Oo(d,s,o&&o[t],a))}}return e}function UO(t,e,n){return pi(t)?t(e,n):t}var YW=(t,e)=>t===!0?e:typeof t=="string"?mi(e,t):void 0;function ZW(t,e,n,r,i){for(let s of e){let o=YW(n,s);if(o){t.add(o);let a=UO(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function wE(t,e,n,r){let i=e._rootScopes,s=UO(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let c=yO(a,o,n,s||n,r);return c===null||typeof s<"u"&&s!==n&&(c=yO(a,o,s,c,r),c===null)?!1:zm(Array.from(a),[""],i,s,()=>XW(e,n,r))}function yO(t,e,n,r,i){for(;n;)n=ZW(t,e,n,r,i);return n}function XW(t,e,n){let r=t._getTarget();e in r||(r[e]={});let i=r[e];return Pe(i)&&ae(n)?n:i||{}}function JW(t,e,n,r){let i;for(let s of e)if(i=$O(GW(s,t),n),typeof i<"u")return _E(t,i)?wE(n,r,t,i):i}function $O(t,e){for(let n of e){if(!n)continue;let r=n[t];if(typeof r<"u")return r}}function vO(t){let e=t._keys;return e||(e=t._keys=e6(t._scopes)),e}function e6(t){let e=new Set;for(let n of t)for(let r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function bE(t,e,n,r){let{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r),a,c,l,u;for(a=0,c=r;a<c;++a)l=a+n,u=e[l],o[a]={r:i.parse(mi(u,s),l)};return o}var t6=Number.EPSILON||1e-14,Bc=(t,e)=>e<t.length&&!t[e].skip&&t[e],HO=t=>t==="x"?"y":"x";function n6(t,e,n,r){let i=t.skip?e:t,s=e,o=n.skip?e:n,a=Om(s,i),c=Om(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=r*l,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function r6(t,e,n){let r=t.length,i,s,o,a,c,l=Bc(t,0);for(let u=0;u<r-1;++u)if(c=l,l=Bc(t,u+1),!(!c||!l)){if(Hc(e[u],0,t6)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function i6(t,e,n="x"){let r=HO(n),i=t.length,s,o,a,c=Bc(t,0);for(let l=0;l<i;++l){if(o=a,a=c,c=Bc(t,l+1),!a)continue;let u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[l]),c&&(s=(c[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[l])}}function s6(t,e="x"){let n=HO(e),r=t.length,i=Array(r).fill(0),s=Array(r),o,a,c,l=Bc(t,0);for(o=0;o<r;++o)if(a=c,c=l,l=Bc(t,o+1),!!c){if(l){let u=l[e]-c[e];i[o]=u!==0?(l[n]-c[n])/u:0}s[o]=a?l?ar(i[o-1])!==ar(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}r6(t,i,s),i6(t,s,e)}function Rm(t,e,n){return Math.max(Math.min(t,n),e)}function o6(t,e){let n,r,i,s,o,a=Vr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Vr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Rm(i.cp1x,e.left,e.right),i.cp1y=Rm(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Rm(i.cp2x,e.left,e.right),i.cp2y=Rm(i.cp2y,e.top,e.bottom)))}function zO(t,e,n,r,i){let s,o,a,c;if(e.spanGaps&&(t=t.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")s6(t,i);else{let l=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],c=n6(l,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&o6(t,n)}function qm(){return typeof window<"u"&&typeof document<"u"}function Gm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Fm(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}var Wm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function a6(t,e){return Wm(t).getPropertyValue(e)}var c6=["top","right","bottom","left"];function ko(t,e,n){let r={};n=n?"-"+n:"";for(let i=0;i<4;i++){let s=c6[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var l6=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function u6(t,e){let n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r,o=!1,a,c;if(l6(i,s,t.target))a=i,c=s;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function ys(t,e){if("native"in t)return t;let{canvas:n,currentDevicePixelRatio:r}=e,i=Wm(n),s=i.boxSizing==="border-box",o=ko(i,"padding"),a=ko(i,"border","width"),{x:c,y:l,box:u}=u6(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-d)/f*n.width/r),y:Math.round((l-h)/p*n.height/r)}}function d6(t,e,n){let r,i;if(e===void 0||n===void 0){let s=Gm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{let o=s.getBoundingClientRect(),a=Wm(s),c=ko(a,"border","width"),l=ko(a,"padding");e=o.width-l.width-c.width,n=o.height-l.height-c.height,r=Fm(a.maxWidth,s,"clientWidth"),i=Fm(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||km,maxHeight:i||km}}var Pm=t=>Math.round(t*10)/10;function qO(t,e,n,r){let i=Wm(t),s=ko(i,"margin"),o=Fm(i.maxWidth,t,"clientWidth")||km,a=Fm(i.maxHeight,t,"clientHeight")||km,c=d6(t,e,n),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let h=ko(i,"border","width"),f=ko(i,"padding");l-=f.width+h.width,u-=f.height+h.height}return l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=Pm(Math.min(l,o,c.maxWidth)),u=Pm(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Pm(l/2)),(e!==void 0||n!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=Pm(Math.floor(u*r))),{width:l,height:u}}function IE(t,e,n){let r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}var GO=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};qm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function DE(t,e){let n=a6(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function hs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function WO(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function KO(t,e,n,r){let i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=hs(t,i,n),a=hs(i,s,n),c=hs(s,e,n),l=hs(o,a,n),u=hs(a,c,n);return hs(l,u,n)}var h6=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},f6=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vo(t,e,n){return t?h6(e,n):f6()}function EE(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function xE(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function QO(t){return t==="angle"?{between:zc,compare:MW,normalize:hn}:{between:jr,compare:(e,n)=>e-n,normalize:e=>e}}function _O({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function p6(t,e,n){let{property:r,start:i,end:s}=n,{between:o,normalize:a}=QO(r),c=e.length,{start:l,end:u,loop:d}=t,h,f;if(d){for(l+=c,u+=c,h=0,f=c;h<f&&o(a(e[l%c][r]),i,s);++h)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:t.style}}function CE(t,e,n){if(!n)return[t];let{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:c,normalize:l}=QO(r),{start:u,end:d,loop:h,style:f}=p6(t,e,n),p=[],g=!1,m=null,y,v,_,b=()=>c(i,_,y)&&a(i,_)!==0,w=()=>a(s,y)===0||c(s,_,y),E=()=>g||b(),A=()=>!g||w();for(let S=u,L=u;S<=d;++S)v=e[S%o],!v.skip&&(y=l(v[r]),y!==_&&(g=c(y,i,s),m===null&&E()&&(m=a(y,i)===0?S:L),m!==null&&A()&&(p.push(_O({start:m,end:S,loop:h,count:o,style:f})),m=null),L=S,_=y));return m!==null&&p.push(_O({start:m,end:d,loop:h,count:o,style:f})),p}function TE(t,e){let n=[],r=t.segments;for(let i=0;i<r.length;i++){let s=CE(r[i],t.points,e);s.length&&n.push(...s)}return n}function g6(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function m6(t,e,n,r){let i=t.length,s=[],o=e,a=t[e],c;for(c=e+1;c<=n;++c){let l=t[c%i];l.skip||l.stop?a.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function YO(t,e){let n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];let s=!!t._loop,{start:o,end:a}=g6(n,i,s,r);if(r===!0)return wO(t,[{start:o,end:a,loop:s}],n,e);let c=a<o?a+i:a,l=!!t._fullLoop&&o===0&&a===i-1;return wO(t,m6(n,o,c,l),n,e)}function wO(t,e,n,r){return!r||!r.setContext||!n?e:y6(t,e,n,r)}function y6(t,e,n,r){let i=t._chart.getContext(),s=bO(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[],u=s,d=e[0].start,h=d;function f(p,g,m,y){let v=a?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=v;for(;n[g%c].skip;)g+=v;p%c!==g%c&&(l.push({start:p%c,end:g%c,loop:m,style:y}),u=y,d=g%c)}}for(let p of e){d=a?d:p.start;let g=n[d%c],m;for(h=d+1;h<=p.end;h++){let y=n[h%c];m=bO(r.setContext(yi(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),v6(m,u)&&f(d,h-1,p.loop,u),g=y,u=m}d<h-1&&f(d,h-1,p.loop,u)}return l}function bO(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function v6(t,e){if(!e)return!1;let n=[],r=function(i,s){return fE(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}var VE=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){let s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){let n=this._charts,r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){let n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){let n=this._charts.get(e);if(!n||!n.items.length)return;let r=n.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},vi=new VE,ZO="transparent",_6={boolean(t,e,n){return n>.5?e:t},color(t,e,n){let r=pE(t||ZO),i=r.valid&&pE(e||ZO);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}},LE=class{constructor(e,n,r,i){let s=n[r];i=Wc([e.to,i,s,e.from]);let o=Wc([e.from,s,i]);this._active=!0,this._fn=e.fn||_6[e.type||typeof o],this._easing=Lc[e.easing]||Lc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Wc([e.to,n,i,e.from]),this._from=Wc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){let n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}},ry=class{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ae(e))return;let n=Object.keys(Le.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!ae(s))return;let o={};for(let a of n)o[a]=s[a];(Pe(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){let r=n.options,i=b6(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&w6(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,n));continue}let u=n[l],d=s[l],h=r.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[l]=u;continue}s[l]=d=new LE(h,e,l,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}let r=this._createAnimations(e,n);if(r.length)return vi.add(this._chart,r),!0}};function w6(t,e){let n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function b6(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function XO(t,e){let n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function I6(t,e,n){if(n===!1)return!1;let r=XO(t,n),i=XO(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function D6(t){let e,n,r,i;return ae(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function XF(t,e){let n=[],r=t._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function JO(t,e,n,r={}){let i=t.keys,s=r.mode==="single",o,a,c,l;if(e!==null){for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(r.all)continue;break}l=t.values[c],qe(l)&&(s||e===0||ar(e)===ar(l))&&(e+=l)}return e}}function E6(t){let e=Object.keys(t),n=new Array(e.length),r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function eF(t,e){let n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function x6(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function C6(t){let{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function T6(t,e,n){let r=t[e]||(t[e]={});return r[n]||(r[n]={})}function tF(t,e,n,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function nF(t,e){let{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=x6(s,o,r),d=e.length,h;for(let f=0;f<d;++f){let p=e[f],{[c]:g,[l]:m}=p,y=p._stacks||(p._stacks={});h=y[l]=T6(i,u,g),h[a]=m,h._top=tF(h,o,!0,r.type),h._bottom=tF(h,o,!1,r.type);let v=h._visualValues||(h._visualValues={});v[a]=m}}function SE(t,e){let n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function S6(t,e){return yi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function A6(t,e,n){return yi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Od(t,e){let n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}var AE=t=>t==="reset"||t==="none",rF=(t,e)=>e?t:Object.assign({},t),M6=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:XF(n,!0),values:null},_s=(()=>{class t{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(n,r){this.chart=n,this._ctx=n.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let n=this._cachedMeta;this.configure(),this.linkScales(),n._stacked=eF(n.vScale,n),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(n){this.index!==n&&Od(this._cachedMeta),this.index=n}linkScales(){let n=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=r.xAxisID=Z(i.xAxisID,SE(n,"x")),a=r.yAxisID=Z(i.yAxisID,SE(n,"y")),c=r.rAxisID=Z(i.rAxisID,SE(n,"r")),l=r.indexAxis,u=r.iAxisID=s(l,o,a,c),d=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){let r=this._cachedMeta;return n===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let n=this._cachedMeta;this._data&&aE(this._data,this),n._stacked&&Od(n)}_dataCheck(){let n=this.getDataset(),r=n.data||(n.data=[]),i=this._data;if(ae(r))this._data=E6(r);else if(i!==r){if(i){aE(i,this);let s=this._cachedMeta;Od(s),s._parsed=[]}r&&Object.isExtensible(r)&&PO(r,this),this._syncList=[],this._data=r}}addElements(){let n=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=eF(r.vScale,r),r.stack!==i.stack&&(s=!0,Od(r),r.stack=i.stack),this._resyncElements(n),(s||o!==r._stacked)&&nF(this,r._parsed)}configure(){let n=this.chart.config,r=n.datasetScopeKeys(this._type),i=n.getOptionScopes(this.getDataset(),r,!0);this.options=n.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(n,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis,l=n===0&&r===s.length?!0:i._sorted,u=n>0&&i._parsed[n-1],d,h,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Pe(s[n])?f=this.parseArrayData(i,s,n,r):ae(s[n])?f=this.parseObjectData(i,s,n,r):f=this.parsePrimitiveData(i,s,n,r);let p=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<r;++d)i._parsed[d+n]=h=f[d],l&&(p()&&(l=!1),u=h);i._sorted=l}a&&nF(this,f)}parsePrimitiveData(n,r,i,s){let{iScale:o,vScale:a}=n,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),f,p,g;for(f=0,p=s;f<p;++f)g=f+i,h[f]={[c]:d||o.parse(u[g],g),[l]:a.parse(r[g],g)};return h}parseArrayData(n,r,i,s){let{xScale:o,yScale:a}=n,c=new Array(s),l,u,d,h;for(l=0,u=s;l<u;++l)d=l+i,h=r[d],c[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(n,r,i,s){let{xScale:o,yScale:a}=n,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,h,f,p;for(d=0,h=s;d<h;++d)f=d+i,p=r[f],u[d]={x:o.parse(mi(p,c),f),y:a.parse(mi(p,l),f)};return u}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,r,i){let s=this.chart,o=this._cachedMeta,a=r[n.axis],c={keys:XF(s,!0),values:r._stacks[n.axis]._visualValues};return JO(c,a,o.index,{mode:i})}updateRangeFromParsed(n,r,i,s){let o=i[r.axis],a=o===null?NaN:o,c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=JO(s,o,this._cachedMeta.index)),n.min=Math.min(n.min,a),n.max=Math.max(n.max,a)}getMinMax(n,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&n===i.iScale,a=s.length,c=this._getOtherScale(n),l=M6(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=C6(c),f,p;function g(){p=s[f];let m=p[c.axis];return!qe(p[n.axis])||d>m||h<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,n,p,l),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,n,p,l);break}}return u}getAllParsedValues(n){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][n.axis],qe(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(n){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(n);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(n){let r=this._cachedMeta;this.update(n||"default"),r._clip=D6(Z(this.options.clip,I6(r.xScale,r.yScale,this.getMaxOverflow())))}update(n){}draw(){let n=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(i.dataset&&i.dataset.draw(n,o,c,l),d=c;d<c+l;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(n,o))}for(d=0;d<a.length;++d)a[d].draw(n,o)}getStyle(n,r){let i=r?"active":"default";return n===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(n||0,i)}getContext(n,r,i){let s=this.getDataset(),o;if(n>=0&&n<this._cachedMeta.data.length){let a=this._cachedMeta.data[n];o=a.$context||(a.$context=A6(this.getContext(),n,a)),o.parsed=this.getParsed(n),o.raw=s.data[n],o.index=o.dataIndex=n}else o=this.$context||(this.$context=S6(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,r){return this._resolveElementOptions(this.dataElementType.id,r,n)}_resolveElementOptions(n,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=n+"-"+r,c=o[a],l=this.enableOptionSharing&&$c(i);if(c)return rF(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,n),h=s?[`${n}Hover`,"hover",n,""]:[n,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Le.elements[n]),g=()=>this.getContext(i,s,r),m=u.resolveNamedOptions(f,p,g,h);return m.$shared&&(m.$shared=l,o[a]=Object.freeze(rF(m,l))),m}_resolveAnimations(n,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,r),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(n,i,r))}let u=new ry(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,r){return!r||AE(n)||this.chart._animationsDisabled}_getSharedOptions(n,r){let i=this.resolveDataElementOptions(n,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(n,r,i,s){AE(s)?Object.assign(n,i):this._resolveAnimations(r,s).update(n,i)}updateSharedOptions(n,r,i){n&&!AE(r)&&this._resolveAnimations(void 0,r).update(n,i)}_setStyle(n,r,i,s){n.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(n,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(n,r,i){this._setStyle(n,i,"active",!1)}setHoverStyle(n,r,i){this._setStyle(n,i,"active",!0)}_removeDatasetHoverStyle(){let n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){let n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,n):o<s&&this._removeElements(o,s-o)}_insertElements(n,r,i=!0){let s=this._cachedMeta,o=s.data,a=n+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(o),c=n;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(n,r),i&&this.updateElements(o,n,r,"reset")}updateElements(n,r,i,s){}_removeElements(n,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(n,r);i._stacked&&Od(i,s)}i.data.splice(n,r)}_sync(n){if(this._parsing)this._syncList.push(n);else{let[r,i,s]=n;this[r](i,s)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){let n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,r){r&&this._sync(["_removeElements",n,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",n,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t})();function R6(t,e){if(!t._cache.$bar){let n=t.getMatchingVisibleMetas(e),r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=cE(r.sort((i,s)=>i-s))}return t._cache.$bar}function P6(t){let e=t.iScale,n=R6(e,t.type),r=e._length,i,s,o,a,c=()=>{o===32767||o===-32768||($c(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function N6(t,e,n,r){let i=n.barThickness,s,o;return me(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function k6(t,e,n,r){let i=e.pixels,s=i[t],o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null,c=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:n.barPercentage,start:l}}function O6(t,e,n,r){let i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}function JF(t,e,n,r){return Pe(t)?O6(t,e,n,r):e[n.axis]=n.parse(t,r),e}function iF(t,e,n,r){let i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,c=[],l,u,d,h;for(l=n,u=n+r;l<u;++l)h=e[l],d={},d[i.axis]=a||i.parse(o[l],l),c.push(JF(h,d,s,l));return c}function ME(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function F6(t,e,n){return t!==0?ar(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function V6(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function L6(t,e,n,r){let i=e.borderSkipped,s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=V6(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=l:(n._bottom||0)===r?i=u:(s[sF(u,o,a,c)]=!0,i=l)),s[sF(i,o,a,c)]=!0,t.borderSkipped=s}function sF(t,e,n,r){return r?(t=j6(t,e,n),t=oF(t,n,e)):t=oF(t,e,n),t}function j6(t,e,n){return t===e?n:t===n?e:t}function oF(t,e,n){return t==="start"?e:t==="end"?n:t}function B6(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}var U6=(()=>{class t extends _s{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(n,r,i,s){return iF(n,r,i,s)}parseArrayData(n,r,i,s){return iF(n,r,i,s)}parseObjectData(n,r,i,s){let{iScale:o,vScale:a}=n,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,d=a.axis==="x"?c:l,h=[],f,p,g,m;for(f=i,p=i+s;f<p;++f)m=r[f],g={},g[o.axis]=o.parse(mi(m,u),f),h.push(JF(mi(m,d),g,a,f));return h}updateRangeFromParsed(n,r,i,s){super.updateRangeFromParsed(n,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(n.min=Math.min(n.min,o.min),n.max=Math.max(n.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(n){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(n),a=o._custom,c=ME(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let n=this._cachedMeta;n.stack=this.getDataset().stack}update(n){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,n)}updateElements(n,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,s);for(let p=r;p<r+i;p++){let g=this.getParsed(p),m=o||me(g[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),v=(g._stacks||{})[c.axis],_={horizontal:u,base:m.base,enableBorderRadius:!v||ME(g._custom)||a===v._top||a===v._bottom,x:u?m.head:y.center,y:u?y.center:m.head,height:u?y.size:Math.abs(m.size),width:u?Math.abs(m.size):y.size};f&&(_.options=h||this.resolveDataElementOptions(p,n[p].active?"active":s));let b=_.options||n[p].options;L6(_,b,v,a),B6(_,b,d.ratio),this.updateElement(n[p],p,_,s)}}_getStacks(n,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,a=[],c=l=>{let u=l.controller.getParsed(r),d=u&&u[l.vScale.axis];if(me(d)||isNaN(d))return!0};for(let l of s)if(!(r!==void 0&&c(l))&&((o===!1||a.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&a.push(l.stack),l.index===n))break;return a.length||a.push(void 0),a}_getStackCount(n){return this._getStacks(void 0,n).length}_getStackIndex(n,r,i){let s=this._getStacks(n,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let n=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let c=n.barThickness;return{min:c||P6(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:n.grouped,ratio:c?1:n.categoryPercentage*n.barPercentage}}_calculateBarValuePixels(n){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(n),u=l._custom,d=ME(u),h=l[r.axis],f=0,p=i?this.applyStack(r,l,i):h,g,m;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&ar(h)!==ar(u.barEnd)&&(f=0),f+=h);let y=!me(o)&&!d?o:f,v=r.getPixelForValue(y);if(this.chart.getDataVisibility(n)?g=r.getPixelForValue(f+p):g=v,m=g-v,Math.abs(m)<a){m=F6(m,r,c)*a,h===c&&(v-=m/2);let _=r.getPixelForDecimal(0),b=r.getPixelForDecimal(1),w=Math.min(_,b),E=Math.max(_,b);v=Math.max(Math.min(v,E),w),g=v+m,i&&!d&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(g)-r.getValueForPixel(v))}if(v===r.getPixelForValue(c)){let _=ar(m)*r.getLineWidthForValue(c)/2;v+=_,m-=_}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(n,r){let i=r.scale,s=this.options,o=s.skipNull,a=Z(s.maxBarThickness,1/0),c,l;if(r.grouped){let u=o?this._getStackCount(n):r.stackCount,d=s.barThickness==="flex"?k6(n,r,s,u):N6(n,r,s,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?n:void 0);c=d.start+d.chunk*h+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else c=i.getPixelForValue(this.getParsed(n)[i.axis],n),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let n=this._cachedMeta,r=n.vScale,i=n.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&i[o].draw(this._ctx)}}return t})(),$6=(()=>{class t extends _s{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(n,r,i,s){let o=super.parsePrimitiveData(n,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(n,r,i,s){let o=super.parseArrayData(n,r,i,s);for(let a=0;a<o.length;a++){let c=r[i+a];o[a]._custom=Z(c[2],this.resolveDataElementOptions(a+i).radius)}return o}parseObjectData(n,r,i,s){let o=super.parseObjectData(n,r,i,s);for(let a=0;a<o.length;a++){let c=r[i+a];o[a]._custom=Z(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){let n=this._cachedMeta.data,r=0;for(let i=n.length-1;i>=0;--i)r=Math.max(r,n[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(n){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(n),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),u=a._custom;return{label:i[n]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(n){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,n)}updateElements(n,r,i,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,s),d=a.axis,h=c.axis;for(let f=r;f<r+i;f++){let p=n[f],g=!o&&this.getParsed(f),m={},y=m[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),v=m[h]=o?c.getBasePixel():c.getPixelForValue(g[h]);m.skip=isNaN(y)||isNaN(v),u&&(m.options=l||this.resolveDataElementOptions(f,p.active?"active":s),o&&(m.options.radius=0)),this.updateElement(p,f,m,s)}}resolveDataElementOptions(n,r){let i=this.getParsed(n),s=super.resolveDataElementOptions(n,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=Z(i&&i._custom,o),s}}return t})();function H6(t,e,n){let r=1,i=1,s=0,o=0;if(e<ke){let a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),d=Math.cos(c),h=Math.sin(c),f=(_,b,w)=>zc(_,a,c,!0)?1:Math.max(b,b*n,w,w*n),p=(_,b,w)=>zc(_,a,c,!0)?-1:Math.min(b,b*n,w,w*n),g=f(0,l,d),m=f(et,u,h),y=p(Ne,l,d),v=p(Ne+et,u,h);r=(g-y)/2,i=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}var ix=(()=>{class t extends _s{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){let r=n.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=n.legend.options;return r.labels.map((o,a)=>{let l=n.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!n.getDataVisibility(a),index:a}})}return[]}},onClick(n,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(n,r){super(n,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(n,r){let i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=l=>+i[l];if(ae(i[n])){let{key:l="value"}=this._parsing;o=u=>+mi(i[u],l)}let a,c;for(a=n,c=n+r;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return $n(this.options.rotation-90)}_getCircumference(){return $n(this.options.circumference)}_getRotationExtents(){let n=ke,r=-ke;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();n=Math.min(n,o),r=Math.max(r,o+a)}return{rotation:n,circumference:r-n}}update(n){let r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(DO(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=H6(h,d,l),y=(i.width-a)/f,v=(i.height-a)/p,_=Math.max(Math.min(y,v)/2,0),b=tE(this.options.radius,_),w=Math.max(b*l,0),E=(b-w)/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=m*b,s.total=this.calculateTotal(),this.outerRadius=b-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*u,0),this.updateElements(o,0,o.length,n)}_circumference(n,r){let i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(n)||s._parsed[n]===null||s.data[n].hidden?0:this.calculateCircumference(s._parsed[n]*o/ke)}updateElements(n,r,i,s){let o=s==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,d=(c.left+c.right)/2,h=(c.top+c.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(r,s),v=this._getRotation(),_;for(_=0;_<r;++_)v+=this._circumference(_,o);for(_=r;_<r+i;++_){let b=this._circumference(_,o),w=n[_],E={x:d+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+b,circumference:b,outerRadius:g,innerRadius:p};y&&(E.options=m||this.resolveDataElementOptions(_,w.active?"active":s)),v+=b,this.updateElement(w,_,E,s)}}calculateTotal(){let n=this._cachedMeta,r=n.data,i=0,s;for(s=0;s<r.length;s++){let o=n._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(n){let r=this._cachedMeta.total;return r>0&&!isNaN(n)?ke*(Math.abs(n)/r):0}getLabelAndValue(n){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=qc(r._parsed[n],i.options.locale);return{label:s[n]||"",value:o}}getMaxBorderWidth(n){let r=0,i=this.chart,s,o,a,c,l;if(!n){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),n=a.data,c=a.controller;break}}if(!n)return 0;for(s=0,o=n.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(n){let r=0;for(let i=0,s=n.length;i<s;++i){let o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(n){let r=0;for(let i=0;i<n;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(n){return Math.max(Z(this.chart.data.datasets[n].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return t})(),z6=(()=>{class t extends _s{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(n){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:c,count:l}=dE(r,s,a);this._drawStart=c,this._drawCount=l,hE(r)&&(c=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let u=this.resolveDatasetElementOptions(n);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},n),this.updateElements(s,c,l,n)}updateElements(n,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(r,s),f=a.axis,p=c.axis,{spanGaps:g,segment:m}=this.options,y=Fo(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||s==="none",_=r+i,b=n.length,w=r>0&&this.getParsed(r-1);for(let E=0;E<b;++E){let A=n[E],S=v?A:{};if(E<r||E>=_){S.skip=!0;continue}let L=this.getParsed(E),Q=me(L[p]),J=S[f]=a.getPixelForValue(L[f],E),ce=S[p]=o||Q?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,L,l):L[p],E);S.skip=isNaN(J)||isNaN(ce)||Q,S.stop=E>0&&Math.abs(L[f]-w[f])>y,m&&(S.parsed=L,S.raw=u.data[E]),h&&(S.options=d||this.resolveDataElementOptions(E,A.active?"active":s)),v||this.updateElement(A,E,S,s),w=L}}getMaxOverflow(){let n=this._cachedMeta,r=n.dataset,i=r.options&&r.options.borderWidth||0,s=n.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let n=this._cachedMeta;n.dataset.updateControlPoints(this.chart.chartArea,n.iScale.axis),super.draw()}}return t})(),eV=(()=>{class t extends _s{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){let r=n.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=n.legend.options;return r.labels.map((o,a)=>{let l=n.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!n.getDataVisibility(a),index:a}})}return[]}},onClick(n,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(n,r){super(n,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(n){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=qc(r._parsed[n].r,i.options.locale);return{label:s[n]||"",value:o}}parseObjectData(n,r,i,s){return bE.bind(this)(n,r,i,s)}update(n){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,n)}getMinMax(){let n=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return n.data.forEach((i,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){let n=this.chart,r=n.chartArea,i=n.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),a=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),c=(o-a)/n.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(n,r,i,s){let o=s==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Ne,p=f,g,m=360/this.countVisibleElements();for(g=0;g<r;++g)p+=this._computeAngle(g,s,m);for(g=r;g<r+i;g++){let y=n[g],v=p,_=p+this._computeAngle(g,s,m),b=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=_,o&&(l.animateScale&&(b=0),l.animateRotate&&(v=_=f));let w={x:d,y:h,innerRadius:0,outerRadius:b,startAngle:v,endAngle:_,options:this.resolveDataElementOptions(g,y.active?"active":s)};this.updateElement(y,g,w,s)}}countVisibleElements(){let n=this._cachedMeta,r=0;return n.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(n,r,i){return this.chart.getDataVisibility(n)?$n(this.resolveDataElementOptions(n,r).angle||i):0}}return t})(),q6=(()=>{class t extends ix{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return t})(),G6=(()=>{class t extends _s{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(n){let r=this._cachedMeta.vScale,i=this.getParsed(n);return{label:r.getLabels()[n],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(n,r,i,s){return bE.bind(this)(n,r,i,s)}update(n){let r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,n!=="resize"){let a=this.resolveDatasetElementOptions(n);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(i,void 0,c,n)}this.updateElements(s,0,s.length,n)}updateElements(n,r,i,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=r;c<r+i;c++){let l=n[c],u=this.resolveDataElementOptions(c,l.active?"active":s),d=o.getPointPositionForValue(c,this.getParsed(c).r),h=a?o.xCenter:d.x,f=a?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(l,c,p,s)}}}return t})(),W6=(()=>{class t extends _s{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(n){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(n),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:i[n]||"",value:"("+c+", "+l+")"}}update(n){let r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled,{start:o,count:a}=dE(r,i,s);if(this._drawStart=o,this._drawCount=a,hE(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let u=this.resolveDatasetElementOptions(n);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:u},n)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,n)}addElements(){let{showLine:n}=this.options;!this.datasetElementType&&n&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(n,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(r,s),h=this.getSharedOptions(d),f=this.includeOptions(s,h),p=a.axis,g=c.axis,{spanGaps:m,segment:y}=this.options,v=Fo(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||s==="none",b=r>0&&this.getParsed(r-1);for(let w=r;w<r+i;++w){let E=n[w],A=this.getParsed(w),S=_?E:{},L=me(A[g]),Q=S[p]=a.getPixelForValue(A[p],w),J=S[g]=o||L?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,A,l):A[g],w);S.skip=isNaN(Q)||isNaN(J)||L,S.stop=w>0&&Math.abs(A[p]-b[p])>v,y&&(S.parsed=A,S.raw=u.data[w]),f&&(S.options=h||this.resolveDataElementOptions(w,E.active?"active":s)),_||this.updateElement(E,w,S,s),b=A}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let n=this._cachedMeta,r=n.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=n.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}return t})(),K6=Object.freeze({__proto__:null,BarController:U6,BubbleController:$6,DoughnutController:ix,LineController:z6,PieController:q6,PolarAreaController:eV,RadarController:G6,ScatterController:W6});function Lo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var jE=class t{static override(e){Object.assign(t.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Lo()}parse(){return Lo()}format(){return Lo()}add(){return Lo()}diff(){return Lo()}startOf(){return Lo()}endOf(){return Lo()}},Q6={_date:jE};function Y6(t,e,n,r){let{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?AO:Fr;if(r){if(i._sharedOptions){let l=s[0],u=typeof l.getRange=="function"&&l.getRange(e);if(u){let d=c(s,e,n-u),h=c(s,e,n+u);return{lo:d.lo,hi:h.hi}}}}else return c(s,e,n)}return{lo:0,hi:s.length-1}}function qd(t,e,n,r,i){let s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:h}=Y6(s[a],e,o,i);for(let f=d;f<=h;++f){let p=u[f];p.skip||r(p,l,f)}}}function Z6(t){let e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function RE(t,e,n,r,i){let s=[];return!i&&!t.isPointInArea(e)||qd(t,n,e,function(a,c,l){!i&&!Vr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function X6(t,e,n,r){let i=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=oE(o,{x:e.x,y:e.y});zc(d,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return qd(t,n,e,s),i}function J6(t,e,n,r,i,s){let o=[],a=Z6(n),c=Number.POSITIVE_INFINITY;function l(u,d,h){let f=u.inRange(e.x,e.y,i);if(r&&!f)return;let p=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(p))&&!f)return;let m=a(e,p);m<c?(o=[{element:u,datasetIndex:d,index:h}],c=m):m===c&&o.push({element:u,datasetIndex:d,index:h})}return qd(t,n,e,l),o}function PE(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?X6(t,e,n,i):J6(t,e,n,r,i,s)}function aF(t,e,n,r,i){let s=[],o=n==="x"?"inXRange":"inYRange",a=!1;return qd(t,n,e,(c,l,u)=>{c[o](e[n],i)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var e8={evaluateInteractionItems:qd,modes:{index(t,e,n,r){let i=ys(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?RE(t,i,s,r,o):PE(t,i,s,!1,r,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(t,e,n,r){let i=ys(e,t),s=n.axis||"xy",o=n.includeInvisible||!1,a=n.intersect?RE(t,i,s,r,o):PE(t,i,s,!1,r,o);if(a.length>0){let c=a[0].datasetIndex,l=t.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(t,e,n,r){let i=ys(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return RE(t,i,s,r,o)},nearest(t,e,n,r){let i=ys(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return PE(t,i,s,n.intersect,r,o)},x(t,e,n,r){let i=ys(e,t);return aF(t,i,"x",n.intersect,r)},y(t,e,n,r){let i=ys(e,t);return aF(t,i,"y",n.intersect,r)}}},tV=["left","top","right","bottom"];function Fd(t,e){return t.filter(n=>n.pos===e)}function cF(t,e){return t.filter(n=>tV.indexOf(n.pos)===-1&&n.box.axis===e)}function Vd(t,e){return t.sort((n,r)=>{let i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function t8(t){let e=[],n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function n8(t){let e={};for(let n of t){let{stack:r,pos:i,stackWeight:s}=n;if(!r||!tV.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function r8(t,e){let n=n8(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];let{fullSize:c}=a.box,l=n[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return n}function i8(t){let e=t8(t),n=Vd(e.filter(l=>l.box.fullSize),!0),r=Vd(Fd(e,"left"),!0),i=Vd(Fd(e,"right")),s=Vd(Fd(e,"top"),!0),o=Vd(Fd(e,"bottom")),a=cF(e,"x"),c=cF(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Fd(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function lF(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function nV(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function s8(t,e,n,r){let{pos:i,box:s}=n,o=t.maxPadding;if(!ae(i)){n.size&&(t[i]-=n.size);let d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&nV(o,s.getPadding());let a=Math.max(0,e.outerWidth-lF(o,t,"left","right")),c=Math.max(0,e.outerHeight-lF(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function o8(t){let e=t.maxPadding;function n(r){let i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function a8(t,e){let n=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Bd(t,e,n,r){let i=[],s,o,a,c,l,u;for(s=0,o=t.length,l=0;s<o;++s){a=t[s],c=a.box,c.update(a.width||e.w,a.height||e.h,a8(a.horizontal,e));let{same:d,other:h}=s8(e,n,a,r);l|=d&&i.length,u=u||h,c.fullSize||i.push(a)}return l&&Bd(i,e,n,r)||u}function Km(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function uF(t,e,n,r){let i=n.padding,{x:s,y:o}=e;for(let a of t){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,h=l.size||c.height;$c(l.start)&&(o=l.start),c.fullSize?Km(c,i.left,o,n.outerWidth-i.right-i.left,h):Km(c,e.left+l.placed,o,d,h),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,h=l.size||c.width;$c(l.start)&&(s=l.start),c.fullSize?Km(c,s,i.top,h,n.outerHeight-i.bottom-i.top):Km(c,s,e.top+l.placed,h,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Gt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){let n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;let i=Ft(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=i8(t.boxes),c=a.vertical,l=a.horizontal;Ie(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=c.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);nV(h,Ft(r));let f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=r8(c.concat(l),d);Bd(a.fullSize,f,d,p),Bd(c,f,d,p),Bd(l,f,d,p)&&Bd(c,f,d,p),o8(f),uF(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,uF(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ie(a.chartArea,g=>{let m=g.box;Object.assign(m,t.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},iy=class{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}},BE=class extends iy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},ty="$chartjs",c8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dF=t=>t===null||t==="";function l8(t,e){let n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[ty]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",dF(i)){let s=DE(t,"width");s!==void 0&&(t.width=s)}if(dF(r))if(t.style.height==="")t.height=t.width/(e||2);else{let s=DE(t,"height");s!==void 0&&(t.height=s)}return t}var rV=GO?{passive:!0}:!1;function u8(t,e,n){t.addEventListener(e,n,rV)}function d8(t,e,n){t.canvas.removeEventListener(e,n,rV)}function h8(t,e){let n=c8[t.type]||t.type,{x:r,y:i}=ys(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function sy(t,e){for(let n of t)if(n===e||n.contains(e))return!0}function f8(t,e,n){let r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||sy(a.addedNodes,r),o=o&&!sy(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function p8(t,e,n){let r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||sy(a.removedNodes,r),o=o&&!sy(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}var $d=new Map,hF=0;function iV(){let t=window.devicePixelRatio;t!==hF&&(hF=t,$d.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function g8(t,e){$d.size||window.addEventListener("resize",iV),$d.set(t,e)}function m8(t){$d.delete(t),$d.size||window.removeEventListener("resize",iV)}function y8(t,e,n){let r=t.canvas,i=r&&Gm(r);if(!i)return;let s=uE((a,c)=>{let l=i.clientWidth;n(a,c),l<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(i),g8(t,s),o}function NE(t,e,n){n&&n.disconnect(),e==="resize"&&m8(t)}function v8(t,e,n){let r=t.canvas,i=uE(s=>{t.ctx!==null&&n(h8(s,t))},t);return u8(r,e,i),i}var UE=class extends iy{acquireContext(e,n){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(l8(e,n),r):null}releaseContext(e){let n=e.canvas;if(!n[ty])return!1;let r=n[ty].initial;["height","width"].forEach(s=>{let o=r[s];me(o)?n.removeAttribute(s):n.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[ty],!0}addEventListener(e,n,r){this.removeEventListener(e,n);let i=e.$proxies||(e.$proxies={}),o={attach:f8,detach:p8,resize:y8}[n]||v8;i[n]=o(e,n,r)}removeEventListener(e,n){let r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:NE,detach:NE,resize:NE}[n]||d8)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return qO(e,n,r,i)}isAttached(e){let n=Gm(e);return!!(n&&n.isConnected)}};function _8(t){return!qm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?BE:UE}var cr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Fo(this.x)&&Fo(this.y)}getProps(e,n){let r=this.$animations;if(!n||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function w8(t,e){let n=t.options.ticks,r=b8(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?D8(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return E8(e,l,s,o/i),l;let u=I8(s,e,i);if(o>0){let d,h,f=o>1?Math.round((c-a)/(o-1)):null;for(Qm(e,l,u,me(f)?0:a-f,a),d=0,h=o-1;d<h;d++)Qm(e,l,u,s[d],s[d+1]);return Qm(e,l,u,c,me(f)?e.length:c+f),l}return Qm(e,l,u),l}function b8(t){let e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function I8(t,e,n){let r=x8(t),i=e.length/n;if(!r)return Math.max(i,1);let s=CO(r);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>i)return c}return Math.max(i,1)}function D8(t){let e=[],n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function E8(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Qm(t,e,n,r,i){let s=Z(r,0),o=Math.min(Z(i,t.length),t.length),a=0,c,l,u;for(n=Math.ceil(n),i&&(c=i-r,n=c/Math.floor(c/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(t[l]),a++,u=Math.round(s+a*n))}function x8(t){let e=t.length,n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}var C8=t=>t==="left"?"right":t==="right"?"left":t,fF=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,pF=(t,e)=>Math.min(e||t,t);function gF(t,e){let n=[],r=t.length/e,i=t.length,s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function T8(t,e,n){let r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6,c=t.getPixelForTick(i),l;if(!(n&&(r===1?l=Math.max(c-s,o-c):e===0?l=(t.getPixelForTick(1)-c)/2:l=(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function S8(t,e){Ie(t,n=>{let r=n.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Ld(t){return t.drawTicks?t.tickLength:0}function mF(t,e){if(!t.display)return 0;let n=yt(t.font,e),r=Ft(t.padding);return(Pe(t.text)?t.text.length:1)*n.lineHeight+r.height}function A8(t,e){return yi(t,{scale:e,type:"scale"})}function M8(t,e,n){return yi(t,{tick:n,index:e,type:"tick"})}function R8(t,e,n){let r=Bm(t);return(n&&e!=="right"||!n&&e==="right")&&(r=C8(r)),r}function P8(t,e,n,r){let{top:i,left:s,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c,d=0,h,f,p,g=o-i,m=a-s;if(t.isHorizontal()){if(f=Ot(r,s,a),ae(n)){let y=Object.keys(n)[0],v=n[y];p=u[y].getPixelForValue(v)+g-e}else n==="center"?p=(l.bottom+l.top)/2+g-e:p=fF(t,n,e);h=a-s}else{if(ae(n)){let y=Object.keys(n)[0],v=n[y];f=u[y].getPixelForValue(v)-m+e}else n==="center"?f=(l.left+l.right)/2-m+e:f=fF(t,n,e);p=Ot(r,o,i),d=n==="left"?-et:et}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var Bo=class t extends cr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=fn(e,Number.POSITIVE_INFINITY),n=fn(n,Number.NEGATIVE_INFINITY),r=fn(r,Number.POSITIVE_INFINITY),i=fn(i,Number.NEGATIVE_INFINITY),{min:fn(e,r),max:fn(n,i),minDefined:qe(e),maxDefined:qe(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:fn(n,fn(r,n)),max:fn(r,fn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(e,n,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jO(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?gF(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=w8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let n=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ae(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,n=e.ticks,r=pF(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation,o=i,a,c,l;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=wt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),c=this.maxHeight-Ld(e.grid)-n.padding-mF(e.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),o=Lm(Math.min(Math.asin(wt((u.highest.height+6)/a,-1,1)),Math.asin(wt(c/l,-1,1))-Math.asin(wt(h/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=mF(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ld(s)+c):(e.height=this.maxHeight,e.width=Ld(s)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=$n(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let y=r.mirror?0:m*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{let y=r.mirror?0:g*d.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(l,u,m,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;c?l?(h=i*e.width,f=r*n.height):(h=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)me(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let n=this.options.ticks.sampleSize,r=this.ticks;n<r.length&&(r=gF(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(n/pF(n,r)),l=0,u=0,d,h,f,p,g,m,y,v,_,b,w;for(d=0;d<n;d+=c){if(p=e[d].label,g=this._resolveTickFontOptions(d),i.font=m=g.string,y=s[m]=s[m]||{data:{},gc:[]},v=g.lineHeight,_=b=0,!me(p)&&!Pe(p))_=Md(i,y.data,y.gc,_,p),b=v;else if(Pe(p))for(h=0,f=p.length;h<f;++h)w=p[h],!me(w)&&!Pe(w)&&(_=Md(i,y.data,y.gc,_,w),b+=v);o.push(_),a.push(b),l=Math.max(_,l),u=Math.max(b,u)}S8(s,n);let E=o.indexOf(l),A=a.indexOf(u),S=L=>({width:o[L]||0,height:a[L]||0});return{first:S(0),last:S(n-1),widest:S(E),highest:S(A),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let n=this._startPixel+e*this._length;return SO(this._alignToPixels?ps(this.chart,n,0):n)}getDecimalForPixel(e){let n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){let n=this.ticks||[];if(e>=0&&e<n.length){let r=n[e];return r.$context||(r.$context=M8(this.getContext(),e,r))}return this.$context||(this.$context=A8(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,n=$n(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=Ld(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(Be){return ps(r,Be,g)},v,_,b,w,E,A,S,L,Q,J,ce,Tt;if(o==="top")v=y(this.bottom),A=this.bottom-h,L=v-m,J=y(e.top)+m,Tt=e.bottom;else if(o==="bottom")v=y(this.top),J=e.top,Tt=y(e.bottom)-m,A=v+m,L=this.top+h;else if(o==="left")v=y(this.right),E=this.right-h,S=v-m,Q=y(e.left)+m,ce=e.right;else if(o==="right")v=y(this.left),Q=e.left,ce=y(e.right)-m,E=v+m,S=this.left+h;else if(n==="x"){if(o==="center")v=y((e.top+e.bottom)/2+.5);else if(ae(o)){let Be=Object.keys(o)[0],tt=o[Be];v=y(this.chart.scales[Be].getPixelForValue(tt))}J=e.top,Tt=e.bottom,A=v+m,L=A+h}else if(n==="y"){if(o==="center")v=y((e.left+e.right)/2);else if(ae(o)){let Be=Object.keys(o)[0],tt=o[Be];v=y(this.chart.scales[Be].getPixelForValue(tt))}E=v-m,S=E-h,Q=e.left,ce=e.right}let yn=Z(i.ticks.maxTicksLimit,d),xe=Math.max(1,Math.ceil(d/yn));for(_=0;_<d;_+=xe){let Be=this.getContext(_),tt=s.setContext(Be),zn=a.setContext(Be),Vt=tt.lineWidth,Uo=tt.color,Xd=zn.dash||[],$o=zn.dashOffset,cl=tt.tickWidth,Ts=tt.tickColor,ll=tt.tickBorderDash||[],Ss=tt.tickBorderDashOffset;b=T8(this,_,c),b!==void 0&&(w=ps(r,b,Vt),l?E=S=Q=ce=w:A=L=J=Tt=w,f.push({tx1:E,ty1:A,tx2:S,ty2:L,x1:Q,y1:J,x2:ce,y2:Tt,width:Vt,color:Uo,borderDash:Xd,borderDashOffset:$o,tickWidth:cl,tickColor:Ts,tickBorderDash:ll,tickBorderDashOffset:Ss}))}return this._ticksLength=d,this._borderValue=v,f}_computeLabelItems(e){let n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,h=Ld(r.grid),f=h+u,p=d?-u:f,g=-$n(this.labelRotation),m=[],y,v,_,b,w,E,A,S,L,Q,J,ce,Tt="middle";if(i==="top")E=this.bottom-p,A=this._getXAxisLabelAlignment();else if(i==="bottom")E=this.top+p,A=this._getXAxisLabelAlignment();else if(i==="left"){let xe=this._getYAxisLabelAlignment(h);A=xe.textAlign,w=xe.x}else if(i==="right"){let xe=this._getYAxisLabelAlignment(h);A=xe.textAlign,w=xe.x}else if(n==="x"){if(i==="center")E=(e.top+e.bottom)/2+f;else if(ae(i)){let xe=Object.keys(i)[0],Be=i[xe];E=this.chart.scales[xe].getPixelForValue(Be)+f}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")w=(e.left+e.right)/2-f;else if(ae(i)){let xe=Object.keys(i)[0],Be=i[xe];w=this.chart.scales[xe].getPixelForValue(Be)}A=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(c==="start"?Tt="top":c==="end"&&(Tt="bottom"));let yn=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){_=a[y],b=_.label;let xe=s.setContext(this.getContext(y));S=this.getPixelForTick(y)+s.labelOffset,L=this._resolveTickFontOptions(y),Q=L.lineHeight,J=Pe(b)?b.length:1;let Be=J/2,tt=xe.color,zn=xe.textStrokeColor,Vt=xe.textStrokeWidth,Uo=A;o?(w=S,A==="inner"&&(y===v-1?Uo=this.options.reverse?"left":"right":y===0?Uo=this.options.reverse?"right":"left":Uo="center"),i==="top"?l==="near"||g!==0?ce=-J*Q+Q/2:l==="center"?ce=-yn.highest.height/2-Be*Q+Q:ce=-yn.highest.height+Q/2:l==="near"||g!==0?ce=Q/2:l==="center"?ce=yn.highest.height/2-Be*Q:ce=yn.highest.height-J*Q,d&&(ce*=-1),g!==0&&!xe.showLabelBackdrop&&(w+=Q/2*Math.sin(g))):(E=S,ce=(1-J)*Q/2);let Xd;if(xe.showLabelBackdrop){let $o=Ft(xe.backdropPadding),cl=yn.heights[y],Ts=yn.widths[y],ll=ce-$o.top,Ss=0-$o.left;switch(Tt){case"middle":ll-=cl/2;break;case"bottom":ll-=cl;break}switch(A){case"center":Ss-=Ts/2;break;case"right":Ss-=Ts;break;case"inner":y===v-1?Ss-=Ts:y>0&&(Ss-=Ts/2);break}Xd={left:Ss,top:ll,width:Ts+$o.width,height:cl+$o.height,color:xe.backdropColor}}m.push({label:b,font:L,textOffset:ce,options:{rotation:g,color:tt,strokeColor:zn,strokeWidth:Vt,textAlign:Uo,textBaseline:Tt,translation:[w,E],backdrop:Xd}})}return m}_getXAxisLabelAlignment(){let{position:e,ticks:n}=this.options;if(-$n(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return n==="left"?i?(u=this.right+s,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let n=this.options.grid;if(!this._isVisible()||!n.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){let c=i[s];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=ps(e,this.left,o)-o/2,u=ps(e,this.right,a)+a/2,d=h=c):(d=ps(e,this.top,o)-o/2,h=ps(e,this.bottom,a)+a/2,l=u=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(l,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&Nd(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;gs(r,l,0,u,c,a)}i&&kd(r)}drawTitle(){let{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;let s=yt(r.font),o=Ft(r.padding),a=r.align,c=s.lineHeight/2;n==="bottom"||n==="center"||ae(n)?(c+=o.bottom,Pe(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=P8(this,c,n,a);gs(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:R8(a,n,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,n=e.ticks&&e.ticks.z||0,r=Z(e.grid&&e.grid.z,-1),i=Z(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=n.length;s<o;++s){let a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let n=this.options.ticks.setContext(this.getContext(e));return yt(n.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Qc=class{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let n=Object.getPrototypeOf(e),r;O8(n)&&(r=this.register(n));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,N8(e,o,r),this.override&&Le.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Le[i]&&(delete Le[i][r],this.override&&delete fs[r])}};function N8(t,e,n){let r=jc(Object.create(null),[n?Le.get(n):{},Le.get(e),t.defaults]);Le.set(e,r),t.defaultRoutes&&k8(e,t.defaultRoutes),t.descriptors&&Le.describe(e,t.descriptors)}function k8(t,e){Object.keys(e).forEach(n=>{let r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");Le.route(s,i,c,a)})}function O8(t){return"id"in t&&"defaults"in t}var $E=class{constructor(){this.controllers=new Qc(_s,"datasets",!0),this.elements=new Qc(cr,"elements"),this.plugins=new Qc(Object,"plugins"),this.scales=new Qc(Bo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ie(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){let i=Vm(e);Ae(r["before"+i],[],r),n[e](r),Ae(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){let r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){let i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Ur=new $E,HE=class{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],c=[n,i,s.options];if(Ae(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){let r=e&&e.config,i=Z(r.options&&r.options.plugins,{}),s=F8(r);return i===!1&&!n?[]:L8(e,s,i,n)}_notifyStateChanges(e){let n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}};function F8(t){let e={},n=[],r=Object.keys(Ur.plugins.items);for(let s=0;s<r.length;s++)n.push(Ur.getPlugin(r[s]));let i=t.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function V8(t,e){return!e&&t===!1?null:t===!0?{}:t}function L8(t,{plugins:e,localIds:n},r,i){let s=[],o=t.getContext();for(let a of e){let c=a.id,l=V8(r[c],i);l!==null&&s.push({plugin:a,options:j8(t.config,{plugin:a,local:n[c]},l,o)})}return s}function j8(t,{plugin:e,local:n},r,i){let s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zE(t,e){let n=Le.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function B8(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function U8(t,e){return t===e?"_index_":"_value_"}function yF(t){if(t==="x"||t==="y"||t==="r")return t}function $8(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function qE(t,...e){if(yF(t))return t;for(let n of e){let r=n.axis||$8(n.position)||t.length>1&&yF(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vF(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function H8(t,e){if(e.data&&e.data.datasets){let n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return vF(t,"x",n[0])||vF(t,"y",n[0])}return{}}function z8(t,e){let n=fs[t.type]||{scales:{}},r=e.scales||{},i=zE(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!ae(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=qE(o,a,H8(o,t),Le.scales[a.type]),l=U8(c,i),u=n.scales||{};s[o]=Uc(Object.create(null),[{axis:c},a,u[c],u[l]])}),t.data.datasets.forEach(o=>{let a=o.type||t.type,c=o.indexAxis||zE(a,e),u=(fs[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=B8(d,c),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Uc(s[f],[{axis:h},r[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Uc(a,[Le.scales[a.type],Le.scale])}),s}function sV(t){let e=t.options||(t.options={});e.plugins=Z(e.plugins,{}),e.scales=z8(t,e)}function oV(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function q8(t){return t=t||{},t.data=oV(t.data),sV(t),t}var _F=new Map,aV=new Set;function Ym(t,e){let n=_F.get(t);return n||(n=e(),_F.set(t,n),aV.add(n)),n}var jd=(t,e,n)=>{let r=mi(e,n);r!==void 0&&t.add(r)},GE=class{constructor(e){this._config=q8(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=oV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),sV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ym(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ym(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ym(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){let n=e.id,r=this.type;return Ym(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){let r=this._scopeCache,i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;let c=new Set;n.forEach(u=>{e&&(c.add(e),u.forEach(d=>jd(c,e,d))),u.forEach(d=>jd(c,i,d)),u.forEach(d=>jd(c,fs[s]||{},d)),u.forEach(d=>jd(c,Le,d)),u.forEach(d=>jd(c,Um,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),aV.has(n)&&o.set(n,l),l}chartOptionScopes(){let{options:e,type:n}=this;return[e,fs[n]||{},Le.datasets[n]||{},{type:n},Le,Um]}resolveNamedOptions(e,n,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=wF(this._resolverCache,e,i),c=o;if(W8(o,n)){s.$shared=!1,r=pi(r)?r():r;let l=this.createResolver(e,r,a);c=Oo(o,r,l)}for(let l of n)s[l]=c[l];return s}createResolver(e,n,r=[""],i){let{resolver:s}=wF(this._resolverCache,e,r);return ae(n)?Oo(s,n,void 0,i):s}};function wF(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));let i=n.join(),s=r.get(i);return s||(s={resolver:zm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var G8=t=>ae(t)&&Object.getOwnPropertyNames(t).some(e=>pi(t[e]));function W8(t,e){let{isScriptable:n,isIndexable:r}=vE(t);for(let i of e){let s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(pi(a)||G8(a))||o&&Pe(a))return!0}return!1}var K8="4.4.1",Q8=["top","bottom","left","right","chartArea"];function bF(t,e){return t==="top"||t==="bottom"||Q8.indexOf(t)===-1&&e==="x"}function IF(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function DF(t){let e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ae(n&&n.onComplete,[t],e)}function Y8(t){let e=t.chart,n=e.options.animation;Ae(n&&n.onProgress,[t],e)}function cV(t){return qm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var ny={},EF=t=>{let e=cV(t);return Object.values(ny).filter(n=>n.canvas===e).pop()};function Z8(t,e,n){let r=Object.keys(t);for(let i of r){let s=+i;if(s>=e){let o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function X8(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Zm(t,e,n){return t.options.clip?t[n]:e[n]}function J8(t,e){let{xScale:n,yScale:r}=t;return n&&r?{left:Zm(n,e,"left"),right:Zm(n,e,"right"),top:Zm(r,e,"top"),bottom:Zm(r,e,"bottom")}:e}var Zc=(()=>{class t{static defaults=Le;static instances=ny;static overrides=fs;static registry=Ur;static version=K8;static getChart=EF;static register(...n){Ur.add(...n),xF()}static unregister(...n){Ur.remove(...n),xF()}constructor(n,r){let i=this.config=new GE(r),s=cV(n),o=EF(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||_8(s)),this.platform.updateConfig(i);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=IO(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new HE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=NO(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],ny[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}vi.listen(this,"complete",DF),vi.listen(this,"progress",Y8),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:n,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return me(n)?r&&o?o:s?i/s:null:n}get data(){return this.config.data}set data(n){this.config.data=n}get options(){return this._options}set options(n){this.config.options=n}get registry(){return Ur}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():IE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gE(this.canvas,this.ctx),this}stop(){return vi.stop(this),this}resize(n,r){vi.running(this)?this._resizeBeforeDraw={width:n,height:r}:this._resize(n,r)}_resize(n,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,n,r,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,IE(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Ae(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};Ie(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let n=this.options,r=n.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let c=r[a],l=qE(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Ie(o,a=>{let c=a.options,l=c.id,u=qE(l,c),d=Z(c.type,a.dtype);(c.position===void 0||bF(c.position,u)!==bF(a.dposition))&&(c.position=a.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===d)h=i[l];else{let f=Ur.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(c,n)}),Ie(s,(a,c)=>{a||delete i[c]}),Ie(i,a=>{Gt.configure(this,a,a.options),Gt.addBox(this,a)})}_updateMetasets(){let n=this._metasets,r=this.data.datasets.length,i=n.length;if(n.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);n.splice(r,i-r)}this._sortedMetasets=n.slice(0).sort(IF("order","index"))}_removeUnreferencedMetasets(){let{_metasets:n,data:{datasets:r}}=this;n.length>r.length&&delete this._stacks,n.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let n=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||zE(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Ur.getController(c),{datasetElementType:u,dataElementType:d}=Le.datasets[c];Object.assign(l,{dataElementType:Ur.getElement(d),datasetElementType:u&&Ur.getElement(u)}),a.controller=new l(this,i),n.push(a.controller)}}return this._updateMetasets(),n}_resetElements(){Ie(this.data.datasets,(n,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(n){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:n,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Ie(o,u=>{u.reset()}),this._updateDatasets(n),this.notifyPlugins("afterUpdate",{mode:n}),this._layers.sort(IF("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ie(this.scales,n=>{Gt.removeBox(this,n)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let n=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(n.events);(!nE(r,i)||!!this._responsiveListeners!==n.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:n}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;Z8(n,s,a)}}_getUniformDataChanges(){let n=this._dataChanges;if(!n||!n.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(n.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!nE(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(n){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gt.update(this,this.width,this.height,n);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Ie(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(n){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:n,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,pi(n)?n({datasetIndex:r}):n);this.notifyPlugins("afterDatasetsUpdate",{mode:n})}}_updateDataset(n,r){let i=this.getDatasetMeta(n),s={meta:i,index:n,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vi.has(this)?this.attached&&!vi.running(this)&&vi.start(this):(this.draw(),DF({chart:this})))}draw(){let n;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(n=0;n<r.length&&r[n].z<=0;++n)r[n].draw(this.chartArea);for(this._drawDatasets();n<r.length;++n)r[n].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(n){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!n||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let n=this.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r)this._drawDataset(n[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(n){let r=this.ctx,i=n._clip,s=!i.disabled,o=J8(n,this.chartArea),a={meta:n,index:n.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Nd(r,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),n.controller.draw(),s&&kd(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(n){return Vr(n,this.chartArea,this._minPadding)}getElementsAtEventForMode(n,r,i,s){let o=e8.modes[r];return typeof o=="function"?o(this,n,i,s):[]}getDatasetMeta(n){let r=this.data.datasets[n],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:n,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=yi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(n){let r=this.data.datasets[n];if(!r)return!1;let i=this.getDatasetMeta(n);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(n,r){let i=this.getDatasetMeta(n);i.hidden=!r}toggleDataVisibility(n){this._hiddenIndices[n]=!this._hiddenIndices[n]}getDataVisibility(n){return!this._hiddenIndices[n]}_updateVisibility(n,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(n),a=o.controller._resolveAnimations(void 0,s);$c(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(n,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===n?s:void 0))}hide(n,r){this._updateVisibility(n,r,!1)}show(n,r){this._updateVisibility(n,r,!0)}_destroyDatasetMeta(n){let r=this._metasets[n];r&&r.controller&&r.controller._destroy(),delete this._metasets[n]}_stop(){let n,r;for(this.stop(),vi.remove(this),n=0,r=this.data.datasets.length;n<r;++n)this._destroyDatasetMeta(n)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:n,ctx:r}=this;this._stop(),this.config.clearCache(),n&&(this.unbindEvents(),gE(n,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete ny[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...n){return this.canvas.toDataURL(...n)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let n=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),n[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Ie(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let n=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),n[l]=u},s=(l,u)=>{n[l]&&(r.removeEventListener(this,l,u),delete n[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){Ie(this._listeners,(n,r)=>{this.platform.removeEventListener(this,r,n)}),this._listeners={},Ie(this._responsiveListeners,(n,r)=>{this.platform.removeEventListener(this,r,n)}),this._responsiveListeners=void 0}updateHoverStyle(n,r,i){let s=i?"set":"remove",o,a,c,l;for(r==="dataset"&&(o=this.getDatasetMeta(n[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=n.length;c<l;++c){a=n[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(n){let r=this._active||[],i=n.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!Rd(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(n,r,i){return this._plugins.notify(this,n,r,i)}isPluginEnabled(n){return this._plugins._cache.filter(r=>r.plugin.id===n).length===1}_updateHoverStyles(n,r,i){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(r,n),c=i?n:o(n,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(n,r){let i={event:n,replay:r,cancelable:!0,inChartArea:this.isPointInArea(n)},s=a=>(a.options.events||this.options.events).includes(n.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(n,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(n,r,i){let{_active:s=[],options:o}=this,a=r,c=this._getActiveElements(n,s,i,a),l=xO(n),u=X8(n,this._lastEvent,i,l);i&&(this._lastEvent=null,Ae(o.onHover,[n,c,this],this),l&&Ae(o.onClick,[n,c,this],this));let d=!Rd(c,s);return(d||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=u,d}_getActiveElements(n,r,i,s){if(n.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(n,o.mode,o,s)}}return t})();function xF(){return Ie(Zc.instances,t=>t._plugins.invalidate())}function e7(t,e,n){let{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=i/a;t.beginPath(),t.arc(s,o,a,r-l,n+l),c>i?(l=i/c,t.arc(s,o,c,n+l,r-l,!0)):t.arc(s,o,i,n+et,r-et),t.closePath(),t.clip()}function t7(t){return Hm(t,["outerStart","outerEnd","innerStart","innerEnd"])}function n7(t,e,n,r){let i=t7(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=c=>{let l=(n-Math.min(s,c))*r/2;return wt(c,0,Math.min(s,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:wt(i.innerStart,0,o),innerEnd:wt(i.innerEnd,0,o)}}function Kc(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function oy(t,e,n,r,i,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-l,0),h=u>0?u+r+n+l:0,f=0,p=i-c;if(r){let xe=u>0?u-r:0,Be=d>0?d-r:0,tt=(xe+Be)/2,zn=tt!==0?p*tt/(tt+r):p;f=(p-zn)/2}let g=Math.max(.001,p*d-n/Ne)/d,m=(p-g)/2,y=c+m+f,v=i-m-f,{outerStart:_,outerEnd:b,innerStart:w,innerEnd:E}=n7(e,h,d,v-y),A=d-_,S=d-b,L=y+_/A,Q=v-b/S,J=h+w,ce=h+E,Tt=y+w/J,yn=v-E/ce;if(t.beginPath(),s){let xe=(L+Q)/2;if(t.arc(o,a,d,L,xe),t.arc(o,a,d,xe,Q),b>0){let Vt=Kc(S,Q,o,a);t.arc(Vt.x,Vt.y,b,Q,v+et)}let Be=Kc(ce,v,o,a);if(t.lineTo(Be.x,Be.y),E>0){let Vt=Kc(ce,yn,o,a);t.arc(Vt.x,Vt.y,E,v+et,yn+Math.PI)}let tt=(v-E/h+(y+w/h))/2;if(t.arc(o,a,h,v-E/h,tt,!0),t.arc(o,a,h,tt,y+w/h,!0),w>0){let Vt=Kc(J,Tt,o,a);t.arc(Vt.x,Vt.y,w,Tt+Math.PI,y-et)}let zn=Kc(A,y,o,a);if(t.lineTo(zn.x,zn.y),_>0){let Vt=Kc(A,L,o,a);t.arc(Vt.x,Vt.y,_,y-et,L)}}else{t.moveTo(o,a);let xe=Math.cos(L)*d+o,Be=Math.sin(L)*d+a;t.lineTo(xe,Be);let tt=Math.cos(Q)*d+o,zn=Math.sin(Q)*d+a;t.lineTo(tt,zn)}t.closePath()}function r7(t,e,n,r,i){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){oy(t,e,n,r,c,i);for(let l=0;l<s;++l)t.fill();isNaN(a)||(c=o+(a%ke||ke))}return oy(t,e,n,r,c,i),t.fill(),c}function i7(t,e,n,r,i){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=c,f=c.borderAlign==="inner";if(!l)return;t.setLineDash(d||[]),t.lineDashOffset=h,f?(t.lineWidth=l*2,t.lineJoin=u||"round"):(t.lineWidth=l,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){oy(t,e,n,r,p,i);for(let g=0;g<s;++g)t.stroke();isNaN(a)||(p=o+(a%ke||ke))}f&&e7(t,e,p),s||(oy(t,e,n,r,p,i),t.stroke())}var WE=class extends cr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,r){let i=this.getProps(["x","y"],r),{angle:s,distance:o}=oE(i,{x:e,y:n}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,p=Z(d,c-a)>=ke||zc(s,a,c),g=jr(o,l+h,u+h);return p&&g}getCenterPoint(e){let{x:n,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(i+s)/2,d=(o+a+l+c)/2;return{x:n+Math.cos(u)*d,y:r+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:n,circumference:r}=this,i=(n.offset||0)/4,s=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>ke?Math.floor(r/ke):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(Ne,r||0)),l=i*c;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,r7(e,this,l,s,o),i7(e,this,l,s,o),e.restore()}};function lV(t,e,n=e){t.lineCap=Z(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Z(n.borderDash,e.borderDash)),t.lineDashOffset=Z(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Z(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Z(n.borderWidth,e.borderWidth),t.strokeStyle=Z(n.borderColor,e.borderColor)}function s7(t,e,n){t.lineTo(n.x,n.y)}function o7(t){return t.stepped?VO:t.tension||t.cubicInterpolationMode==="monotone"?LO:s7}function uV(t,e,n={}){let r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function a7(t,e,n,r){let{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=uV(i,n,r),u=o7(s),{move:d=!0,reverse:h}=r||{},f,p,g;for(f=0;f<=l;++f)p=i[(a+(h?l-f:f))%o],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,g,p,h,s.stepped),g=p);return c&&(p=i[(a+(h?l:0))%o],u(t,g,p,h,s.stepped)),!!c}function c7(t,e,n,r){let i=e.points,{count:s,start:o,ilen:a}=uV(i,n,r),{move:c=!0,reverse:l}=r||{},u=0,d=0,h,f,p,g,m,y,v=b=>(o+(l?a-b:b))%s,_=()=>{g!==m&&(t.lineTo(u,m),t.lineTo(u,g),t.lineTo(u,y))};for(c&&(f=i[v(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[v(h)],f.skip)continue;let b=f.x,w=f.y,E=b|0;E===p?(w<g?g=w:w>m&&(m=w),u=(d*u+b)/++d):(_(),t.lineTo(b,w),p=E,d=0,g=m=w),y=w}_()}function KE(t){let e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?c7:a7}function l7(t){return t.stepped?WO:t.tension||t.cubicInterpolationMode==="monotone"?KO:hs}function u7(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),lV(t,e.options),t.stroke(i)}function d7(t,e,n,r){let{segments:i,options:s}=e,o=KE(e);for(let a of i)lV(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}var h7=typeof Path2D=="function";function f7(t,e,n,r){h7&&!e.options.segment?u7(t,e,n,r):d7(t,e,n,r)}var ly=(()=>{class t extends cr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};constructor(n){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,n&&Object.assign(this,n)}updateControlPoints(n,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;zO(this._points,i,n,s,r),this._pointsUpdated=!0}}set points(n){this._points=n,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=YO(this,this.options.segment))}first(){let n=this.segments,r=this.points;return n.length&&r[n[0].start]}last(){let n=this.segments,r=this.points,i=n.length;return i&&r[n[i-1].end]}interpolate(n,r){let i=this.options,s=n[r],o=this.points,a=TE(this,{property:r,start:s,end:s});if(!a.length)return;let c=[],l=l7(i),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=o[h],g=o[f];if(p===g){c.push(p);continue}let m=Math.abs((s-p[r])/(g[r]-p[r])),y=l(p,g,m,i.stepped);y[r]=n[r],c.push(y)}return c.length===1?c[0]:c}pathSegment(n,r,i){return KE(this)(n,this,r,i)}path(n,r,i){let s=this.segments,o=KE(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of s)a&=o(n,this,c,{start:r,end:r+i-1});return!!a}draw(n,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(n.save(),f7(n,this,i,s),n.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return t})();function CF(t,e,n,r){let i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}var p7=(()=>{class t extends cr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return CF(this,n,"x",r)}inYRange(n,r){return CF(this,n,"y",r)}getCenterPoint(n){let{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);let i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){let i=this.options;this.skip||i.radius<.1||!Vr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,$m(n,i,this.x,this.y))}getRange(){let n=this.options||{};return n.radius+n.hitRadius}}return t})();function dV(t,e){let{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e),a,c,l,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),c=Math.max(n,i),l=r-d,u=r+d):(d=s/2,a=n-d,c=n+d,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function vs(t,e,n,r){return t?0:wt(e,n,r)}function g7(t,e,n){let r=t.options.borderWidth,i=t.borderSkipped,s=yE(r);return{t:vs(i.top,s.top,0,n),r:vs(i.right,s.right,0,e),b:vs(i.bottom,s.bottom,0,n),l:vs(i.left,s.left,0,e)}}function m7(t,e,n){let{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=ms(i),o=Math.min(e,n),a=t.borderSkipped,c=r||ae(i);return{topLeft:vs(!c||a.top||a.left,s.topLeft,0,o),topRight:vs(!c||a.top||a.right,s.topRight,0,o),bottomLeft:vs(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:vs(!c||a.bottom||a.right,s.bottomRight,0,o)}}function y7(t){let e=dV(t),n=e.right-e.left,r=e.bottom-e.top,i=g7(t,n/2,r/2),s=m7(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function kE(t,e,n,r){let i=e===null,s=n===null,a=t&&!(i&&s)&&dV(t,r);return a&&(i||jr(e,a.left,a.right))&&(s||jr(n,a.top,a.bottom))}function v7(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function _7(t,e){t.rect(e.x,e.y,e.w,e.h)}function OE(t,e,n={}){let r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}var QE=class extends cr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=y7(this),a=v7(o.radius)?Gc:_7;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,OE(o,n,s)),e.clip(),a(e,OE(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,OE(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return kE(this,e,n,r)}inXRange(e,n){return kE(this,e,null,n)}inYRange(e,n){return kE(this,null,e,n)}getCenterPoint(e){let{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},w7=Object.freeze({__proto__:null,ArcElement:WE,BarElement:QE,LineElement:ly,PointElement:p7}),YE=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],TF=YE.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function hV(t){return YE[t%YE.length]}function fV(t){return TF[t%TF.length]}function b7(t,e){return t.borderColor=hV(e),t.backgroundColor=fV(e),++e}function I7(t,e){return t.backgroundColor=t.data.map(()=>hV(e++)),e}function D7(t,e){return t.backgroundColor=t.data.map(()=>fV(e++)),e}function E7(t){let e=0;return(n,r)=>{let i=t.getDatasetMeta(r).controller;i instanceof ix?e=I7(n,e):i instanceof eV?e=D7(n,e):i&&(e=b7(n,e))}}function SF(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function x7(t){return t&&(t.borderColor||t.backgroundColor)}var C7={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;let{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(SF(r)||x7(i)||s&&SF(s)))return;let o=E7(t);r.forEach(o)}};function T7(t,e,n,r,i){let s=i.samples||r;if(s>=n)return t.slice(e,e+n);let o=[],a=(n-2)/(s-2),c=0,l=e+n-1,u=e,d,h,f,p,g;for(o[c++]=t[u],d=0;d<s-2;d++){let m=0,y=0,v,_=Math.floor((d+1)*a)+1+e,b=Math.min(Math.floor((d+2)*a)+1,n)+e,w=b-_;for(v=_;v<b;v++)m+=t[v].x,y+=t[v].y;m/=w,y/=w;let E=Math.floor(d*a)+1+e,A=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:S,y:L}=t[u];for(f=p=-1,v=E;v<A;v++)p=.5*Math.abs((S-m)*(t[v].y-L)-(S-t[v].x)*(y-L)),p>f&&(f=p,h=t[v],g=v);o[c++]=h,u=g}return o[c++]=t[l],o}function S7(t,e,n,r){let i=0,s=0,o,a,c,l,u,d,h,f,p,g,m=[],y=e+n-1,v=t[e].x,b=t[y].x-v;for(o=e;o<e+n;++o){a=t[o],c=(a.x-v)/b*r,l=a.y;let w=c|0;if(w===u)l<p?(p=l,d=o):l>g&&(g=l,h=o),i=(s*i+a.x)/++s;else{let E=o-1;if(!me(d)&&!me(h)){let A=Math.min(d,h),S=Math.max(d,h);A!==f&&A!==E&&m.push(de(N({},t[A]),{x:i})),S!==f&&S!==E&&m.push(de(N({},t[S]),{x:i}))}o>0&&E!==f&&m.push(t[E]),m.push(a),u=w,s=0,p=g=l,d=h=f=o}}return m}function pV(t){if(t._decimated){let e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function AF(t){t.data.datasets.forEach(e=>{pV(e)})}function A7(t,e){let n=e.length,r=0,i,{iScale:s}=t,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(r=wt(Fr(e,s.axis,o).lo,0,n-1)),l?i=wt(Fr(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var M7={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){AF(t);return}let r=t.width;t.data.datasets.forEach((i,s)=>{let{_data:o,indexAxis:a}=i,c=t.getDatasetMeta(s),l=o||i.data;if(Wc([a,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=A7(c,l),f=n.threshold||4*r;if(h<=f){pV(i);return}me(o)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=T7(l,d,h,r,n);break;case"min-max":p=S7(l,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=p})},destroy(t){AF(t)}};function R7(t,e,n){let r=t.segments,i=t.points,s=e.points,o=[];for(let a of r){let{start:c,end:l}=a;l=sx(c,l,i);let u=ZE(n,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}let d=TE(e,u);for(let h of d){let f=ZE(n,s[h.start],s[h.end],h.loop),p=CE(a,i,f);for(let g of p)o.push({source:g,target:h,start:{[n]:MF(u,f,"start",Math.max)},end:{[n]:MF(u,f,"end",Math.min)}})}}return o}function ZE(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=hn(i),s=hn(s)),{property:t,start:i,end:s}}function P7(t,e){let{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=sx(o,a,i);let c=i[o],l=i[a];r!==null?(s.push({x:c.x,y:r}),s.push({x:l.x,y:r})):n!==null&&(s.push({x:n,y:c.y}),s.push({x:n,y:l.y}))}),s}function sx(t,e,n){for(;e>t;e--){let r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function MF(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function gV(t,e){let n=[],r=!1;return Pe(t)?(r=!0,n=t):n=P7(t,e),n.length?new ly({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function RF(t){return t&&t.fill!==!1}function N7(t,e,n){let i=t[e].fill,s=[e],o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!qe(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function k7(t,e,n){let r=L7(t);if(ae(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return qe(i)&&Math.floor(i)===i?O7(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function O7(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function F7(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ae(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function V7(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ae(t)?r=t.value:r=e.getBaseValue(),r}function L7(t){let e=t.options,n=e.fill,r=Z(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function j7(t){let{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=B7(e,n);a.push(gV({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)U7(i,o[u],a)}return new ly({points:i,options:{}})}function B7(t,e){let n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function U7(t,e,n){let r=[];for(let i=0;i<n.length;i++){let s=n[i],{first:o,last:a,point:c}=$7(s,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(t.push(c),!a)break}}t.push(...r)}function $7(t,e,n){let r=t.interpolate(e,n);if(!r)return{};let i=r[n],s=t.segments,o=t.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],d=o[u.start][n],h=o[u.end][n];if(jr(i,d,h)){a=i===d,c=i===h;break}}return{first:a,last:c,point:r}}var ay=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){let{x:i,y:s,radius:o}=this;return n=n||{start:0,end:ke},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){let{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function H7(t){let{chart:e,fill:n,line:r}=t;if(qe(n))return z7(e,n);if(n==="stack")return j7(t);if(n==="shape")return!0;let i=q7(t);return i instanceof ay?i:gV(i,r)}function z7(t,e){let n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function q7(t){return(t.scale||{}).getPointPositionForValue?W7(t):G7(t)}function G7(t){let{scale:e={},fill:n}=t,r=F7(n,e);if(qe(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function W7(t){let{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=V7(n,e,s),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,s);return new ay({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function FE(t,e,n){let r=H7(e),{line:i,scale:s,axis:o}=e,a=i.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:d=l}=c||{};r&&i.points.length&&(Nd(t,n),K7(t,{line:i,target:r,above:u,below:d,area:n,scale:s,axis:o}),kd(t))}function K7(t,e){let{line:n,target:r,above:i,below:s,area:o,scale:a}=e,c=n._loop?"angle":e.axis;t.save(),c==="x"&&s!==i&&(PF(t,r,o.top),NF(t,{line:n,target:r,color:i,scale:a,property:c}),t.restore(),t.save(),PF(t,r,o.bottom)),NF(t,{line:n,target:r,color:s,scale:a,property:c}),t.restore()}function PF(t,e,n){let{segments:r,points:i}=e,s=!0,o=!1;t.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],d=i[sx(c,l,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function NF(t,e){let{line:n,target:r,property:i,color:s,scale:o}=e,a=R7(n,r,i);for(let{source:c,target:l,start:u,end:d}of a){let{style:{backgroundColor:h=s}={}}=c,f=r!==!0;t.save(),t.fillStyle=h,Q7(t,o,f&&ZE(i,u,d)),t.beginPath();let p=!!n.pathSegment(t,c),g;if(f){p?t.closePath():kF(t,r,d,i);let m=!!r.pathSegment(t,l,{move:p,reverse:!0});g=p&&m,g||kF(t,r,u,i)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function Q7(t,e,n){let{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function kF(t,e,n,r){let i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Y7={id:"filler",afterDatasetsUpdate(t,e,n){let r=(t.data.datasets||[]).length,i=[],s,o,a,c;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof ly&&(c={visible:t.isDatasetVisible(o),index:o,fill:k7(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=N7(i,o,n.propagate))},beforeDraw(t,e,n){let r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&FE(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;let r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;RF(s)&&FE(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){let r=e.meta.$filler;!RF(r)||n.drawTime!=="beforeDatasetDraw"||FE(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},OF=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Z7=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index,cy=class extends cr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},n=Ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){let{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=yt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=OF(r,s),l,u;n.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{let m=r+n/2+s.measureText(p.text).width;(g===0||l[l.length-1]+m+2*a>o)&&(d+=u,l[l.length-(g>0?0:1)]=0,f+=u,h++),c[g]={left:0,top:f,row:h,width:m,height:i},l[l.length-1]+=m+a}),d}_fitCols(e,n,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{let{itemWidth:v,itemHeight:_}=X7(r,n,s,m,i);y>0&&f+_+2*a>u&&(d+=h+a,l.push({width:h,height:f}),p+=h+a,g++,h=f=0),c[y]={left:p,top:f,col:g,width:v,height:_},h=Math.max(h,v),f+=_+a}),d+=h,l.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Vo(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Ot(r,this.left+i,this.right-this.lineWidths[a]);for(let l of n)a!==l.row&&(a=l.row,c=Ot(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=Ot(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of n)l.col!==a&&(a=l.col,c=Ot(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Nd(e,this),this._draw(),kd(e)}}_draw(){let{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Le.color,c=Vo(e.rtl,this.left,this.width),l=yt(o.font),{padding:u}=o,d=l.size,h=d/2,f;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=OF(o,d),y=function(E,A,S){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();let L=Z(S.lineWidth,1);if(i.fillStyle=Z(S.fillStyle,a),i.lineCap=Z(S.lineCap,"butt"),i.lineDashOffset=Z(S.lineDashOffset,0),i.lineJoin=Z(S.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=Z(S.strokeStyle,a),i.setLineDash(Z(S.lineDash,[])),o.usePointStyle){let Q={radius:g*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:L},J=c.xPlus(E,p/2),ce=A+h;mE(i,Q,J,ce,o.pointStyleWidth&&p)}else{let Q=A+Math.max((d-g)/2,0),J=c.leftForLtr(E,p),ce=ms(S.borderRadius);i.beginPath(),Object.values(ce).some(Tt=>Tt!==0)?Gc(i,{x:J,y:Q,w:p,h:g,radius:ce}):i.rect(J,Q,p,g),i.fill(),L!==0&&i.stroke()}i.restore()},v=function(E,A,S){gs(i,S.text,E,A+m/2,l,{strikethrough:S.hidden,textAlign:c.textAlign(S.textAlign)})},_=this.isHorizontal(),b=this._computeTitleHeight();_?f={x:Ot(s,this.left+u,this.right-r[0]),y:this.top+u+b,line:0}:f={x:this.left+u,y:Ot(s,this.top+b+u,this.bottom-n[0].height),line:0},EE(this.ctx,e.textDirection);let w=m+u;this.legendItems.forEach((E,A)=>{i.strokeStyle=E.fontColor,i.fillStyle=E.fontColor;let S=i.measureText(E.text).width,L=c.textAlign(E.textAlign||(E.textAlign=o.textAlign)),Q=p+h+S,J=f.x,ce=f.y;c.setWidth(this.width),_?A>0&&J+Q+u>this.right&&(ce=f.y+=w,f.line++,J=f.x=Ot(s,this.left+u,this.right-r[f.line])):A>0&&ce+w>this.bottom&&(J=f.x=J+n[f.line].width+u,f.line++,ce=f.y=Ot(s,this.top+b+u,this.bottom-n[f.line].height));let Tt=c.x(J);if(y(Tt,ce,E),J=kO(L,J+p+h,_?J+Q:this.right,e.rtl),v(c.x(J),ce,E),_)f.x+=Q+u;else if(typeof E.text!="string"){let yn=l.lineHeight;f.y+=mV(E,yn)+u}else f.y+=w}),xE(this.ctx,e.textDirection)}drawTitle(){let e=this.options,n=e.title,r=yt(n.font),i=Ft(n.padding);if(!n.display)return;let s=Vo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=r.size/2,l=i.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=Ot(e.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=l+Ot(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=Ot(a,d,d+h);o.textAlign=s.textAlign(Bm(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,gs(o,n.text,f,u,r)}_computeTitleHeight(){let e=this.options.title,n=yt(e.font),r=Ft(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(jr(e,this.left,this.right)&&jr(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],jr(e,i.left,i.left+i.width)&&jr(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let n=this.options;if(!tK(e.type,n))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=Z7(i,r);i&&!s&&Ae(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ae(n.onHover,[e,r,this],this)}else r&&Ae(n.onClick,[e,r,this],this)}};function X7(t,e,n,r,i){let s=J7(r,t,e,n),o=eK(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function J7(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function eK(t,e,n){let r=t;return typeof e.text!="string"&&(r=mV(e,n)),r}function mV(t,e){let n=t.text?t.text.length:0;return e*n}function tK(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var nK={id:"legend",_element:cy,start(t,e,n){let r=t.legend=new cy({ctx:t.ctx,options:n,chart:t});Gt.configure(t,r,n),Gt.addBox(t,r)},stop(t){Gt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){let r=t.legend;Gt.configure(t,r,n),r.options=n},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){let r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(n?0:void 0),u=Ft(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},Hd=class extends cr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;let i=Pe(r.text)?r.text.length:1;this._padding=Ft(r.padding);let s=i*yt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align,c=0,l,u,d;return this.isHorizontal()?(u=Ot(a,r,s),d=n+e,l=s-r):(o.position==="left"?(u=r+e,d=Ot(a,i,n),c=Ne*-.5):(u=s-e,d=Ot(a,n,i),c=Ne*.5),l=i-n),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,n=this.options;if(!n.display)return;let r=yt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);gs(e,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:l,textAlign:Bm(n.align),textBaseline:"middle",translation:[o,a]})}};function rK(t,e){let n=new Hd({ctx:t.ctx,options:e,chart:t});Gt.configure(t,n,e),Gt.addBox(t,n),t.titleBlock=n}var iK={id:"title",_element:Hd,start(t,e,n){rK(t,n)},stop(t){let e=t.titleBlock;Gt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){let r=t.titleBlock;Gt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Xm=new WeakMap,sK={id:"subtitle",start(t,e,n){let r=new Hd({ctx:t.ctx,options:n,chart:t});Gt.configure(t,r,n),Gt.addBox(t,r),Xm.set(t,r)},stop(t){Gt.removeBox(t,Xm.get(t)),Xm.delete(t)},beforeUpdate(t,e,n){let r=Xm.get(t);Gt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ud={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){let o=t[e].element;if(o&&o.hasValue()){let a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){let c=t[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=Om(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Br(t,e){return e&&(Pe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function _i(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function oK(t,e){let{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function FF(t,e){let n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,c=yt(e.bodyFont),l=yt(e.titleFont),u=yt(e.footerFont),d=s.length,h=i.length,f=r.length,p=Ft(e.padding),g=p.height,m=0,y=r.reduce((b,w)=>b+w.before.length+w.lines.length+w.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){let b=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;g+=f*b+(y-f)*c.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let v=0,_=function(b){m=Math.max(m,n.measureText(b).width+v)};return n.save(),n.font=l.string,Ie(t.title,_),n.font=c.string,Ie(t.beforeBody.concat(t.afterBody),_),v=e.displayColors?o+2+e.boxPadding:0,Ie(r,b=>{Ie(b.before,_),Ie(b.lines,_),Ie(b.after,_)}),v=0,n.font=u.string,Ie(t.footer,_),n.restore(),m+=p.width,{width:m,height:g}}function aK(t,e){let{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function cK(t,e,n,r){let{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function lK(t,e,n,r){let{x:i,width:s}=n,{width:o,chartArea:{left:a,right:c}}=t,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),cK(l,t,e,n)&&(l="center"),l}function VF(t,e,n){let r=n.yAlign||e.yAlign||aK(t,n);return{xAlign:n.xAlign||e.xAlign||lK(t,e,n,r),yAlign:r}}function uK(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function dK(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function LF(t,e,n,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=ms(o),p=uK(e,a),g=dK(e,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,h)+i:a==="right"&&(p+=Math.max(d,f)+i),{x:wt(p,0,r.width-e.width),y:wt(g,0,r.height-e.height)}}function Jm(t,e,n){let r=Ft(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function jF(t){return Br([],_i(t))}function hK(t,e,n){return yi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function BF(t,e){let n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}var yV={beforeTitle:Lr,title(t){if(t.length>0){let e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Lr,beforeBody:Lr,beforeLabel:Lr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let n=t.formattedValue;return me(n)||(e+=n),e},labelColor(t){let n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Lr,afterBody:Lr,beforeFooter:Lr,footer:Lr,afterFooter:Lr};function pn(t,e,n,r){let i=t[e].call(n,r);return typeof i>"u"?yV[e].call(n,r):i}var UF=(()=>{class t extends cr{static positioners=Ud;constructor(n){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=n.chart,this.options=n.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(n){this.options=n,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let n=this._cachedAnimations;if(n)return n;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new ry(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=hK(this.chart.getContext(),this,this._tooltipItems))}getTitle(n,r){let{callbacks:i}=r,s=pn(i,"beforeTitle",this,n),o=pn(i,"title",this,n),a=pn(i,"afterTitle",this,n),c=[];return c=Br(c,_i(s)),c=Br(c,_i(o)),c=Br(c,_i(a)),c}getBeforeBody(n,r){return jF(pn(r.callbacks,"beforeBody",this,n))}getBody(n,r){let{callbacks:i}=r,s=[];return Ie(n,o=>{let a={before:[],lines:[],after:[]},c=BF(i,o);Br(a.before,_i(pn(c,"beforeLabel",this,o))),Br(a.lines,pn(c,"label",this,o)),Br(a.after,_i(pn(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(n,r){return jF(pn(r.callbacks,"afterBody",this,n))}getFooter(n,r){let{callbacks:i}=r,s=pn(i,"beforeFooter",this,n),o=pn(i,"footer",this,n),a=pn(i,"afterFooter",this,n),c=[];return c=Br(c,_i(s)),c=Br(c,_i(o)),c=Br(c,_i(a)),c}_createItems(n){let r=this._active,i=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(oK(this.chart,r[l]));return n.filter&&(c=c.filter((d,h,f)=>n.filter(d,h,f,i))),n.itemSort&&(c=c.sort((d,h)=>n.itemSort(d,h,i))),Ie(c,d=>{let h=BF(n.callbacks,d);s.push(pn(h,"labelColor",this,d)),o.push(pn(h,"labelPointStyle",this,d)),a.push(pn(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(n,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Ud[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=FF(this,i),u=Object.assign({},c,l),d=VF(this.chart,i,u),h=LF(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),n&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(n,r,i,s){let o=this.getCaretPosition(n,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(n,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=ms(c),{x:f,y:p}=n,{width:g,height:m}=r,y,v,_,b,w,E;return o==="center"?(w=p+m/2,s==="left"?(y=f,v=y-a,b=w+a,E=w-a):(y=f+g,v=y+a,b=w-a,E=w+a),_=y):(s==="left"?v=f+Math.max(l,d)+a:s==="right"?v=f+g-Math.max(u,h)-a:v=this.caretX,o==="top"?(b=p,w=b-a,y=v-a,_=v+a):(b=p+m,w=b+a,y=v+a,_=v-a),E=b),{x1:y,x2:v,x3:_,y1:b,y2:w,y3:E}}drawTitle(n,r,i){let s=this.title,o=s.length,a,c,l;if(o){let u=Vo(i.rtl,this.x,this.width);for(n.x=Jm(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=yt(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+c,l+1===o&&(n.y+=i.titleMarginBottom-c)}}_drawColorBox(n,r,i,s,o){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=o,d=yt(o.bodyFont),h=Jm(this,"left",o),f=s.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,g=r.y+p;if(o.usePointStyle){let m={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,v=g+l/2;n.strokeStyle=o.multiKeyBackground,n.fillStyle=o.multiKeyBackground,$m(n,m,y,v),n.strokeStyle=a.borderColor,n.fillStyle=a.backgroundColor,$m(n,m,y,v)}else{n.lineWidth=ae(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,n.strokeStyle=a.borderColor,n.setLineDash(a.borderDash||[]),n.lineDashOffset=a.borderDashOffset||0;let m=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),v=ms(a.borderRadius);Object.values(v).some(_=>_!==0)?(n.beginPath(),n.fillStyle=o.multiKeyBackground,Gc(n,{x:m,y:g,w:u,h:l,radius:v}),n.fill(),n.stroke(),n.fillStyle=a.backgroundColor,n.beginPath(),Gc(n,{x:y,y:g+1,w:u-2,h:l-2,radius:v}),n.fill()):(n.fillStyle=o.multiKeyBackground,n.fillRect(m,g,u,l),n.strokeRect(m,g,u,l),n.fillStyle=a.backgroundColor,n.fillRect(y,g+1,u-2,l-2))}n.fillStyle=this.labelTextColors[i]}drawBody(n,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=i,h=yt(i.bodyFont),f=h.lineHeight,p=0,g=Vo(i.rtl,this.x,this.width),m=function(L){r.fillText(L,g.x(n.x+p),n.y+f/2),n.y+=f+o},y=g.textAlign(a),v,_,b,w,E,A,S;for(r.textAlign=a,r.textBaseline="middle",r.font=h.string,n.x=Jm(this,y,i),r.fillStyle=i.bodyColor,Ie(this.beforeBody,m),p=c&&y!=="right"?a==="center"?u/2+d:u+2+d:0,w=0,A=s.length;w<A;++w){for(v=s[w],_=this.labelTextColors[w],r.fillStyle=_,Ie(v.before,m),b=v.lines,c&&b.length&&(this._drawColorBox(r,n,w,g,i),f=Math.max(h.lineHeight,l)),E=0,S=b.length;E<S;++E)m(b[E]),f=h.lineHeight;Ie(v.after,m)}p=0,f=h.lineHeight,Ie(this.afterBody,m),n.y-=o}drawFooter(n,r,i){let s=this.footer,o=s.length,a,c;if(o){let l=Vo(i.rtl,this.x,this.width);for(n.x=Jm(this,i.footerAlign,i),n.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=yt(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+i.footerSpacing}}drawBackground(n,r,i,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=n,{width:u,height:d}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=ms(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(c+h,l),a==="top"&&this.drawCaret(n,r,i,s),r.lineTo(c+u-f,l),r.quadraticCurveTo(c+u,l,c+u,l+f),a==="center"&&o==="right"&&this.drawCaret(n,r,i,s),r.lineTo(c+u,l+d-g),r.quadraticCurveTo(c+u,l+d,c+u-g,l+d),a==="bottom"&&this.drawCaret(n,r,i,s),r.lineTo(c+p,l+d),r.quadraticCurveTo(c,l+d,c,l+d-p),a==="center"&&o==="left"&&this.drawCaret(n,r,i,s),r.lineTo(c,l+h),r.quadraticCurveTo(c,l,c+h,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(n){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=Ud[n.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=FF(this,n),l=Object.assign({},a,this._size),u=VF(r,n,l),d=LF(n,l,u,r);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(n){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=Ft(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(n.save(),n.globalAlpha=i,this.drawBackground(o,n,s,r),EE(n,r.textDirection),o.y+=a.top,this.drawTitle(o,n,r),this.drawBody(o,n,r),this.drawFooter(o,n,r),xE(n,r.textDirection),n.restore())}getActiveElements(){return this._active||[]}setActiveElements(n,r){let i=this._active,s=n.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!Rd(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(n,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(n,o,r,i),c=this._positionChanged(a,n),l=r||!Rd(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:n.x,y:n.y},this.update(!0,r))),l}_getActiveElements(n,r,i,s){let o=this.options;if(n.type==="mouseout")return[];if(!s)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(n,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(n,r){let{caretX:i,caretY:s,options:o}=this,a=Ud[o.position].call(this,n,r);return a!==!1&&(i!==a.x||s!==a.y)}}return t})(),fK={id:"tooltip",_element:UF,positioners:Ud,afterInit(t,e,n){n&&(t.tooltip=new UF({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",de(N({},n),{cancelable:!0}))===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){let n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pK=Object.freeze({__proto__:null,Colors:C7,Decimation:M7,Filler:Y7,Legend:nK,SubTitle:sK,Title:iK,Tooltip:fK}),gK=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function mK(t,e,n,r){let i=t.indexOf(e);if(i===-1)return gK(t,e,n,r);let s=t.lastIndexOf(e);return i!==s?n:i}var yK=(t,e)=>t===null?null:wt(Math.round(t),0,e);function $F(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var vK=(()=>{class t extends Bo{static id="category";static defaults={ticks:{callback:$F}};constructor(n){super(n),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(n){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(n)}parse(n,r){if(me(n))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===n?r:mK(i,n,Z(r,n),this._addedLabels),yK(r,i.length-1)}determineDataLimits(){let{minDefined:n,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(n||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let n=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=n===0&&r===o.length-1?o:o.slice(n,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=n;a<=r;a++)s.push({value:a});return s}getLabelForValue(n){return $F.call(this,n)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(n){return typeof n!="number"&&(n=this.parse(n)),n===null?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getPixelForTick(n){let r=this.ticks;return n<0||n>r.length-1?null:this.getPixelForValue(r[n].value)}getValueForPixel(n){return Math.round(this._startValue+this.getDecimalForPixel(n)*this._valueRange)}getBasePixel(){return this.bottom}}return t})();function _K(t,e){let n=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=s||1,p=u-1,{min:g,max:m}=e,y=!me(o),v=!me(a),_=!me(l),b=(m-g)/(d+1),w=rE((m-g)/p/f)*f,E,A,S,L;if(w<1e-14&&!y&&!v)return[{value:g},{value:m}];L=Math.ceil(m/w)-Math.floor(g/w),L>p&&(w=rE(L*w/p/f)*f),me(c)||(E=Math.pow(10,c),w=Math.ceil(w*E)/E),i==="ticks"?(A=Math.floor(g/w)*w,S=Math.ceil(m/w)*w):(A=g,S=m),y&&v&&s&&TO((a-o)/s,w/1e3)?(L=Math.round(Math.min((a-o)/w,u)),w=(a-o)/L,A=o,S=a):_?(A=y?o:A,S=v?a:S,L=l-1,w=(S-A)/L):(L=(S-A)/w,Hc(L,Math.round(L),w/1e3)?L=Math.round(L):L=Math.ceil(L));let Q=Math.max(sE(w),sE(A));E=Math.pow(10,me(c)?Q:c),A=Math.round(A*E)/E,S=Math.round(S*E)/E;let J=0;for(y&&(h&&A!==o?(n.push({value:o}),A<o&&J++,Hc(Math.round((A+J*w)*E)/E,o,HF(o,b,t))&&J++):A<o&&J++);J<L;++J){let ce=Math.round((A+J*w)*E)/E;if(v&&ce>a)break;n.push({value:ce})}return v&&h&&S!==a?n.length&&Hc(n[n.length-1].value,a,HF(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!v||S===a)&&n.push({value:S}),n}function HF(t,e,{horizontal:n,minRotation:r}){let i=$n(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}var Yc=class extends Bo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=c=>i=n?i:c,a=c=>s=r?s:c;if(e){let c=ar(i),l=ar(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,n=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=_K(i,s);return e.bounds==="ticks"&&iE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return qc(e,this.chart.options.locale,this.options.ticks.format)}},XE=class extends Yc{static id="linear";static defaults={ticks:{callback:Pd.formatters.numeric}};determineDataLimits(){let{min:e,max:n}=this.getMinMax(!0);this.min=qe(e)?e:0,this.max=qe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),n=e?this.width:this.height,r=$n(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},zd=t=>Math.floor(gi(t)),jo=(t,e)=>Math.pow(10,zd(t)+e);function zF(t){return t/Math.pow(10,zd(t))===1}function qF(t,e,n){let r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function wK(t,e){let n=e-t,r=zd(n);for(;qF(t,e,r)>10;)r++;for(;qF(t,e,r)<10;)r--;return Math.min(r,zd(t))}function bK(t,{min:e,max:n}){e=fn(t.min,e);let r=[],i=zd(e),s=wK(e,n),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),h=fn(t.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;h<n;)r.push({value:h,major:zF(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((c+u+d*Math.pow(10,s))*o)/o;let f=fn(t.max,h);return r.push({value:f,major:zF(f),significand:d}),r}var JE=class extends Bo{static id="logarithmic";static defaults={ticks:{callback:Pd.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){let r=Yc.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return qe(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:n}=this.getMinMax(!0);this.min=qe(e)?Math.max(0,e):null,this.max=qe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!qe(this._userMin)&&(this.min=e===jo(this.min,0)?jo(this.min,-1):jo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(jo(r,-1)),o(jo(i,1)))),r<=0&&s(jo(i,-1)),i<=0&&o(jo(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,n={min:this._userMin,max:this._userMax},r=bK(n,this);return e.bounds==="ticks"&&iE(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":qc(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=gi(e),this._valueRange=gi(this.max)-gi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}};function ex(t){let e=t.ticks;if(e.display&&t.display){let n=Ft(e.backdropPadding);return Z(e.font&&e.font.size,Le.font.size)+n.height}return 0}function IK(t,e,n){return n=Pe(n)?n:[n],{w:FO(t,e.string,n),h:n.length*e.lineHeight}}function GF(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function DK(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ne/s:0;for(let c=0;c<s;c++){let l=o.setContext(t.getPointLabelContext(c));i[c]=l.padding;let u=t.getPointPosition(c,t.drawingArea+i[c],a),d=yt(l.font),h=IK(t.ctx,d,t._pointLabels[c]);r[c]=h;let f=hn(t.getIndexAngle(c)+a),p=Math.round(Lm(f)),g=GF(p,u.x,h.w,0,180),m=GF(p,u.y,h.h,90,270);EK(n,e,f,g,m)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=TK(t,r,i)}function EK(t,e,n,r,i){let s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function xK(t,e,n){let r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,c=t.getPointPosition(e,r+i+o,s),l=Math.round(Lm(hn(c.angle+et))),u=MK(c.y,a.h,l),d=SK(l),h=AK(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function CK(t,e){if(!e)return!0;let{left:n,top:r,right:i,bottom:s}=t;return!(Vr({x:n,y:r},e)||Vr({x:n,y:s},e)||Vr({x:i,y:r},e)||Vr({x:i,y:s},e))}function TK(t,e,n){let r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:ex(s)/2,additionalAngle:o?Ne/i:0},l;for(let u=0;u<i;u++){c.padding=n[u],c.size=e[u];let d=xK(t,u,c);r.push(d),a==="auto"&&(d.visible=CK(d,l),d.visible&&(l=d))}return r}function SK(t){return t===0||t===180?"center":t<180?"left":"right"}function AK(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function MK(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function RK(t,e,n){let{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!me(a)){let c=ms(e.borderRadius),l=Ft(e.backdropPadding);t.fillStyle=a;let u=r-l.left,d=i-l.top,h=s-r+l.width,f=o-i+l.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),Gc(t,{x:u,y:d,w:h,h:f,radius:c}),t.fill()):t.fillRect(u,d,h,f)}}function PK(t,e){let{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){let s=t._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(t.getPointLabelContext(i));RK(n,o,s);let a=yt(o.font),{x:c,y:l,textAlign:u}=s;gs(n,t._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function vV(t,e,n,r){let{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ke);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function NK(t,e,n,r,i){let s=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),vV(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function kK(t,e,n){return yi(t,{label:n,index:e,type:"pointLabel"})}var tx=class extends Yc{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Pd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Ft(ex(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){let{min:e,max:n}=this.getMinMax(!1);this.min=qe(e)&&!isNaN(e)?e:0,this.max=qe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ex(this.options))}generateTickLabels(e){Yc.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{let i=Ae(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?DK(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){let n=ke/(this._pointLabels.length||1),r=this.options.startAngle||0;return hn(e*n+$n(r))}getDistanceFromCenterForValue(e){if(me(e))return NaN;let n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(me(e))return NaN;let n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){let n=this._pointLabels||[];if(e>=0&&e<n.length){let r=n[e];return kK(this.getContext(),e,r)}}getPointPosition(e,n,r=0){let i=this.getIndexAngle(e)-et+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:n}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),vV(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length,a,c,l;if(n.pointLabels.display&&PK(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=i.setContext(h),p=s.setContext(h);NK(this,f,c,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&!n.reverse)return;let l=r.setContext(this.getContext(c)),u=yt(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=Ft(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}gs(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},uy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},gn=Object.keys(uy);function WF(t,e){return t-e}function KF(t,e){if(me(e))return null;let n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),qe(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Fo(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function QF(t,e,n,r){let i=gn.length;for(let s=gn.indexOf(t);s<i-1;++s){let o=uy[gn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return gn[s]}return gn[i-1]}function OK(t,e,n,r,i){for(let s=gn.length-1;s>=gn.indexOf(n);s--){let o=gn[s];if(uy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return gn[n?gn.indexOf(n):0]}function FK(t){for(let e=gn.indexOf(t)+1,n=gn.length;e<n;++e)if(uy[gn[e]].common)return gn[e]}function YF(t,e,n){if(!n)t[e]=!0;else if(n.length){let{lo:r,hi:i}=jm(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function VK(t,e,n,r){let i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=n[a],c>=0&&(e[c].major=!0);return e}function ZF(t,e,n){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:VK(t,r,i,n)}var nx=(()=>{class t extends Bo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(n){super(n),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(n,r={}){let i=n.time||(n.time={}),s=this._adapter=new Q6._date(n.adapters.date);s.init(r),Uc(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(n),this._normalized=r.normalized}parse(n,r){return n===void 0?null:KF(this,n)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let n=this.options,r=this._adapter,i=n.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(n.bounds!=="ticks"||n.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=qe(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=qe(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let n=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return n.length&&(r=n[0],i=n[n.length-1]),{min:r,max:i}}buildTicks(){let n=this.options,r=n.time,i=n.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();n.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=MO(s,o,a);return this._unit=r.unit||(i.autoSkip?QF(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):OK(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FK(this._unit),this.initOffsets(s),n.reverse&&c.reverse(),ZF(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(n=>+n.value))}initOffsets(n=[]){let r=0,i=0,s,o;this.options.offset&&n.length&&(s=this.getDecimalForValue(n[0]),n.length===1?r=1-s:r=(this.getDecimalForValue(n[1])-s)/2,o=this.getDecimalForValue(n[n.length-1]),n.length===1?i=o:i=(o-this.getDecimalForValue(n[n.length-2]))/2);let a=n.length<3?.5:.25;r=wt(r,0,a),i=wt(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let n=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||QF(o.minUnit,r,i,this._getLabelCapacity(r)),c=Z(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Fo(l)||l===!0,d={},h=r,f,p;if(u&&(h=+n.startOf(h,"isoWeek",l)),h=+n.startOf(h,u?"day":a),n.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+n.add(f,c,a),p++)YF(d,f,g);return(f===i||s.bounds==="ticks"||p===1)&&YF(d,f,g),Object.keys(d).sort(WF).map(m=>+m)}getLabelForValue(n){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(n,i.tooltipFormat):r.format(n,i.displayFormats.datetime)}format(n,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(n,a)}_tickFormatFunction(n,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return Ae(a,[n,r,i],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],f=i[r],p=u&&h&&f&&f.major;return this._adapter.format(n,s||(p?h:d))}generateTickLabels(n){let r,i,s;for(r=0,i=n.length;r<i;++r)s=n[r],s.label=this._tickFormatFunction(s.value,r,n)}getDecimalForValue(n){return n===null?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){let r=this._offsets,i=this.getDecimalForValue(n);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(n){let r=this._offsets,i=this.getDecimalForPixel(n)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(n){let r=this.options.ticks,i=this.ctx.measureText(n).width,s=$n(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(n){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(n,0,ZF(this,[n],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let n=this._cache.data||[],r,i;if(n.length)return n;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)n=n.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){let n=this._cache.labels||[],r,i;if(n.length)return n;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)n.push(KF(this,s[r]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return cE(n.sort(WF))}}return t})();function ey(t,e,n){let r=0,i=t.length-1,s,o,a,c;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Fr(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:c}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Fr(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:c}=t[i]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var rx=class extends nx{static id="timeseries";static defaults=nx.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ey(n,this.min),this._tableRange=ey(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:n,max:r}=this,i=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=n&&l<=r&&i.push(l);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,n=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ey(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return ey(this._table,r*this._tableRange+this._minPos,!0)}},LK=Object.freeze({__proto__:null,CategoryScale:vK,LinearScale:XE,LogarithmicScale:JE,RadialLinearScale:tx,TimeScale:nx,TimeSeriesScale:rx}),_V=[K6,w7,pK,LK];var wV=(()=>{let e=class e{constructor(r,i){this.fire=r,this.auth=i}ngOnInit(){this.info=this.fire.getItems(this.auth.getCurrentUserID()),this.CreateChart()}CreateChart(){let r=this.info.data.slice(0,20),i=r.map(o=>o.date),s=r.map(o=>o.depth);this.chart=new Zc("MyChart",{type:"line",data:{labels:i,datasets:[{label:"Depth",data:s,backgroundColor:"blue"}]},options:{aspectRatio:2.5}})}};e.\u0275fac=function(i){return new(i||e)(q(ls),q(dn))},e.\u0275cmp=bt({type:e,selectors:[["app-base"]],decls:3,vars:1,consts:[[1,"chart-container"],["id","MyChart"]],template:function(i,s){i&1&&(he(0,"div",0)(1,"canvas",1),Ye(2),ve()()),i&2&&(Yt(2),wa(" ",s.chart," "))}});let t=e;return t})();var jK=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:rO},{path:"home",component:eO},{path:"new",component:iO},{path:"device",component:wV}],ox=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({imports:[zw.forRoot(jK),zw]});let t=e;return t})();var bV=(()=>{let e=class e{constructor(){this.title="prj400"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=bt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){i&1&&He(0,"router-outlet")},dependencies:[Vw]});let t=e;return t})();var BK=typeof global=="object"&&global&&global.Object===Object&&global,dy=BK;var UK=typeof self=="object"&&self&&self.Object===Object&&self,$K=dy||UK||Function("return this")(),Hn=$K;var HK=Hn.Symbol,Xc=HK;var IV=Object.prototype,zK=IV.hasOwnProperty,qK=IV.toString,Gd=Xc?Xc.toStringTag:void 0;function GK(t){var e=zK.call(t,Gd),n=t[Gd];try{t[Gd]=void 0;var r=!0}catch{}var i=qK.call(t);return r&&(e?t[Gd]=n:delete t[Gd]),i}var DV=GK;var WK=Object.prototype,KK=WK.toString;function QK(t){return KK.call(t)}var EV=QK;var YK="[object Null]",ZK="[object Undefined]",xV=Xc?Xc.toStringTag:void 0;function XK(t){return t==null?t===void 0?ZK:YK:xV&&xV in Object(t)?DV(t):EV(t)}var ws=XK;function JK(t){return t!=null&&typeof t=="object"}var $r=JK;var eQ=Array.isArray,Wd=eQ;function tQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var mn=tQ;function nQ(t){return t}var hy=nQ;var rQ="[object AsyncFunction]",iQ="[object Function]",sQ="[object GeneratorFunction]",oQ="[object Proxy]";function aQ(t){if(!mn(t))return!1;var e=ws(t);return e==iQ||e==sQ||e==rQ||e==oQ}var Jc=aQ;var cQ=Hn["__core-js_shared__"],fy=cQ;var CV=function(){var t=/[^.]+$/.exec(fy&&fy.keys&&fy.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function lQ(t){return!!CV&&CV in t}var TV=lQ;var uQ=Function.prototype,dQ=uQ.toString;function hQ(t){if(t!=null){try{return dQ.call(t)}catch{}try{return t+""}catch{}}return""}var SV=hQ;var fQ=/[\\^$.*+?()[\]{}|]/g,pQ=/^\[object .+?Constructor\]$/,gQ=Function.prototype,mQ=Object.prototype,yQ=gQ.toString,vQ=mQ.hasOwnProperty,_Q=RegExp("^"+yQ.call(vQ).replace(fQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wQ(t){if(!mn(t)||TV(t))return!1;var e=Jc(t)?_Q:pQ;return e.test(SV(t))}var AV=wQ;function bQ(t,e){return t?.[e]}var MV=bQ;function IQ(t,e){var n=MV(t,e);return AV(n)?n:void 0}var el=IQ;var RV=Object.create,DQ=function(){function t(){}return function(e){if(!mn(e))return{};if(RV)return RV(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),PV=DQ;function EQ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var NV=EQ;function xQ(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var kV=xQ;var CQ=800,TQ=16,SQ=Date.now;function AQ(t){var e=0,n=0;return function(){var r=SQ(),i=TQ-(r-n);if(n=r,i>0){if(++e>=CQ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var OV=AQ;function MQ(t){return function(){return t}}var FV=MQ;var RQ=function(){try{var t=el(Object,"defineProperty");return t({},"",{}),t}catch{}}(),tl=RQ;var PQ=tl?function(t,e){return tl(t,"toString",{configurable:!0,enumerable:!1,value:FV(e),writable:!0})}:hy,VV=PQ;var NQ=OV(VV),LV=NQ;var kQ=9007199254740991,OQ=/^(?:0|[1-9]\d*)$/;function FQ(t,e){var n=typeof t;return e=e??kQ,!!e&&(n=="number"||n!="symbol"&&OQ.test(t))&&t>-1&&t%1==0&&t<e}var py=FQ;function VQ(t,e,n){e=="__proto__"&&tl?tl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var nl=VQ;function LQ(t,e){return t===e||t!==t&&e!==e}var bs=LQ;var jQ=Object.prototype,BQ=jQ.hasOwnProperty;function UQ(t,e,n){var r=t[e];(!(BQ.call(t,e)&&bs(r,n))||n===void 0&&!(e in t))&&nl(t,e,n)}var jV=UQ;function $Q(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(n[a],t[a],a,n,t):void 0;c===void 0&&(c=t[a]),i?nl(n,a,c):jV(n,a,c)}return n}var BV=$Q;var UV=Math.max;function HQ(t,e,n){return e=UV(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=UV(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),NV(t,this,a)}}var $V=HQ;function zQ(t,e){return LV($V(t,e,hy),t+"")}var HV=zQ;var qQ=9007199254740991;function GQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=qQ}var gy=GQ;function WQ(t){return t!=null&&gy(t.length)&&!Jc(t)}var rl=WQ;function KQ(t,e,n){if(!mn(n))return!1;var r=typeof e;return(r=="number"?rl(n)&&py(e,n.length):r=="string"&&e in n)?bs(n[e],t):!1}var zV=KQ;function QQ(t){return HV(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&zV(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var qV=QQ;var YQ=Object.prototype;function ZQ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||YQ;return t===n}var my=ZQ;function XQ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var GV=XQ;var JQ="[object Arguments]";function eY(t){return $r(t)&&ws(t)==JQ}var ax=eY;var WV=Object.prototype,tY=WV.hasOwnProperty,nY=WV.propertyIsEnumerable,rY=ax(function(){return arguments}())?ax:function(t){return $r(t)&&tY.call(t,"callee")&&!nY.call(t,"callee")},Kd=rY;function iY(){return!1}var KV=iY;var ZV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QV=ZV&&typeof module=="object"&&module&&!module.nodeType&&module,sY=QV&&QV.exports===ZV,YV=sY?Hn.Buffer:void 0,oY=YV?YV.isBuffer:void 0,aY=oY||KV,yy=aY;var cY="[object Arguments]",lY="[object Array]",uY="[object Boolean]",dY="[object Date]",hY="[object Error]",fY="[object Function]",pY="[object Map]",gY="[object Number]",mY="[object Object]",yY="[object RegExp]",vY="[object Set]",_Y="[object String]",wY="[object WeakMap]",bY="[object ArrayBuffer]",IY="[object DataView]",DY="[object Float32Array]",EY="[object Float64Array]",xY="[object Int8Array]",CY="[object Int16Array]",TY="[object Int32Array]",SY="[object Uint8Array]",AY="[object Uint8ClampedArray]",MY="[object Uint16Array]",RY="[object Uint32Array]",je={};je[DY]=je[EY]=je[xY]=je[CY]=je[TY]=je[SY]=je[AY]=je[MY]=je[RY]=!0;je[cY]=je[lY]=je[bY]=je[uY]=je[IY]=je[dY]=je[hY]=je[fY]=je[pY]=je[gY]=je[mY]=je[yY]=je[vY]=je[_Y]=je[wY]=!1;function PY(t){return $r(t)&&gy(t.length)&&!!je[ws(t)]}var XV=PY;function NY(t){return function(e){return t(e)}}var JV=NY;var eL=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qd=eL&&typeof module=="object"&&module&&!module.nodeType&&module,kY=Qd&&Qd.exports===eL,cx=kY&&dy.process,OY=function(){try{var t=Qd&&Qd.require&&Qd.require("util").types;return t||cx&&cx.binding&&cx.binding("util")}catch{}}(),lx=OY;var tL=lx&&lx.isTypedArray,FY=tL?JV(tL):XV,vy=FY;var VY=Object.prototype,LY=VY.hasOwnProperty;function jY(t,e){var n=Wd(t),r=!n&&Kd(t),i=!n&&!r&&yy(t),s=!n&&!r&&!i&&vy(t),o=n||r||i||s,a=o?GV(t.length,String):[],c=a.length;for(var l in t)(e||LY.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||py(l,c)))&&a.push(l);return a}var nL=jY;function BY(t,e){return function(n){return t(e(n))}}var rL=BY;function UY(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var iL=UY;var $Y=Object.prototype,HY=$Y.hasOwnProperty;function zY(t){if(!mn(t))return iL(t);var e=my(t),n=[];for(var r in t)r=="constructor"&&(e||!HY.call(t,r))||n.push(r);return n}var sL=zY;function qY(t){return rl(t)?nL(t,!0):sL(t)}var _y=qY;var GY=el(Object,"create"),wi=GY;function WY(){this.__data__=wi?wi(null):{},this.size=0}var oL=WY;function KY(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var aL=KY;var QY="__lodash_hash_undefined__",YY=Object.prototype,ZY=YY.hasOwnProperty;function XY(t){var e=this.__data__;if(wi){var n=e[t];return n===QY?void 0:n}return ZY.call(e,t)?e[t]:void 0}var cL=XY;var JY=Object.prototype,eZ=JY.hasOwnProperty;function tZ(t){var e=this.__data__;return wi?e[t]!==void 0:eZ.call(e,t)}var lL=tZ;var nZ="__lodash_hash_undefined__";function rZ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=wi&&e===void 0?nZ:e,this}var uL=rZ;function il(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}il.prototype.clear=oL;il.prototype.delete=aL;il.prototype.get=cL;il.prototype.has=lL;il.prototype.set=uL;var ux=il;function iZ(){this.__data__=[],this.size=0}var dL=iZ;function sZ(t,e){for(var n=t.length;n--;)if(bs(t[n][0],e))return n;return-1}var Is=sZ;var oZ=Array.prototype,aZ=oZ.splice;function cZ(t){var e=this.__data__,n=Is(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():aZ.call(e,n,1),--this.size,!0}var hL=cZ;function lZ(t){var e=this.__data__,n=Is(e,t);return n<0?void 0:e[n][1]}var fL=lZ;function uZ(t){return Is(this.__data__,t)>-1}var pL=uZ;function dZ(t,e){var n=this.__data__,r=Is(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var gL=dZ;function sl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sl.prototype.clear=dL;sl.prototype.delete=hL;sl.prototype.get=fL;sl.prototype.has=pL;sl.prototype.set=gL;var Ds=sl;var hZ=el(Hn,"Map"),wy=hZ;function fZ(){this.size=0,this.__data__={hash:new ux,map:new(wy||Ds),string:new ux}}var mL=fZ;function pZ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var yL=pZ;function gZ(t,e){var n=t.__data__;return yL(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Es=gZ;function mZ(t){var e=Es(this,t).delete(t);return this.size-=e?1:0,e}var vL=mZ;function yZ(t){return Es(this,t).get(t)}var _L=yZ;function vZ(t){return Es(this,t).has(t)}var wL=vZ;function _Z(t,e){var n=Es(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var bL=_Z;function ol(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ol.prototype.clear=mL;ol.prototype.delete=vL;ol.prototype.get=_L;ol.prototype.has=wL;ol.prototype.set=bL;var IL=ol;var wZ=rL(Object.getPrototypeOf,Object),by=wZ;var bZ="[object Object]",IZ=Function.prototype,DZ=Object.prototype,DL=IZ.toString,EZ=DZ.hasOwnProperty,xZ=DL.call(Object);function CZ(t){if(!$r(t)||ws(t)!=bZ)return!1;var e=by(t);if(e===null)return!0;var n=EZ.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&DL.call(n)==xZ}var EL=CZ;function TZ(){this.__data__=new Ds,this.size=0}var xL=TZ;function SZ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var CL=SZ;function AZ(t){return this.__data__.get(t)}var TL=AZ;function MZ(t){return this.__data__.has(t)}var SL=MZ;var RZ=200;function PZ(t,e){var n=this.__data__;if(n instanceof Ds){var r=n.__data__;if(!wy||r.length<RZ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new IL(r)}return n.set(t,e),this.size=n.size,this}var AL=PZ;function al(t){var e=this.__data__=new Ds(t);this.size=e.size}al.prototype.clear=xL;al.prototype.delete=CL;al.prototype.get=TL;al.prototype.has=SL;al.prototype.set=AL;var ML=al;var kL=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RL=kL&&typeof module=="object"&&module&&!module.nodeType&&module,NZ=RL&&RL.exports===kL,PL=NZ?Hn.Buffer:void 0,NL=PL?PL.allocUnsafe:void 0;function kZ(t,e){if(e)return t.slice();var n=t.length,r=NL?NL(n):new t.constructor(n);return t.copy(r),r}var OL=kZ;var OZ=Hn.Uint8Array,dx=OZ;function FZ(t){var e=new t.constructor(t.byteLength);return new dx(e).set(new dx(t)),e}var FL=FZ;function VZ(t,e){var n=e?FL(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var VL=VZ;function LZ(t){return typeof t.constructor=="function"&&!my(t)?PV(by(t)):{}}var LL=LZ;function jZ(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[t?a:++i];if(n(s[c],c,s)===!1)break}return e}}var jL=jZ;var BZ=jL(),BL=BZ;function UZ(t,e,n){(n!==void 0&&!bs(t[e],n)||n===void 0&&!(e in t))&&nl(t,e,n)}var Yd=UZ;function $Z(t){return $r(t)&&rl(t)}var UL=$Z;function HZ(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Zd=HZ;function zZ(t){return BV(t,_y(t))}var $L=zZ;function qZ(t,e,n,r,i,s,o){var a=Zd(t,n),c=Zd(e,n),l=o.get(c);if(l){Yd(t,n,l);return}var u=s?s(a,c,n+"",t,e,o):void 0,d=u===void 0;if(d){var h=Wd(c),f=!h&&yy(c),p=!h&&!f&&vy(c);u=c,h||f||p?Wd(a)?u=a:UL(a)?u=kV(a):f?(d=!1,u=OL(c,!0)):p?(d=!1,u=VL(c,!0)):u=[]:EL(c)||Kd(c)?(u=a,Kd(a)?u=$L(a):(!mn(a)||Jc(a))&&(u=LL(c))):d=!1}d&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),Yd(t,n,u)}var HL=qZ;function zL(t,e,n,r,i){t!==e&&BL(e,function(s,o){if(i||(i=new ML),mn(s))HL(t,e,o,n,zL,r,i);else{var a=r?r(Zd(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Yd(t,o,a)}},_y)}var qL=zL;var GZ=qV(function(t,e,n){qL(t,e,n)}),hx=GZ;var WZ=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],KZ={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:t=>xs(Cs(t.datasetIndex),.4),borderColor:t=>xs(Cs(t.datasetIndex),1),pointBackgroundColor:t=>xs(Cs(t.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:t=>xs(Cs(t.datasetIndex),.6),borderColor:t=>xs(Cs(t.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:t=>xs(Cs(t.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:t=>xs(Cs(t.dataIndex),.6),borderColor:t=>xs(Cs(t.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function xs(t,e){return"rgba("+t.concat(e).join(",")+")"}function fx(t,e){return Math.floor(Math.random()*(e-t+1))+t}function QZ(){return[fx(0,255),fx(0,255),fx(0,255)]}function Cs(t=0){return WZ[t]||QZ()}var GL=(()=>{let e=class e{constructor(){this.generateColors=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();Zc.register(..._V);var WL=(()=>{let e=class e{constructor(r){r?.plugins&&Zc.register(...r.plugins);let i=hx(r?.generateColors?KZ:{},r?.defaults||{});Le.set(i)}static forRoot(r){return{ngModule:e,providers:[{provide:GL,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(M(GL,8))},e.\u0275mod=Qe({type:e}),e.\u0275inj=Ke({});let t=e;return t})();var KL={production:!1,firebaseConfig:{apiKey:"AIzaSyCoGwRVbgbq3zrO8mty-_Tjea77Dfa6o9o",authDomain:"prj400-c5407.firebaseapp.com",projectId:"prj400-c5407",storageBucket:"prj400-c5407.appspot.com",messagingSenderId:"608627613870",appId:"1:608627613870:web:f84ad3b57e1f2d6e1f0d3f"}};var QL={production:!1,firebase:KL};var YL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Qe({type:e,bootstrap:[bV]}),e.\u0275inj=Ke({providers:[Da],imports:[ox,fA,Gf,WL,ZM.initializeApp(QL.firebase.firebaseConfig),Xk,ox,GA,WA]});let t=e;return t})();hA().bootstrapModule(YL).catch(t=>console.error(t));
